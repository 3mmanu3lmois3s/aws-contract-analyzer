var kN=Object.defineProperty;var Iw=n=>{throw TypeError(n)};var ON=(n,t,e)=>t in n?kN(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var J=(n,t,e)=>ON(n,typeof t!="symbol"?t+"":t,e),wy=(n,t,e)=>t.has(n)||Iw("Cannot "+e);var c=(n,t,e)=>(wy(n,t,"read from private field"),e?e.call(n):t.get(n)),_=(n,t,e)=>t.has(n)?Iw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),v=(n,t,e,i)=>(wy(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),x=(n,t,e)=>(wy(n,t,"access private method"),e);var dn=(n,t,e,i)=>({set _(s){v(n,t,s,e)},get _(){return c(n,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function Z1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cx={exports:{}},U0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN=Symbol.for("react.transitional.element"),PN=Symbol.for("react.fragment");function Mx(n,t,e){var i=null;if(e!==void 0&&(i=""+e),t.key!==void 0&&(i=""+t.key),"key"in t){e={};for(var s in t)s!=="key"&&(e[s]=t[s])}else e=t;return t=e.ref,{$$typeof:zN,type:n,key:i,ref:t!==void 0?t:null,props:e}}U0.Fragment=PN;U0.jsx=Mx;U0.jsxs=Mx;Cx.exports=U0;var U=Cx.exports,Rx={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=Symbol.for("react.transitional.element"),HN=Symbol.for("react.portal"),IN=Symbol.for("react.fragment"),BN=Symbol.for("react.strict_mode"),FN=Symbol.for("react.profiler"),UN=Symbol.for("react.consumer"),jN=Symbol.for("react.context"),GN=Symbol.for("react.forward_ref"),VN=Symbol.for("react.suspense"),$N=Symbol.for("react.memo"),Nx=Symbol.for("react.lazy"),Bw=Symbol.iterator;function qN(n){return n===null||typeof n!="object"?null:(n=Bw&&n[Bw]||n["@@iterator"],typeof n=="function"?n:null)}var Dx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lx=Object.assign,kx={};function _h(n,t,e){this.props=n,this.context=t,this.refs=kx,this.updater=e||Dx}_h.prototype.isReactComponent={};_h.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};_h.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Ox(){}Ox.prototype=_h.prototype;function J1(n,t,e){this.props=n,this.context=t,this.refs=kx,this.updater=e||Dx}var tA=J1.prototype=new Ox;tA.constructor=J1;Lx(tA,_h.prototype);tA.isPureReactComponent=!0;var Fw=Array.isArray,Jt={H:null,A:null,T:null,S:null,V:null},zx=Object.prototype.hasOwnProperty;function eA(n,t,e,i,s,a){return e=a.ref,{$$typeof:Q1,type:n,key:t,ref:e!==void 0?e:null,props:a}}function XN(n,t){return eA(n.type,t,void 0,void 0,void 0,n.props)}function nA(n){return typeof n=="object"&&n!==null&&n.$$typeof===Q1}function YN(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Uw=/\/+/g;function Sy(n,t){return typeof n=="object"&&n!==null&&n.key!=null?YN(""+n.key):t.toString(36)}function jw(){}function KN(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(jw,jw):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function pc(n,t,e,i,s){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var r=!1;if(n===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(n.$$typeof){case Q1:case HN:r=!0;break;case Nx:return r=n._init,pc(r(n._payload),t,e,i,s)}}if(r)return s=s(n),r=i===""?"."+Sy(n,0):i,Fw(s)?(e="",r!=null&&(e=r.replace(Uw,"$&/")+"/"),pc(s,t,e,"",function(u){return u})):s!=null&&(nA(s)&&(s=XN(s,e+(s.key==null||n&&n.key===s.key?"":(""+s.key).replace(Uw,"$&/")+"/")+r)),t.push(s)),1;r=0;var o=i===""?".":i+":";if(Fw(n))for(var l=0;l<n.length;l++)i=n[l],a=o+Sy(i,l),r+=pc(i,t,e,a,s);else if(l=qN(n),typeof l=="function")for(n=l.call(n),l=0;!(i=n.next()).done;)i=i.value,a=o+Sy(i,l++),r+=pc(i,t,e,a,s);else if(a==="object"){if(typeof n.then=="function")return pc(KN(n),t,e,i,s);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function np(n,t,e){if(n==null)return n;var i=[],s=0;return pc(n,i,"","",function(a){return t.call(e,a,s++)}),i}function WN(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var Gw=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function ZN(){}gt.Children={map:np,forEach:function(n,t,e){np(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return np(n,function(){t++}),t},toArray:function(n){return np(n,function(t){return t})||[]},only:function(n){if(!nA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};gt.Component=_h;gt.Fragment=IN;gt.Profiler=FN;gt.PureComponent=J1;gt.StrictMode=BN;gt.Suspense=VN;gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Jt;gt.__COMPILER_RUNTIME={__proto__:null,c:function(n){return Jt.H.useMemoCache(n)}};gt.cache=function(n){return function(){return n.apply(null,arguments)}};gt.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=Lx({},n.props),s=n.key,a=void 0;if(t!=null)for(r in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(s=""+t.key),t)!zx.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(i[r]=t[r]);var r=arguments.length-2;if(r===1)i.children=e;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];i.children=o}return eA(n.type,s,void 0,void 0,a,i)};gt.createContext=function(n){return n={$$typeof:jN,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:UN,_context:n},n};gt.createElement=function(n,t,e){var i,s={},a=null;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)zx.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var r=arguments.length-2;if(r===1)s.children=e;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}if(n&&n.defaultProps)for(i in r=n.defaultProps,r)s[i]===void 0&&(s[i]=r[i]);return eA(n,a,void 0,void 0,null,s)};gt.createRef=function(){return{current:null}};gt.forwardRef=function(n){return{$$typeof:GN,render:n}};gt.isValidElement=nA;gt.lazy=function(n){return{$$typeof:Nx,_payload:{_status:-1,_result:n},_init:WN}};gt.memo=function(n,t){return{$$typeof:$N,type:n,compare:t===void 0?null:t}};gt.startTransition=function(n){var t=Jt.T,e={};Jt.T=e;try{var i=n(),s=Jt.S;s!==null&&s(e,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(ZN,Gw)}catch(a){Gw(a)}finally{Jt.T=t}};gt.unstable_useCacheRefresh=function(){return Jt.H.useCacheRefresh()};gt.use=function(n){return Jt.H.use(n)};gt.useActionState=function(n,t,e){return Jt.H.useActionState(n,t,e)};gt.useCallback=function(n,t){return Jt.H.useCallback(n,t)};gt.useContext=function(n){return Jt.H.useContext(n)};gt.useDebugValue=function(){};gt.useDeferredValue=function(n,t){return Jt.H.useDeferredValue(n,t)};gt.useEffect=function(n,t,e){var i=Jt.H;if(typeof e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(n,t)};gt.useId=function(){return Jt.H.useId()};gt.useImperativeHandle=function(n,t,e){return Jt.H.useImperativeHandle(n,t,e)};gt.useInsertionEffect=function(n,t){return Jt.H.useInsertionEffect(n,t)};gt.useLayoutEffect=function(n,t){return Jt.H.useLayoutEffect(n,t)};gt.useMemo=function(n,t){return Jt.H.useMemo(n,t)};gt.useOptimistic=function(n,t){return Jt.H.useOptimistic(n,t)};gt.useReducer=function(n,t,e){return Jt.H.useReducer(n,t,e)};gt.useRef=function(n){return Jt.H.useRef(n)};gt.useState=function(n){return Jt.H.useState(n)};gt.useSyncExternalStore=function(n,t,e){return Jt.H.useSyncExternalStore(n,t,e)};gt.useTransition=function(){return Jt.H.useTransition()};gt.version="19.1.0";Rx.exports=gt;var D=Rx.exports;const j=Z1(D);var Px={exports:{}},j0={},Hx={exports:{}},Ix={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(E,N){var z=E.length;E.push(N);t:for(;0<z;){var O=z-1>>>1,I=E[O];if(0<s(I,N))E[O]=N,E[z]=I,z=O;else break t}}function e(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var N=E[0],z=E.pop();if(z!==N){E[0]=z;t:for(var O=0,I=E.length,V=I>>>1;O<V;){var F=2*(O+1)-1,X=E[F],Y=F+1,tt=E[Y];if(0>s(X,z))Y<I&&0>s(tt,X)?(E[O]=tt,E[Y]=z,O=Y):(E[O]=X,E[F]=z,O=F);else if(Y<I&&0>s(tt,z))E[O]=tt,E[Y]=z,O=Y;else break t}}return N}function s(E,N){var z=E.sortIndex-N.sortIndex;return z!==0?z:E.id-N.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var r=Date,o=r.now();n.unstable_now=function(){return r.now()-o}}var l=[],u=[],h=1,d=null,f=3,g=!1,b=!1,m=!1,S=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function w(E){for(var N=e(u);N!==null;){if(N.callback===null)i(u);else if(N.startTime<=E)i(u),N.sortIndex=N.expirationTime,t(l,N);else break;N=e(u)}}function T(E){if(m=!1,w(E),!b)if(e(l)!==null)b=!0,C||(C=!0,$());else{var N=e(u);N!==null&&B(T,N.startTime-E)}}var C=!1,M=-1,L=5,k=-1;function P(){return S?!0:!(n.unstable_now()-k<L)}function H(){if(S=!1,C){var E=n.unstable_now();k=E;var N=!0;try{t:{b=!1,m&&(m=!1,y(M),M=-1),g=!0;var z=f;try{e:{for(w(E),d=e(l);d!==null&&!(d.expirationTime>E&&P());){var O=d.callback;if(typeof O=="function"){d.callback=null,f=d.priorityLevel;var I=O(d.expirationTime<=E);if(E=n.unstable_now(),typeof I=="function"){d.callback=I,w(E),N=!0;break e}d===e(l)&&i(l),w(E)}else i(l);d=e(l)}if(d!==null)N=!0;else{var V=e(u);V!==null&&B(T,V.startTime-E),N=!1}}break t}finally{d=null,f=z,g=!1}N=void 0}}finally{N?$():C=!1}}}var $;if(typeof A=="function")$=function(){A(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,R=G.port2;G.port1.onmessage=H,$=function(){R.postMessage(null)}}else $=function(){p(H,0)};function B(E,N){M=p(function(){E(n.unstable_now())},N)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(E){E.callback=null},n.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<E?Math.floor(1e3/E):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_next=function(E){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var z=f;f=N;try{return E()}finally{f=z}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(E,N){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var z=f;f=E;try{return N()}finally{f=z}},n.unstable_scheduleCallback=function(E,N,z){var O=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?O+z:O):z=O,E){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=z+I,E={id:h++,callback:N,priorityLevel:E,startTime:z,expirationTime:I,sortIndex:-1},z>O?(E.sortIndex=z,t(u,E),e(l)===null&&E===e(u)&&(m?(y(M),M=-1):m=!0,B(T,z-O))):(E.sortIndex=I,t(l,E),b||g||(b=!0,C||(C=!0,$()))),E},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(E){var N=f;return function(){var z=f;f=N;try{return E.apply(this,arguments)}finally{f=z}}}})(Ix);Hx.exports=Ix;var QN=Hx.exports,Bx={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN=D;function Fx(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ja(){}var An={d:{f:ja,r:function(){throw Error(Fx(522))},D:ja,C:ja,L:ja,m:ja,X:ja,S:ja,M:ja},p:0,findDOMNode:null},tD=Symbol.for("react.portal");function eD(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tD,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}var wd=JN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function G0(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=An;Sn.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Fx(299));return eD(n,t,null,e)};Sn.flushSync=function(n){var t=wd.T,e=An.p;try{if(wd.T=null,An.p=2,n)return n()}finally{wd.T=t,An.p=e,An.d.f()}};Sn.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,An.d.C(n,t))};Sn.prefetchDNS=function(n){typeof n=="string"&&An.d.D(n)};Sn.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,i=G0(e,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?An.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:a}):e==="script"&&An.d.X(n,{crossOrigin:i,integrity:s,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Sn.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=G0(t.as,t.crossOrigin);An.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&An.d.M(n)};Sn.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,i=G0(e,t.crossOrigin);An.d.L(n,e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Sn.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=G0(t.as,t.crossOrigin);An.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else An.d.m(n)};Sn.requestFormReset=function(n){An.d.r(n)};Sn.unstable_batchedUpdates=function(n,t){return n(t)};Sn.useFormState=function(n,t,e){return wd.H.useFormState(n,t,e)};Sn.useFormStatus=function(){return wd.H.useHostTransitionStatus()};Sn.version="19.1.0";function Ux(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ux)}catch(n){console.error(n)}}Ux(),Bx.exports=Sn;var nD=Bx.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re=QN,jx=D,iD=nD;function q(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ng(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function Vx(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function Vw(n){if(Ng(n)!==n)throw Error(q(188))}function sD(n){var t=n.alternate;if(!t){if(t=Ng(n),t===null)throw Error(q(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===e)return Vw(s),n;if(a===i)return Vw(s),t;a=a.sibling}throw Error(q(188))}if(e.return!==i.return)e=s,i=a;else{for(var r=!1,o=s.child;o;){if(o===e){r=!0,e=s,i=a;break}if(o===i){r=!0,i=s,e=a;break}o=o.sibling}if(!r){for(o=a.child;o;){if(o===e){r=!0,e=a,i=s;break}if(o===i){r=!0,i=a,e=s;break}o=o.sibling}if(!r)throw Error(q(189))}}if(e.alternate!==i)throw Error(q(190))}if(e.tag!==3)throw Error(q(188));return e.stateNode.current===e?n:t}function $x(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=$x(n),t!==null)return t;n=n.sibling}return null}var $t=Object.assign,aD=Symbol.for("react.element"),ip=Symbol.for("react.transitional.element"),Zh=Symbol.for("react.portal"),Cc=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),Sb=Symbol.for("react.profiler"),rD=Symbol.for("react.provider"),Xx=Symbol.for("react.consumer"),_a=Symbol.for("react.context"),iA=Symbol.for("react.forward_ref"),_b=Symbol.for("react.suspense"),xb=Symbol.for("react.suspense_list"),sA=Symbol.for("react.memo"),Xa=Symbol.for("react.lazy"),Eb=Symbol.for("react.activity"),oD=Symbol.for("react.memo_cache_sentinel"),$w=Symbol.iterator;function Oh(n){return n===null||typeof n!="object"?null:(n=$w&&n[$w]||n["@@iterator"],typeof n=="function"?n:null)}var lD=Symbol.for("react.client.reference");function Tb(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===lD?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cc:return"Fragment";case Sb:return"Profiler";case qx:return"StrictMode";case _b:return"Suspense";case xb:return"SuspenseList";case Eb:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Zh:return"Portal";case _a:return(n.displayName||"Context")+".Provider";case Xx:return(n._context.displayName||"Context")+".Consumer";case iA:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sA:return t=n.displayName||null,t!==null?t:Tb(n.type)||"Memo";case Xa:t=n._payload,n=n._init;try{return Tb(n(t))}catch{}}return null}var Qh=Array.isArray,lt=jx.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mt=iD.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zl={pending:!1,data:null,method:null,action:null},Cb=[],Mc=-1;function ks(n){return{current:n}}function Fe(n){0>Mc||(n.current=Cb[Mc],Cb[Mc]=null,Mc--)}function te(n,t){Mc++,Cb[Mc]=n.current,n.current=t}var Ms=ks(null),Hd=ks(null),Gr=ks(null),Cm=ks(null);function Mm(n,t){switch(te(Gr,t),te(Hd,n),te(Ms,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?WS(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=WS(t),n=uT(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Fe(Ms),te(Ms,n)}function lh(){Fe(Ms),Fe(Hd),Fe(Gr)}function Mb(n){n.memoizedState!==null&&te(Cm,n);var t=Ms.current,e=uT(t,n.type);t!==e&&(te(Hd,n),te(Ms,e))}function Rm(n){Hd.current===n&&(Fe(Ms),Fe(Hd)),Cm.current===n&&(Fe(Cm),Xd._currentValue=zl)}var Rb=Object.prototype.hasOwnProperty,aA=Re.unstable_scheduleCallback,_y=Re.unstable_cancelCallback,cD=Re.unstable_shouldYield,uD=Re.unstable_requestPaint,Rs=Re.unstable_now,hD=Re.unstable_getCurrentPriorityLevel,Yx=Re.unstable_ImmediatePriority,Kx=Re.unstable_UserBlockingPriority,Nm=Re.unstable_NormalPriority,dD=Re.unstable_LowPriority,Wx=Re.unstable_IdlePriority,fD=Re.log,gD=Re.unstable_setDisableYieldValue,Dg=null,ai=null;function Br(n){if(typeof fD=="function"&&gD(n),ai&&typeof ai.setStrictMode=="function")try{ai.setStrictMode(Dg,n)}catch{}}var ri=Math.clz32?Math.clz32:yD,pD=Math.log,mD=Math.LN2;function yD(n){return n>>>=0,n===0?32:31-(pD(n)/mD|0)|0}var sp=256,ap=4194304;function bo(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function V0(n,t,e){var i=n.pendingLanes;if(i===0)return 0;var s=0,a=n.suspendedLanes,r=n.pingedLanes;n=n.warmLanes;var o=i&134217727;return o!==0?(i=o&~a,i!==0?s=bo(i):(r&=o,r!==0?s=bo(r):e||(e=o&~n,e!==0&&(s=bo(e))))):(o=i&~a,o!==0?s=bo(o):r!==0?s=bo(r):e||(e=i&~n,e!==0&&(s=bo(e)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,e=t&-t,a>=e||a===32&&(e&4194048)!==0)?t:s}function Lg(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function bD(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zx(){var n=sp;return sp<<=1,!(sp&4194048)&&(sp=256),n}function Qx(){var n=ap;return ap<<=1,!(ap&62914560)&&(ap=4194304),n}function xy(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function kg(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function vD(n,t,e,i,s,a){var r=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var o=n.entanglements,l=n.expirationTimes,u=n.hiddenUpdates;for(e=r&~e;0<e;){var h=31-ri(e),d=1<<h;o[h]=0,l[h]=-1;var f=u[h];if(f!==null)for(u[h]=null,h=0;h<f.length;h++){var g=f[h];g!==null&&(g.lane&=-536870913)}e&=~d}i!==0&&Jx(n,i,0),a!==0&&s===0&&n.tag!==0&&(n.suspendedLanes|=a&~(r&~t))}function Jx(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var i=31-ri(t);n.entangledLanes|=t,n.entanglements[i]=n.entanglements[i]|1073741824|e&4194090}function tE(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-ri(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}function rA(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function oA(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function eE(){var n=Mt.p;return n!==0?n:(n=window.event,n===void 0?32:AT(n.type))}function AD(n,t){var e=Mt.p;try{return Mt.p=n,t()}finally{Mt.p=e}}var oo=Math.random().toString(36).slice(2),ln="__reactFiber$"+oo,Pn="__reactProps$"+oo,xh="__reactContainer$"+oo,Nb="__reactEvents$"+oo,wD="__reactListeners$"+oo,SD="__reactHandles$"+oo,qw="__reactResources$"+oo,Og="__reactMarker$"+oo;function lA(n){delete n[ln],delete n[Pn],delete n[Nb],delete n[wD],delete n[SD]}function Rc(n){var t=n[ln];if(t)return t;for(var e=n.parentNode;e;){if(t=e[xh]||e[ln]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=JS(n);n!==null;){if(e=n[ln])return e;n=JS(n)}return t}n=e,e=n.parentNode}return null}function Eh(n){if(n=n[ln]||n[xh]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function Jh(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(q(33))}function jc(n){var t=n[qw];return t||(t=n[qw]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ie(n){n[Og]=!0}var nE=new Set,iE={};function Ql(n,t){ch(n,t),ch(n+"Capture",t)}function ch(n,t){for(iE[n]=t,n=0;n<t.length;n++)nE.add(t[n])}var _D=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xw={},Yw={};function xD(n){return Rb.call(Yw,n)?!0:Rb.call(Xw,n)?!1:_D.test(n)?Yw[n]=!0:(Xw[n]=!0,!1)}function kp(n,t,e){if(xD(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function rp(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function Is(n,t,e,i){if(i===null)n.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+i)}}var Ey,Kw;function mc(n){if(Ey===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ey=t&&t[1]||"",Kw=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ey+n+Kw}var Ty=!1;function Cy(n,t){if(!n||Ty)return"";Ty=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(g){var f=g}Reflect.construct(n,[],d)}else{try{d.call()}catch(g){f=g}n.call(d.prototype)}}else{try{throw Error()}catch(g){f=g}(d=n())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),r=a[0],o=a[1];if(r&&o){var l=r.split(`
`),u=o.split(`
`);for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===u.length)for(i=l.length-1,s=u.length-1;1<=i&&0<=s&&l[i]!==u[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==u[s]){if(i!==1||s!==1)do if(i--,s--,0>s||l[i]!==u[s]){var h=`
`+l[i].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=i&&0<=s);break}}}finally{Ty=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?mc(e):""}function ED(n){switch(n.tag){case 26:case 27:case 5:return mc(n.type);case 16:return mc("Lazy");case 13:return mc("Suspense");case 19:return mc("SuspenseList");case 0:case 15:return Cy(n.type,!1);case 11:return Cy(n.type.render,!1);case 1:return Cy(n.type,!0);case 31:return mc("Activity");default:return""}}function Ww(n){try{var t="";do t+=ED(n),n=n.return;while(n);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function Si(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sE(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TD(n){var t=sE(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,a=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,a.call(this,r)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Dm(n){n._valueTracker||(n._valueTracker=TD(n))}function aE(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=sE(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function Lm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var CD=/[\n"\\]/g;function Ei(n){return n.replace(CD,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Db(n,t,e,i,s,a,r,o){n.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?n.type=r:n.removeAttribute("type"),t!=null?r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+Si(t)):n.value!==""+Si(t)&&(n.value=""+Si(t)):r!=="submit"&&r!=="reset"||n.removeAttribute("value"),t!=null?Lb(n,r,Si(t)):e!=null?Lb(n,r,Si(e)):i!=null&&n.removeAttribute("value"),s==null&&a!=null&&(n.defaultChecked=!!a),s!=null&&(n.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+Si(o):n.removeAttribute("name")}function rE(n,t,e,i,s,a,r,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.type=a),t!=null||e!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;e=e!=null?""+Si(e):"",t=t!=null?""+Si(t):e,o||t===n.value||(n.value=t),n.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=o?n.checked:!!i,n.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(n.name=r)}function Lb(n,t,e){t==="number"&&Lm(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function Gc(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Si(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function oE(n,t,e){if(t!=null&&(t=""+Si(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+Si(e):""}function lE(n,t,e,i){if(t==null){if(i!=null){if(e!=null)throw Error(q(92));if(Qh(i)){if(1<i.length)throw Error(q(93));i=i[0]}e=i}e==null&&(e=""),t=e}e=Si(t),n.defaultValue=e,i=n.textContent,i===e&&i!==""&&i!==null&&(n.value=i)}function uh(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var MD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zw(n,t,e){var i=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?i?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":i?n.setProperty(t,e):typeof e!="number"||e===0||MD.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function cE(n,t,e){if(t!=null&&typeof t!="object")throw Error(q(62));if(n=n.style,e!=null){for(var i in e)!e.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&e[s]!==i&&Zw(n,s,i)}else for(var a in t)t.hasOwnProperty(a)&&Zw(n,a,t[a])}function cA(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ND=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Op(n){return ND.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var kb=null;function uA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nc=null,Vc=null;function Qw(n){var t=Eh(n);if(t&&(n=t.stateNode)){var e=n[Pn]||null;t:switch(n=t.stateNode,t.type){case"input":if(Db(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+Ei(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=i[Pn]||null;if(!s)throw Error(q(90));Db(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<e.length;t++)i=e[t],i.form===n.form&&aE(i)}break t;case"textarea":oE(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&Gc(n,!!e.multiple,t,!1)}}}var My=!1;function uE(n,t,e){if(My)return n(t,e);My=!0;try{var i=n(t);return i}finally{if(My=!1,(Nc!==null||Vc!==null)&&(ty(),Nc&&(t=Nc,n=Vc,Vc=Nc=null,Qw(t),n)))for(t=0;t<n.length;t++)Qw(n[t])}}function Id(n,t){var e=n.stateNode;if(e===null)return null;var i=e[Pn]||null;if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(q(231,t,typeof e));return e}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ob=!1;if(ka)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){Ob=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{Ob=!1}var Fr=null,hA=null,zp=null;function hE(){if(zp)return zp;var n,t=hA,e=t.length,i,s="value"in Fr?Fr.value:Fr.textContent,a=s.length;for(n=0;n<e&&t[n]===s[n];n++);var r=e-n;for(i=1;i<=r&&t[e-i]===s[a-i];i++);return zp=s.slice(n,1<i?1-i:void 0)}function Pp(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function op(){return!0}function Jw(){return!1}function Hn(n){function t(e,i,s,a,r){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?op:Jw,this.isPropagationStopped=Jw,this}return $t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=op)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=op)},persist:function(){},isPersistent:op}),t}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$0=Hn(Jl),zg=$t({},Jl,{view:0,detail:0}),DD=Hn(zg),Ry,Ny,Ph,q0=$t({},zg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ph&&(Ph&&n.type==="mousemove"?(Ry=n.screenX-Ph.screenX,Ny=n.screenY-Ph.screenY):Ny=Ry=0,Ph=n),Ry)},movementY:function(n){return"movementY"in n?n.movementY:Ny}}),tS=Hn(q0),LD=$t({},q0,{dataTransfer:0}),kD=Hn(LD),OD=$t({},zg,{relatedTarget:0}),Dy=Hn(OD),zD=$t({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),PD=Hn(zD),HD=$t({},Jl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ID=Hn(HD),BD=$t({},Jl,{data:0}),eS=Hn(BD),FD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GD(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=jD[n])?!!t[n]:!1}function dA(){return GD}var VD=$t({},zg,{key:function(n){if(n.key){var t=FD[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Pp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?UD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dA,charCode:function(n){return n.type==="keypress"?Pp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$D=Hn(VD),qD=$t({},q0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nS=Hn(qD),XD=$t({},zg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dA}),YD=Hn(XD),KD=$t({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),WD=Hn(KD),ZD=$t({},q0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),QD=Hn(ZD),JD=$t({},Jl,{newState:0,oldState:0}),t3=Hn(JD),e3=[9,13,27,32],fA=ka&&"CompositionEvent"in window,Sd=null;ka&&"documentMode"in document&&(Sd=document.documentMode);var n3=ka&&"TextEvent"in window&&!Sd,dE=ka&&(!fA||Sd&&8<Sd&&11>=Sd),iS=" ",sS=!1;function fE(n,t){switch(n){case"keyup":return e3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dc=!1;function i3(n,t){switch(n){case"compositionend":return gE(t);case"keypress":return t.which!==32?null:(sS=!0,iS);case"textInput":return n=t.data,n===iS&&sS?null:n;default:return null}}function s3(n,t){if(Dc)return n==="compositionend"||!fA&&fE(n,t)?(n=hE(),zp=hA=Fr=null,Dc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dE&&t.locale!=="ko"?null:t.data;default:return null}}var a3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aS(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!a3[n.type]:t==="textarea"}function pE(n,t,e,i){Nc?Vc?Vc.push(i):Vc=[i]:Nc=i,t=Wm(t,"onChange"),0<t.length&&(e=new $0("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var _d=null,Bd=null;function r3(n){oT(n,0)}function X0(n){var t=Jh(n);if(aE(t))return n}function rS(n,t){if(n==="change")return t}var mE=!1;if(ka){var Ly;if(ka){var ky="oninput"in document;if(!ky){var oS=document.createElement("div");oS.setAttribute("oninput","return;"),ky=typeof oS.oninput=="function"}Ly=ky}else Ly=!1;mE=Ly&&(!document.documentMode||9<document.documentMode)}function lS(){_d&&(_d.detachEvent("onpropertychange",yE),Bd=_d=null)}function yE(n){if(n.propertyName==="value"&&X0(Bd)){var t=[];pE(t,Bd,n,uA(n)),uE(r3,t)}}function o3(n,t,e){n==="focusin"?(lS(),_d=t,Bd=e,_d.attachEvent("onpropertychange",yE)):n==="focusout"&&lS()}function l3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return X0(Bd)}function c3(n,t){if(n==="click")return X0(t)}function u3(n,t){if(n==="input"||n==="change")return X0(t)}function h3(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var ui=typeof Object.is=="function"?Object.is:h3;function Fd(n,t){if(ui(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!Rb.call(t,s)||!ui(n[s],t[s]))return!1}return!0}function cS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function uS(n,t){var e=cS(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=cS(e)}}function bE(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?bE(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function vE(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=Lm(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=Lm(n.document)}return t}function gA(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var d3=ka&&"documentMode"in document&&11>=document.documentMode,Lc=null,zb=null,xd=null,Pb=!1;function hS(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Pb||Lc==null||Lc!==Lm(i)||(i=Lc,"selectionStart"in i&&gA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xd&&Fd(xd,i)||(xd=i,i=Wm(zb,"onSelect"),0<i.length&&(t=new $0("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Lc)))}function yo(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var kc={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionrun:yo("Transition","TransitionRun"),transitionstart:yo("Transition","TransitionStart"),transitioncancel:yo("Transition","TransitionCancel"),transitionend:yo("Transition","TransitionEnd")},Oy={},AE={};ka&&(AE=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function tc(n){if(Oy[n])return Oy[n];if(!kc[n])return n;var t=kc[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in AE)return Oy[n]=t[e];return n}var wE=tc("animationend"),SE=tc("animationiteration"),_E=tc("animationstart"),f3=tc("transitionrun"),g3=tc("transitionstart"),p3=tc("transitioncancel"),xE=tc("transitionend"),EE=new Map,Hb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hb.push("scrollEnd");function es(n,t){EE.set(n,t),Ql(t,[n])}var dS=new WeakMap;function Ti(n,t){if(typeof n=="object"&&n!==null){var e=dS.get(n);return e!==void 0?e:(t={value:n,source:t,stack:Ww(t)},dS.set(n,t),t)}return{value:n,source:t,stack:Ww(t)}}var wi=[],Oc=0,pA=0;function Y0(){for(var n=Oc,t=pA=Oc=0;t<n;){var e=wi[t];wi[t++]=null;var i=wi[t];wi[t++]=null;var s=wi[t];wi[t++]=null;var a=wi[t];if(wi[t++]=null,i!==null&&s!==null){var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}a!==0&&TE(e,s,a)}}function K0(n,t,e,i){wi[Oc++]=n,wi[Oc++]=t,wi[Oc++]=e,wi[Oc++]=i,pA|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function mA(n,t,e,i){return K0(n,t,e,i),km(n)}function Th(n,t){return K0(n,null,null,t),km(n)}function TE(n,t,e){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e);for(var s=!1,a=n.return;a!==null;)a.childLanes|=e,i=a.alternate,i!==null&&(i.childLanes|=e),a.tag===22&&(n=a.stateNode,n===null||n._visibility&1||(s=!0)),n=a,a=a.return;return n.tag===3?(a=n.stateNode,s&&t!==null&&(s=31-ri(e),n=a.hiddenUpdates,i=n[s],i===null?n[s]=[t]:i.push(t),t.lane=e|536870912),a):null}function km(n){if(50<Od)throw Od=0,sv=null,Error(q(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var zc={};function m3(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(n,t,e,i){return new m3(n,t,e,i)}function yA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ra(n,t){var e=n.alternate;return e===null?(e=si(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function CE(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function Hp(n,t,e,i,s,a){var r=0;if(i=n,typeof n=="function")yA(n)&&(r=1);else if(typeof n=="string")r=bL(n,e,Ms.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case Eb:return n=si(31,e,t,s),n.elementType=Eb,n.lanes=a,n;case Cc:return Pl(e.children,s,a,t);case qx:r=8,s|=24;break;case Sb:return n=si(12,e,t,s|2),n.elementType=Sb,n.lanes=a,n;case _b:return n=si(13,e,t,s),n.elementType=_b,n.lanes=a,n;case xb:return n=si(19,e,t,s),n.elementType=xb,n.lanes=a,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case rD:case _a:r=10;break t;case Xx:r=9;break t;case iA:r=11;break t;case sA:r=14;break t;case Xa:r=16,i=null;break t}r=29,e=Error(q(130,n===null?"null":typeof n,"")),i=null}return t=si(r,e,t,s),t.elementType=n,t.type=i,t.lanes=a,t}function Pl(n,t,e,i){return n=si(7,n,i,t),n.lanes=e,n}function zy(n,t,e){return n=si(6,n,null,t),n.lanes=e,n}function Py(n,t,e){return t=si(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var Pc=[],Hc=0,Om=null,zm=0,_i=[],xi=0,Hl=null,xa=1,Ea="";function vo(n,t){Pc[Hc++]=zm,Pc[Hc++]=Om,Om=n,zm=t}function ME(n,t,e){_i[xi++]=xa,_i[xi++]=Ea,_i[xi++]=Hl,Hl=n;var i=xa;n=Ea;var s=32-ri(i)-1;i&=~(1<<s),e+=1;var a=32-ri(t)+s;if(30<a){var r=s-s%5;a=(i&(1<<r)-1).toString(32),i>>=r,s-=r,xa=1<<32-ri(t)+s|e<<s|i,Ea=a+n}else xa=1<<a|e<<s|i,Ea=n}function bA(n){n.return!==null&&(vo(n,1),ME(n,1,0))}function vA(n){for(;n===Om;)Om=Pc[--Hc],Pc[Hc]=null,zm=Pc[--Hc],Pc[Hc]=null;for(;n===Hl;)Hl=_i[--xi],_i[xi]=null,Ea=_i[--xi],_i[xi]=null,xa=_i[--xi],_i[xi]=null}var vn=null,ae=null,Ct=!1,Il=null,Ts=!1,Ib=Error(q(519));function Gl(n){var t=Error(q(418,""));throw Ud(Ti(t,n)),Ib}function fS(n){var t=n.stateNode,e=n.type,i=n.memoizedProps;switch(t[ln]=n,t[Pn]=i,e){case"dialog":bt("cancel",t),bt("close",t);break;case"iframe":case"object":case"embed":bt("load",t);break;case"video":case"audio":for(e=0;e<Vd.length;e++)bt(Vd[e],t);break;case"source":bt("error",t);break;case"img":case"image":case"link":bt("error",t),bt("load",t);break;case"details":bt("toggle",t);break;case"input":bt("invalid",t),rE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Dm(t);break;case"select":bt("invalid",t);break;case"textarea":bt("invalid",t),lE(t,i.value,i.defaultValue,i.children),Dm(t)}e=i.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||i.suppressHydrationWarning===!0||cT(t.textContent,e)?(i.popover!=null&&(bt("beforetoggle",t),bt("toggle",t)),i.onScroll!=null&&bt("scroll",t),i.onScrollEnd!=null&&bt("scrollend",t),i.onClick!=null&&(t.onclick=iy),t=!0):t=!1,t||Gl(n)}function gS(n){for(vn=n.return;vn;)switch(vn.tag){case 5:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:vn=vn.return}}function Hh(n){if(n!==vn)return!1;if(!Ct)return gS(n),Ct=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||uv(n.type,n.memoizedProps)),e=!e),e&&ae&&Gl(n),gS(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(q(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e==="/$"){if(t===0){ae=Zi(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;n=n.nextSibling}ae=null}}else t===27?(t=ae,lo(n.type)?(n=fv,fv=null,ae=n):ae=t):ae=vn?Zi(n.stateNode.nextSibling):null;return!0}function Pg(){ae=vn=null,Ct=!1}function pS(){var n=Il;return n!==null&&(kn===null?kn=n:kn.push.apply(kn,n),Il=null),n}function Ud(n){Il===null?Il=[n]:Il.push(n)}var Bb=ks(null),ec=null,Ta=null;function Za(n,t,e){te(Bb,t._currentValue),t._currentValue=e}function Na(n){n._currentValue=Bb.current,Fe(Bb)}function Fb(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function Ub(n,t,e,i){var s=n.child;for(s!==null&&(s.return=n);s!==null;){var a=s.dependencies;if(a!==null){var r=s.child;a=a.firstContext;t:for(;a!==null;){var o=a;a=s;for(var l=0;l<t.length;l++)if(o.context===t[l]){a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),Fb(a.return,e,n),i||(r=null);break t}a=o.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(q(341));r.lanes|=e,a=r.alternate,a!==null&&(a.lanes|=e),Fb(r,e,n),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===n){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function Hg(n,t,e,i){n=null;for(var s=t,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(q(387));if(r=r.memoizedProps,r!==null){var o=s.type;ui(s.pendingProps.value,r.value)||(n!==null?n.push(o):n=[o])}}else if(s===Cm.current){if(r=s.alternate,r===null)throw Error(q(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(n!==null?n.push(Xd):n=[Xd])}s=s.return}n!==null&&Ub(t,n,e,i),t.flags|=262144}function Pm(n){for(n=n.firstContext;n!==null;){if(!ui(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Vl(n){ec=n,Ta=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function cn(n){return RE(ec,n)}function lp(n,t){return ec===null&&Vl(n),RE(n,t)}function RE(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},Ta===null){if(n===null)throw Error(q(308));Ta=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else Ta=Ta.next=t;return e}var y3=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,i){n.push(i)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},b3=Re.unstable_scheduleCallback,v3=Re.unstable_NormalPriority,Te={$$typeof:_a,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function AA(){return{controller:new y3,data:new Map,refCount:0}}function Ig(n){n.refCount--,n.refCount===0&&b3(v3,function(){n.controller.abort()})}var Ed=null,jb=0,hh=0,$c=null;function A3(n,t){if(Ed===null){var e=Ed=[];jb=0,hh=GA(),$c={status:"pending",value:void 0,then:function(i){e.push(i)}}}return jb++,t.then(mS,mS),t}function mS(){if(--jb===0&&Ed!==null){$c!==null&&($c.status="fulfilled");var n=Ed;Ed=null,hh=0,$c=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function w3(n,t){var e=[],i={status:"pending",value:null,reason:null,then:function(s){e.push(s)}};return n.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<e.length;s++)(0,e[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<e.length;s++)(0,e[s])(void 0)}),i}var yS=lt.S;lt.S=function(n,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&A3(n,t),yS!==null&&yS(n,t)};var Bl=ks(null);function wA(){var n=Bl.current;return n!==null?n:jt.pooledCache}function Ip(n,t){t===null?te(Bl,Bl.current):te(Bl,t.pool)}function NE(){var n=wA();return n===null?null:{parent:Te._currentValue,pool:n}}var Bg=Error(q(460)),DE=Error(q(474)),W0=Error(q(542)),Gb={then:function(){}};function bS(n){return n=n.status,n==="fulfilled"||n==="rejected"}function cp(){}function LE(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(cp,cp),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,AS(n),n;default:if(typeof t.status=="string")t.then(cp,cp);else{if(n=jt,n!==null&&100<n.shellSuspendCounter)throw Error(q(482));n=t,n.status="pending",n.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,AS(n),n}throw Td=t,Bg}}var Td=null;function vS(){if(Td===null)throw Error(q(459));var n=Td;return Td=null,n}function AS(n){if(n===Bg||n===W0)throw Error(q(483))}var Ya=!1;function SA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vb(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Vr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $r(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ot&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=km(n),TE(n,null,e),t}return K0(n,i,t,e),km(n)}function Cd(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,tE(n,e)}}function Hy(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var r={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};a===null?s=a=r:a=a.next=r,e=e.next}while(e!==null);a===null?s=a=t:a=a.next=t}else s=a=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var $b=!1;function Md(){if($b){var n=$c;if(n!==null)throw n}}function Rd(n,t,e,i){$b=!1;var s=n.updateQueue;Ya=!1;var a=s.firstBaseUpdate,r=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,r===null?a=u:r.next=u,r=l;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==r&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(a!==null){var d=s.baseState;r=0,h=u=l=null,o=a;do{var f=o.lane&-536870913,g=f!==o.lane;if(g?(St&f)===f:(i&f)===f){f!==0&&f===hh&&($b=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var b=n,m=o;f=t;var S=e;switch(m.tag){case 1:if(b=m.payload,typeof b=="function"){d=b.call(S,d,f);break t}d=b;break t;case 3:b.flags=b.flags&-65537|128;case 0:if(b=m.payload,f=typeof b=="function"?b.call(S,d,f):b,f==null)break t;d=$t({},d,f);break t;case 2:Ya=!0}}f=o.callback,f!==null&&(n.flags|=64,g&&(n.flags|=8192),g=s.callbacks,g===null?s.callbacks=[f]:g.push(f))}else g={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=g,l=d):h=h.next=g,r|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,a===null&&(s.shared.lanes=0),eo|=r,n.lanes=r,n.memoizedState=d}}function kE(n,t){if(typeof n!="function")throw Error(q(191,n));n.call(t)}function OE(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)kE(e[n],t)}var dh=ks(null),Hm=ks(0);function wS(n,t){n=Pa,te(Hm,n),te(dh,t),Pa=n|t.baseLanes}function qb(){te(Hm,Pa),te(dh,dh.current)}function _A(){Pa=Hm.current,Fe(dh),Fe(Hm)}var Jr=0,pt=null,Pt=null,pe=null,Im=!1,qc=!1,$l=!1,Bm=0,jd=0,Xc=null,S3=0;function le(){throw Error(q(321))}function xA(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!ui(n[e],t[e]))return!1;return!0}function EA(n,t,e,i,s,a){return Jr=a,pt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lt.H=n===null||n.memoizedState===null?h2:d2,$l=!1,a=e(i,s),$l=!1,qc&&(a=PE(t,e,i,s)),zE(n),a}function zE(n){lt.H=Fm;var t=Pt!==null&&Pt.next!==null;if(Jr=0,pe=Pt=pt=null,Im=!1,jd=0,Xc=null,t)throw Error(q(300));n===null||Be||(n=n.dependencies,n!==null&&Pm(n)&&(Be=!0))}function PE(n,t,e,i){pt=n;var s=0;do{if(qc&&(Xc=null),jd=0,qc=!1,25<=s)throw Error(q(301));if(s+=1,pe=Pt=null,n.updateQueue!=null){var a=n.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}lt.H=R3,a=t(e,i)}while(qc);return a}function _3(){var n=lt.H,t=n.useState()[0];return t=typeof t.then=="function"?Fg(t):t,n=n.useState()[0],(Pt!==null?Pt.memoizedState:null)!==n&&(pt.flags|=1024),t}function TA(){var n=Bm!==0;return Bm=0,n}function CA(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function MA(n){if(Im){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}Im=!1}Jr=0,pe=Pt=pt=null,qc=!1,jd=Bm=0,Xc=null}function Dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?pt.memoizedState=pe=n:pe=pe.next=n,pe}function be(){if(Pt===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Pt.next;var t=pe===null?pt.memoizedState:pe.next;if(t!==null)pe=t,Pt=n;else{if(n===null)throw pt.alternate===null?Error(q(467)):Error(q(310));Pt=n,n={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},pe===null?pt.memoizedState=pe=n:pe=pe.next=n}return pe}function RA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fg(n){var t=jd;return jd+=1,Xc===null&&(Xc=[]),n=LE(Xc,n,t),t=pt,(pe===null?t.memoizedState:pe.next)===null&&(t=t.alternate,lt.H=t===null||t.memoizedState===null?h2:d2),n}function Z0(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fg(n);if(n.$$typeof===_a)return cn(n)}throw Error(q(438,String(n)))}function NA(n){var t=null,e=pt.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var i=pt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=RA(),pt.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),i=0;i<n;i++)e[i]=oD;return t.index++,e}function Oa(n,t){return typeof t=="function"?t(n):t}function Bp(n){var t=be();return DA(t,Pt,n)}function DA(n,t,e){var i=n.queue;if(i===null)throw Error(q(311));i.lastRenderedReducer=e;var s=n.baseQueue,a=i.pending;if(a!==null){if(s!==null){var r=s.next;s.next=a.next,a.next=r}t.baseQueue=s=a,i.pending=null}if(a=n.baseState,s===null)n.memoizedState=a;else{t=s.next;var o=r=null,l=null,u=t,h=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(St&d)===d:(Jr&d)===d){var f=u.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===hh&&(h=!0);else if((Jr&f)===f){u=u.next,f===hh&&(h=!0);continue}else d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=d,r=a):l=l.next=d,pt.lanes|=f,eo|=f;d=u.action,$l&&e(a,d),a=u.hasEagerState?u.eagerState:e(a,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=f,r=a):l=l.next=f,pt.lanes|=d,eo|=d;u=u.next}while(u!==null&&u!==t);if(l===null?r=a:l.next=o,!ui(a,n.memoizedState)&&(Be=!0,h&&(e=$c,e!==null)))throw e;n.memoizedState=a,n.baseState=r,n.baseQueue=l,i.lastRenderedState=a}return s===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function Iy(n){var t=be(),e=t.queue;if(e===null)throw Error(q(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,a=t.memoizedState;if(s!==null){e.pending=null;var r=s=s.next;do a=n(a,r.action),r=r.next;while(r!==s);ui(a,t.memoizedState)||(Be=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,i]}function HE(n,t,e){var i=pt,s=be(),a=Ct;if(a){if(e===void 0)throw Error(q(407));e=e()}else e=t();var r=!ui((Pt||s).memoizedState,e);r&&(s.memoizedState=e,Be=!0),s=s.queue;var o=FE.bind(null,i,s,n);if(Ug(2048,8,o,[n]),s.getSnapshot!==t||r||pe!==null&&pe.memoizedState.tag&1){if(i.flags|=2048,fh(9,Q0(),BE.bind(null,i,s,e,t),null),jt===null)throw Error(q(349));a||Jr&124||IE(i,t,e)}return e}function IE(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=pt.updateQueue,t===null?(t=RA(),pt.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function BE(n,t,e,i){t.value=e,t.getSnapshot=i,UE(t)&&jE(n)}function FE(n,t,e){return e(function(){UE(t)&&jE(n)})}function UE(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!ui(n,e)}catch{return!0}}function jE(n){var t=Th(n,2);t!==null&&li(t,n,2)}function Xb(n){var t=Dn();if(typeof n=="function"){var e=n;if(n=e(),$l){Br(!0);try{e()}finally{Br(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:n},t}function GE(n,t,e,i){return n.baseState=e,DA(n,Pt,typeof i=="function"?i:Oa)}function x3(n,t,e,i,s){if(J0(n))throw Error(q(485));if(n=t.action,n!==null){var a={payload:s,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};lt.T!==null?e(!0):a.isTransition=!1,i(a),e=t.pending,e===null?(a.next=t.pending=a,VE(t,a)):(a.next=e.next,t.pending=e.next=a)}}function VE(n,t){var e=t.action,i=t.payload,s=n.state;if(t.isTransition){var a=lt.T,r={};lt.T=r;try{var o=e(s,i),l=lt.S;l!==null&&l(r,o),SS(n,t,o)}catch(u){Yb(n,t,u)}finally{lt.T=a}}else try{a=e(s,i),SS(n,t,a)}catch(u){Yb(n,t,u)}}function SS(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(i){_S(n,t,i)},function(i){return Yb(n,t,i)}):_S(n,t,e)}function _S(n,t,e){t.status="fulfilled",t.value=e,$E(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,VE(n,e)))}function Yb(n,t,e){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=e,$E(t),t=t.next;while(t!==i)}n.action=null}function $E(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function qE(n,t){return t}function xS(n,t){if(Ct){var e=jt.formState;if(e!==null){t:{var i=pt;if(Ct){if(ae){e:{for(var s=ae,a=Ts;s.nodeType!==8;){if(!a){s=null;break e}if(s=Zi(s.nextSibling),s===null){s=null;break e}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){ae=Zi(s.nextSibling),i=s.data==="F!";break t}}Gl(i)}i=!1}i&&(t=e[0])}}return e=Dn(),e.memoizedState=e.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qE,lastRenderedState:t},e.queue=i,e=l2.bind(null,pt,i),i.dispatch=e,i=Xb(!1),a=zA.bind(null,pt,!1,i.queue),i=Dn(),s={state:t,dispatch:null,action:n,pending:null},i.queue=s,e=x3.bind(null,pt,s,a,e),s.dispatch=e,i.memoizedState=n,[t,e,!1]}function ES(n){var t=be();return XE(t,Pt,n)}function XE(n,t,e){if(t=DA(n,t,qE)[0],n=Bp(Oa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Fg(t)}catch(r){throw r===Bg?W0:r}else i=t;t=be();var s=t.queue,a=s.dispatch;return e!==t.memoizedState&&(pt.flags|=2048,fh(9,Q0(),E3.bind(null,s,e),null)),[i,a,n]}function E3(n,t){n.action=t}function TS(n){var t=be(),e=Pt;if(e!==null)return XE(t,e,n);be(),t=t.memoizedState,e=be();var i=e.queue.dispatch;return e.memoizedState=n,[t,i,!1]}function fh(n,t,e,i){return n={tag:n,create:e,deps:i,inst:t,next:null},t=pt.updateQueue,t===null&&(t=RA(),pt.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n),n}function Q0(){return{destroy:void 0,resource:void 0}}function YE(){return be().memoizedState}function Fp(n,t,e,i){var s=Dn();i=i===void 0?null:i,pt.flags|=n,s.memoizedState=fh(1|t,Q0(),e,i)}function Ug(n,t,e,i){var s=be();i=i===void 0?null:i;var a=s.memoizedState.inst;Pt!==null&&i!==null&&xA(i,Pt.memoizedState.deps)?s.memoizedState=fh(t,a,e,i):(pt.flags|=n,s.memoizedState=fh(1|t,a,e,i))}function CS(n,t){Fp(8390656,8,n,t)}function KE(n,t){Ug(2048,8,n,t)}function WE(n,t){return Ug(4,2,n,t)}function ZE(n,t){return Ug(4,4,n,t)}function QE(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function JE(n,t,e){e=e!=null?e.concat([n]):null,Ug(4,4,QE.bind(null,t,n),e)}function LA(){}function t2(n,t){var e=be();t=t===void 0?null:t;var i=e.memoizedState;return t!==null&&xA(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function e2(n,t){var e=be();t=t===void 0?null:t;var i=e.memoizedState;if(t!==null&&xA(t,i[1]))return i[0];if(i=n(),$l){Br(!0);try{n()}finally{Br(!1)}}return e.memoizedState=[i,t],i}function kA(n,t,e){return e===void 0||Jr&1073741824?n.memoizedState=t:(n.memoizedState=e,n=$2(),pt.lanes|=n,eo|=n,e)}function n2(n,t,e,i){return ui(e,t)?e:dh.current!==null?(n=kA(n,e,i),ui(n,t)||(Be=!0),n):Jr&42?(n=$2(),pt.lanes|=n,eo|=n,t):(Be=!0,n.memoizedState=e)}function i2(n,t,e,i,s){var a=Mt.p;Mt.p=a!==0&&8>a?a:8;var r=lt.T,o={};lt.T=o,zA(n,!1,t,e);try{var l=s(),u=lt.S;if(u!==null&&u(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=w3(l,i);Nd(n,t,h,oi(n))}else Nd(n,t,i,oi(n))}catch(d){Nd(n,t,{then:function(){},status:"rejected",reason:d},oi())}finally{Mt.p=a,lt.T=r}}function T3(){}function Kb(n,t,e,i){if(n.tag!==5)throw Error(q(476));var s=s2(n).queue;i2(n,s,t,zl,e===null?T3:function(){return a2(n),e(i)})}function s2(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:zl,baseState:zl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:zl},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function a2(n){var t=s2(n).next.queue;Nd(n,t,{},oi())}function OA(){return cn(Xd)}function r2(){return be().memoizedState}function o2(){return be().memoizedState}function C3(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=oi();n=Vr(e);var i=$r(t,n,e);i!==null&&(li(i,t,e),Cd(i,t,e)),t={cache:AA()},n.payload=t;return}t=t.return}}function M3(n,t,e){var i=oi();e={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},J0(n)?c2(t,e):(e=mA(n,t,e,i),e!==null&&(li(e,n,i),u2(e,t,i)))}function l2(n,t,e){var i=oi();Nd(n,t,e,i)}function Nd(n,t,e,i){var s={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(J0(n))c2(t,s);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var r=t.lastRenderedState,o=a(r,e);if(s.hasEagerState=!0,s.eagerState=o,ui(o,r))return K0(n,t,s,0),jt===null&&Y0(),!1}catch{}finally{}if(e=mA(n,t,s,i),e!==null)return li(e,n,i),u2(e,t,i),!0}return!1}function zA(n,t,e,i){if(i={lane:2,revertLane:GA(),action:i,hasEagerState:!1,eagerState:null,next:null},J0(n)){if(t)throw Error(q(479))}else t=mA(n,e,i,2),t!==null&&li(t,n,2)}function J0(n){var t=n.alternate;return n===pt||t!==null&&t===pt}function c2(n,t){qc=Im=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function u2(n,t,e){if(e&4194048){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,tE(n,e)}}var Fm={readContext:cn,use:Z0,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le},h2={readContext:cn,use:Z0,useCallback:function(n,t){return Dn().memoizedState=[n,t===void 0?null:t],n},useContext:cn,useEffect:CS,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,Fp(4194308,4,QE.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Fp(4194308,4,n,t)},useInsertionEffect:function(n,t){Fp(4,2,n,t)},useMemo:function(n,t){var e=Dn();t=t===void 0?null:t;var i=n();if($l){Br(!0);try{n()}finally{Br(!1)}}return e.memoizedState=[i,t],i},useReducer:function(n,t,e){var i=Dn();if(e!==void 0){var s=e(t);if($l){Br(!0);try{e(t)}finally{Br(!1)}}}else s=t;return i.memoizedState=i.baseState=s,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},i.queue=n,n=n.dispatch=M3.bind(null,pt,n),[i.memoizedState,n]},useRef:function(n){var t=Dn();return n={current:n},t.memoizedState=n},useState:function(n){n=Xb(n);var t=n.queue,e=l2.bind(null,pt,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:LA,useDeferredValue:function(n,t){var e=Dn();return kA(e,n,t)},useTransition:function(){var n=Xb(!1);return n=i2.bind(null,pt,n.queue,!0,!1),Dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var i=pt,s=Dn();if(Ct){if(e===void 0)throw Error(q(407));e=e()}else{if(e=t(),jt===null)throw Error(q(349));St&124||IE(i,t,e)}s.memoizedState=e;var a={value:e,getSnapshot:t};return s.queue=a,CS(FE.bind(null,i,a,n),[n]),i.flags|=2048,fh(9,Q0(),BE.bind(null,i,a,e,t),null),e},useId:function(){var n=Dn(),t=jt.identifierPrefix;if(Ct){var e=Ea,i=xa;e=(i&~(1<<32-ri(i)-1)).toString(32)+e,t=""+t+"R"+e,e=Bm++,0<e&&(t+="H"+e.toString(32)),t+=""}else e=S3++,t=""+t+"r"+e.toString(32)+"";return n.memoizedState=t},useHostTransitionStatus:OA,useFormState:xS,useActionState:xS,useOptimistic:function(n){var t=Dn();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=zA.bind(null,pt,!0,e),e.dispatch=t,[n,t]},useMemoCache:NA,useCacheRefresh:function(){return Dn().memoizedState=C3.bind(null,pt)}},d2={readContext:cn,use:Z0,useCallback:t2,useContext:cn,useEffect:KE,useImperativeHandle:JE,useInsertionEffect:WE,useLayoutEffect:ZE,useMemo:e2,useReducer:Bp,useRef:YE,useState:function(){return Bp(Oa)},useDebugValue:LA,useDeferredValue:function(n,t){var e=be();return n2(e,Pt.memoizedState,n,t)},useTransition:function(){var n=Bp(Oa)[0],t=be().memoizedState;return[typeof n=="boolean"?n:Fg(n),t]},useSyncExternalStore:HE,useId:r2,useHostTransitionStatus:OA,useFormState:ES,useActionState:ES,useOptimistic:function(n,t){var e=be();return GE(e,Pt,n,t)},useMemoCache:NA,useCacheRefresh:o2},R3={readContext:cn,use:Z0,useCallback:t2,useContext:cn,useEffect:KE,useImperativeHandle:JE,useInsertionEffect:WE,useLayoutEffect:ZE,useMemo:e2,useReducer:Iy,useRef:YE,useState:function(){return Iy(Oa)},useDebugValue:LA,useDeferredValue:function(n,t){var e=be();return Pt===null?kA(e,n,t):n2(e,Pt.memoizedState,n,t)},useTransition:function(){var n=Iy(Oa)[0],t=be().memoizedState;return[typeof n=="boolean"?n:Fg(n),t]},useSyncExternalStore:HE,useId:r2,useHostTransitionStatus:OA,useFormState:TS,useActionState:TS,useOptimistic:function(n,t){var e=be();return Pt!==null?GE(e,Pt,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:NA,useCacheRefresh:o2},Yc=null,Gd=0;function up(n){var t=Gd;return Gd+=1,Yc===null&&(Yc=[]),LE(Yc,n,t)}function Ih(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function hp(n,t){throw t.$$typeof===aD?Error(q(525)):(n=Object.prototype.toString.call(t),Error(q(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function MS(n){var t=n._init;return t(n._payload)}function f2(n){function t(p,y){if(n){var A=p.deletions;A===null?(p.deletions=[y],p.flags|=16):A.push(y)}}function e(p,y){if(!n)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function i(p){for(var y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function s(p,y){return p=Ra(p,y),p.index=0,p.sibling=null,p}function a(p,y,A){return p.index=A,n?(A=p.alternate,A!==null?(A=A.index,A<y?(p.flags|=67108866,y):A):(p.flags|=67108866,y)):(p.flags|=1048576,y)}function r(p){return n&&p.alternate===null&&(p.flags|=67108866),p}function o(p,y,A,w){return y===null||y.tag!==6?(y=zy(A,p.mode,w),y.return=p,y):(y=s(y,A),y.return=p,y)}function l(p,y,A,w){var T=A.type;return T===Cc?h(p,y,A.props.children,w,A.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xa&&MS(T)===y.type)?(y=s(y,A.props),Ih(y,A),y.return=p,y):(y=Hp(A.type,A.key,A.props,null,p.mode,w),Ih(y,A),y.return=p,y)}function u(p,y,A,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==A.containerInfo||y.stateNode.implementation!==A.implementation?(y=Py(A,p.mode,w),y.return=p,y):(y=s(y,A.children||[]),y.return=p,y)}function h(p,y,A,w,T){return y===null||y.tag!==7?(y=Pl(A,p.mode,w,T),y.return=p,y):(y=s(y,A),y.return=p,y)}function d(p,y,A){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=zy(""+y,p.mode,A),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ip:return A=Hp(y.type,y.key,y.props,null,p.mode,A),Ih(A,y),A.return=p,A;case Zh:return y=Py(y,p.mode,A),y.return=p,y;case Xa:var w=y._init;return y=w(y._payload),d(p,y,A)}if(Qh(y)||Oh(y))return y=Pl(y,p.mode,A,null),y.return=p,y;if(typeof y.then=="function")return d(p,up(y),A);if(y.$$typeof===_a)return d(p,lp(p,y),A);hp(p,y)}return null}function f(p,y,A,w){var T=y!==null?y.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return T!==null?null:o(p,y,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ip:return A.key===T?l(p,y,A,w):null;case Zh:return A.key===T?u(p,y,A,w):null;case Xa:return T=A._init,A=T(A._payload),f(p,y,A,w)}if(Qh(A)||Oh(A))return T!==null?null:h(p,y,A,w,null);if(typeof A.then=="function")return f(p,y,up(A),w);if(A.$$typeof===_a)return f(p,y,lp(p,A),w);hp(p,A)}return null}function g(p,y,A,w,T){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return p=p.get(A)||null,o(y,p,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ip:return p=p.get(w.key===null?A:w.key)||null,l(y,p,w,T);case Zh:return p=p.get(w.key===null?A:w.key)||null,u(y,p,w,T);case Xa:var C=w._init;return w=C(w._payload),g(p,y,A,w,T)}if(Qh(w)||Oh(w))return p=p.get(A)||null,h(y,p,w,T,null);if(typeof w.then=="function")return g(p,y,A,up(w),T);if(w.$$typeof===_a)return g(p,y,A,lp(y,w),T);hp(y,w)}return null}function b(p,y,A,w){for(var T=null,C=null,M=y,L=y=0,k=null;M!==null&&L<A.length;L++){M.index>L?(k=M,M=null):k=M.sibling;var P=f(p,M,A[L],w);if(P===null){M===null&&(M=k);break}n&&M&&P.alternate===null&&t(p,M),y=a(P,y,L),C===null?T=P:C.sibling=P,C=P,M=k}if(L===A.length)return e(p,M),Ct&&vo(p,L),T;if(M===null){for(;L<A.length;L++)M=d(p,A[L],w),M!==null&&(y=a(M,y,L),C===null?T=M:C.sibling=M,C=M);return Ct&&vo(p,L),T}for(M=i(M);L<A.length;L++)k=g(M,p,L,A[L],w),k!==null&&(n&&k.alternate!==null&&M.delete(k.key===null?L:k.key),y=a(k,y,L),C===null?T=k:C.sibling=k,C=k);return n&&M.forEach(function(H){return t(p,H)}),Ct&&vo(p,L),T}function m(p,y,A,w){if(A==null)throw Error(q(151));for(var T=null,C=null,M=y,L=y=0,k=null,P=A.next();M!==null&&!P.done;L++,P=A.next()){M.index>L?(k=M,M=null):k=M.sibling;var H=f(p,M,P.value,w);if(H===null){M===null&&(M=k);break}n&&M&&H.alternate===null&&t(p,M),y=a(H,y,L),C===null?T=H:C.sibling=H,C=H,M=k}if(P.done)return e(p,M),Ct&&vo(p,L),T;if(M===null){for(;!P.done;L++,P=A.next())P=d(p,P.value,w),P!==null&&(y=a(P,y,L),C===null?T=P:C.sibling=P,C=P);return Ct&&vo(p,L),T}for(M=i(M);!P.done;L++,P=A.next())P=g(M,p,L,P.value,w),P!==null&&(n&&P.alternate!==null&&M.delete(P.key===null?L:P.key),y=a(P,y,L),C===null?T=P:C.sibling=P,C=P);return n&&M.forEach(function($){return t(p,$)}),Ct&&vo(p,L),T}function S(p,y,A,w){if(typeof A=="object"&&A!==null&&A.type===Cc&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ip:t:{for(var T=A.key;y!==null;){if(y.key===T){if(T=A.type,T===Cc){if(y.tag===7){e(p,y.sibling),w=s(y,A.props.children),w.return=p,p=w;break t}}else if(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xa&&MS(T)===y.type){e(p,y.sibling),w=s(y,A.props),Ih(w,A),w.return=p,p=w;break t}e(p,y);break}else t(p,y);y=y.sibling}A.type===Cc?(w=Pl(A.props.children,p.mode,w,A.key),w.return=p,p=w):(w=Hp(A.type,A.key,A.props,null,p.mode,w),Ih(w,A),w.return=p,p=w)}return r(p);case Zh:t:{for(T=A.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===A.containerInfo&&y.stateNode.implementation===A.implementation){e(p,y.sibling),w=s(y,A.children||[]),w.return=p,p=w;break t}else{e(p,y);break}else t(p,y);y=y.sibling}w=Py(A,p.mode,w),w.return=p,p=w}return r(p);case Xa:return T=A._init,A=T(A._payload),S(p,y,A,w)}if(Qh(A))return b(p,y,A,w);if(Oh(A)){if(T=Oh(A),typeof T!="function")throw Error(q(150));return A=T.call(A),m(p,y,A,w)}if(typeof A.then=="function")return S(p,y,up(A),w);if(A.$$typeof===_a)return S(p,y,lp(p,A),w);hp(p,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,y!==null&&y.tag===6?(e(p,y.sibling),w=s(y,A),w.return=p,p=w):(e(p,y),w=zy(A,p.mode,w),w.return=p,p=w),r(p)):e(p,y)}return function(p,y,A,w){try{Gd=0;var T=S(p,y,A,w);return Yc=null,T}catch(M){if(M===Bg||M===W0)throw M;var C=si(29,M,null,p.mode);return C.lanes=w,C.return=p,C}finally{}}}var gh=f2(!0),g2=f2(!1),Di=ks(null),Ns=null;function Qa(n){var t=n.alternate;te(Ce,Ce.current&1),te(Di,n),Ns===null&&(t===null||dh.current!==null||t.memoizedState!==null)&&(Ns=n)}function p2(n){if(n.tag===22){if(te(Ce,Ce.current),te(Di,n),Ns===null){var t=n.alternate;t!==null&&t.memoizedState!==null&&(Ns=n)}}else Ja()}function Ja(){te(Ce,Ce.current),te(Di,Di.current)}function Ca(n){Fe(Di),Ns===n&&(Ns=null),Fe(Ce)}var Ce=ks(0);function Um(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||dv(e)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function By(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:$t({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Wb={enqueueSetState:function(n,t,e){n=n._reactInternals;var i=oi(),s=Vr(i);s.payload=t,e!=null&&(s.callback=e),t=$r(n,s,i),t!==null&&(li(t,n,i),Cd(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=oi(),s=Vr(i);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=$r(n,s,i),t!==null&&(li(t,n,i),Cd(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=oi(),i=Vr(e);i.tag=2,t!=null&&(i.callback=t),t=$r(n,i,e),t!==null&&(li(t,n,e),Cd(t,n,e))}};function RS(n,t,e,i,s,a,r){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,a,r):t.prototype&&t.prototype.isPureReactComponent?!Fd(e,i)||!Fd(s,a):!0}function NS(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&Wb.enqueueReplaceState(t,t.state,null)}function ql(n,t){var e=t;if("ref"in t){e={};for(var i in t)i!=="ref"&&(e[i]=t[i])}if(n=n.defaultProps){e===t&&(e=$t({},e));for(var s in n)e[s]===void 0&&(e[s]=n[s])}return e}var jm=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function m2(n){jm(n)}function y2(n){console.error(n)}function b2(n){jm(n)}function Gm(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function DS(n,t,e){try{var i=n.onCaughtError;i(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Zb(n,t,e){return e=Vr(e),e.tag=3,e.payload={element:null},e.callback=function(){Gm(n,t)},e}function v2(n){return n=Vr(n),n.tag=3,n}function A2(n,t,e,i){var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=i.value;n.payload=function(){return s(a)},n.callback=function(){DS(t,e,i)}}var r=e.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){DS(t,e,i),typeof s!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function N3(n,t,e,i,s){if(e.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=e.alternate,t!==null&&Hg(t,e,s,!0),e=Di.current,e!==null){switch(e.tag){case 13:return Ns===null?av():e.alternate===null&&re===0&&(re=3),e.flags&=-257,e.flags|=65536,e.lanes=s,i===Gb?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([i]):t.add(i),Wy(n,i,s)),!1;case 22:return e.flags|=65536,i===Gb?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([i]):e.add(i)),Wy(n,i,s)),!1}throw Error(q(435,e.tag))}return Wy(n,i,s),av(),!1}if(Ct)return t=Di.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Ib&&(n=Error(q(422),{cause:i}),Ud(Ti(n,e)))):(i!==Ib&&(t=Error(q(423),{cause:i}),Ud(Ti(t,e))),n=n.current.alternate,n.flags|=65536,s&=-s,n.lanes|=s,i=Ti(i,e),s=Zb(n.stateNode,i,s),Hy(n,s),re!==4&&(re=2)),!1;var a=Error(q(520),{cause:i});if(a=Ti(a,e),kd===null?kd=[a]:kd.push(a),re!==4&&(re=2),t===null)return!0;i=Ti(i,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=s&-s,e.lanes|=n,n=Zb(e.stateNode,i,n),Hy(e,n),!1;case 1:if(t=e.type,a=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(qr===null||!qr.has(a))))return e.flags|=65536,s&=-s,e.lanes|=s,s=v2(s),A2(s,n,e,i),Hy(e,s),!1}e=e.return}while(e!==null);return!1}var w2=Error(q(461)),Be=!1;function qe(n,t,e,i){t.child=n===null?g2(t,null,e,i):gh(t,n.child,e,i)}function LS(n,t,e,i,s){e=e.render;var a=t.ref;if("ref"in i){var r={};for(var o in i)o!=="ref"&&(r[o]=i[o])}else r=i;return Vl(t),i=EA(n,t,e,r,a,s),o=TA(),n!==null&&!Be?(CA(n,t,s),za(n,t,s)):(Ct&&o&&bA(t),t.flags|=1,qe(n,t,i,s),t.child)}function kS(n,t,e,i,s){if(n===null){var a=e.type;return typeof a=="function"&&!yA(a)&&a.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=a,S2(n,t,a,i,s)):(n=Hp(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(a=n.child,!PA(n,s)){var r=a.memoizedProps;if(e=e.compare,e=e!==null?e:Fd,e(r,i)&&n.ref===t.ref)return za(n,t,s)}return t.flags|=1,n=Ra(a,i),n.ref=t.ref,n.return=t,t.child=n}function S2(n,t,e,i,s){if(n!==null){var a=n.memoizedProps;if(Fd(a,i)&&n.ref===t.ref)if(Be=!1,t.pendingProps=i=a,PA(n,s))n.flags&131072&&(Be=!0);else return t.lanes=n.lanes,za(n,t,s)}return Qb(n,t,e,i,s)}function _2(n,t,e){var i=t.pendingProps,s=i.children,a=n!==null?n.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=a!==null?a.baseLanes|e:e,n!==null){for(s=t.child=n.child,a=0;s!==null;)a=a|s.lanes|s.childLanes,s=s.sibling;t.childLanes=a&~i}else t.childLanes=0,t.child=null;return OS(n,t,i,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ip(t,a!==null?a.cachePool:null),a!==null?wS(t,a):qb(),p2(t);else return t.lanes=t.childLanes=536870912,OS(n,t,a!==null?a.baseLanes|e:e,e)}else a!==null?(Ip(t,a.cachePool),wS(t,a),Ja(),t.memoizedState=null):(n!==null&&Ip(t,null),qb(),Ja());return qe(n,t,s,e),t.child}function OS(n,t,e,i){var s=wA();return s=s===null?null:{parent:Te._currentValue,pool:s},t.memoizedState={baseLanes:e,cachePool:s},n!==null&&Ip(t,null),qb(),p2(t),n!==null&&Hg(n,t,i,!0),null}function Up(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(q(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function Qb(n,t,e,i,s){return Vl(t),e=EA(n,t,e,i,void 0,s),i=TA(),n!==null&&!Be?(CA(n,t,s),za(n,t,s)):(Ct&&i&&bA(t),t.flags|=1,qe(n,t,e,s),t.child)}function zS(n,t,e,i,s,a){return Vl(t),t.updateQueue=null,e=PE(t,i,e,s),zE(n),i=TA(),n!==null&&!Be?(CA(n,t,a),za(n,t,a)):(Ct&&i&&bA(t),t.flags|=1,qe(n,t,e,a),t.child)}function PS(n,t,e,i,s){if(Vl(t),t.stateNode===null){var a=zc,r=e.contextType;typeof r=="object"&&r!==null&&(a=cn(r)),a=new e(i,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Wb,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=i,a.state=t.memoizedState,a.refs={},SA(t),r=e.contextType,a.context=typeof r=="object"&&r!==null?cn(r):zc,a.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(By(t,e,r,i),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&Wb.enqueueReplaceState(a,a.state,null),Rd(t,i,a,s),Md(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(n===null){a=t.stateNode;var o=t.memoizedProps,l=ql(e,o);a.props=l;var u=a.context,h=e.contextType;r=zc,typeof h=="object"&&h!==null&&(r=cn(h));var d=e.getDerivedStateFromProps;h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||u!==r)&&NS(t,a,i,r),Ya=!1;var f=t.memoizedState;a.state=f,Rd(t,i,a,s),Md(),u=t.memoizedState,o||f!==u||Ya?(typeof d=="function"&&(By(t,e,d,i),u=t.memoizedState),(l=Ya||RS(t,e,l,i,f,u,r))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=r,i=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Vb(n,t),r=t.memoizedProps,h=ql(e,r),a.props=h,d=t.pendingProps,f=a.context,u=e.contextType,l=zc,typeof u=="object"&&u!==null&&(l=cn(u)),o=e.getDerivedStateFromProps,(u=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==d||f!==l)&&NS(t,a,i,l),Ya=!1,f=t.memoizedState,a.state=f,Rd(t,i,a,s),Md();var g=t.memoizedState;r!==d||f!==g||Ya||n!==null&&n.dependencies!==null&&Pm(n.dependencies)?(typeof o=="function"&&(By(t,e,o,i),g=t.memoizedState),(h=Ya||RS(t,e,h,i,f,g,l)||n!==null&&n.dependencies!==null&&Pm(n.dependencies))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),a.props=i,a.state=g,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||r===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return a=i,Up(n,t),i=(t.flags&128)!==0,a||i?(a=t.stateNode,e=i&&typeof e.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,n!==null&&i?(t.child=gh(t,n.child,null,s),t.child=gh(t,null,e,s)):qe(n,t,e,s),t.memoizedState=a.state,n=t.child):n=za(n,t,s),n}function HS(n,t,e,i){return Pg(),t.flags|=256,qe(n,t,e,i),t.child}var Fy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uy(n){return{baseLanes:n,cachePool:NE()}}function jy(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=Mi),n}function x2(n,t,e){var i=t.pendingProps,s=!1,a=(t.flags&128)!==0,r;if((r=a)||(r=n!==null&&n.memoizedState===null?!1:(Ce.current&2)!==0),r&&(s=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,n===null){if(Ct){if(s?Qa(t):Ja(),Ct){var o=ae,l;if(l=o){t:{for(l=o,o=Ts;l.nodeType!==8;){if(!o){o=null;break t}if(l=Zi(l.nextSibling),l===null){o=null;break t}}o=l}o!==null?(t.memoizedState={dehydrated:o,treeContext:Hl!==null?{id:xa,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},l=si(18,null,null,0),l.stateNode=o,l.return=t,t.child=l,vn=t,ae=null,l=!0):l=!1}l||Gl(t)}if(o=t.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return dv(o)?t.lanes=32:t.lanes=536870912,null;Ca(t)}return o=i.children,i=i.fallback,s?(Ja(),s=t.mode,o=Vm({mode:"hidden",children:o},s),i=Pl(i,s,e,null),o.return=t,i.return=t,o.sibling=i,t.child=o,s=t.child,s.memoizedState=Uy(e),s.childLanes=jy(n,r,e),t.memoizedState=Fy,i):(Qa(t),Jb(t,o))}if(l=n.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)t.flags&256?(Qa(t),t.flags&=-257,t=Gy(n,t,e)):t.memoizedState!==null?(Ja(),t.child=n.child,t.flags|=128,t=null):(Ja(),s=i.fallback,o=t.mode,i=Vm({mode:"visible",children:i.children},o),s=Pl(s,o,e,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,gh(t,n.child,null,e),i=t.child,i.memoizedState=Uy(e),i.childLanes=jy(n,r,e),t.memoizedState=Fy,t=s);else if(Qa(t),dv(o)){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;r=u,i=Error(q(419)),i.stack="",i.digest=r,Ud({value:i,source:null,stack:null}),t=Gy(n,t,e)}else if(Be||Hg(n,t,e,!1),r=(e&n.childLanes)!==0,Be||r){if(r=jt,r!==null&&(i=e&-e,i=i&42?1:rA(i),i=i&(r.suspendedLanes|e)?0:i,i!==0&&i!==l.retryLane))throw l.retryLane=i,Th(n,i),li(r,n,i),w2;o.data==="$?"||av(),t=Gy(n,t,e)}else o.data==="$?"?(t.flags|=192,t.child=n.child,t=null):(n=l.treeContext,ae=Zi(o.nextSibling),vn=t,Ct=!0,Il=null,Ts=!1,n!==null&&(_i[xi++]=xa,_i[xi++]=Ea,_i[xi++]=Hl,xa=n.id,Ea=n.overflow,Hl=t),t=Jb(t,i.children),t.flags|=4096);return t}return s?(Ja(),s=i.fallback,o=t.mode,l=n.child,u=l.sibling,i=Ra(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,u!==null?s=Ra(u,s):(s=Pl(s,o,e,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=n.child.memoizedState,o===null?o=Uy(e):(l=o.cachePool,l!==null?(u=Te._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=NE(),o={baseLanes:o.baseLanes|e,cachePool:l}),s.memoizedState=o,s.childLanes=jy(n,r,e),t.memoizedState=Fy,i):(Qa(t),e=n.child,n=e.sibling,e=Ra(e,{mode:"visible",children:i.children}),e.return=t,e.sibling=null,n!==null&&(r=t.deletions,r===null?(t.deletions=[n],t.flags|=16):r.push(n)),t.child=e,t.memoizedState=null,e)}function Jb(n,t){return t=Vm({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function Vm(n,t){return n=si(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Gy(n,t,e){return gh(t,n.child,null,e),n=Jb(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function IS(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Fb(n.return,t,e)}function Vy(n,t,e,i,s){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=e,a.tailMode=s)}function E2(n,t,e){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(qe(n,t,i.children,e),i=Ce.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&IS(n,e,t);else if(n.tag===19)IS(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}switch(te(Ce,i),s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&Um(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),Vy(t,!1,s,e,a);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&Um(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}Vy(t,!0,e,null,a);break;case"together":Vy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),eo|=t.lanes,!(e&t.childLanes))if(n!==null){if(Hg(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(q(153));if(t.child!==null){for(n=t.child,e=Ra(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Ra(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function PA(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&Pm(n)))}function D3(n,t,e){switch(t.tag){case 3:Mm(t,t.stateNode.containerInfo),Za(t,Te,n.memoizedState.cache),Pg();break;case 27:case 5:Mb(t);break;case 4:Mm(t,t.stateNode.containerInfo);break;case 10:Za(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Qa(t),t.flags|=128,null):e&t.child.childLanes?x2(n,t,e):(Qa(t),n=za(n,t,e),n!==null?n.sibling:null);Qa(t);break;case 19:var s=(n.flags&128)!==0;if(i=(e&t.childLanes)!==0,i||(Hg(n,t,e,!1),i=(e&t.childLanes)!==0),s){if(i)return E2(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),te(Ce,Ce.current),i)break;return null;case 22:case 23:return t.lanes=0,_2(n,t,e);case 24:Za(t,Te,n.memoizedState.cache)}return za(n,t,e)}function T2(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)Be=!0;else{if(!PA(n,e)&&!(t.flags&128))return Be=!1,D3(n,t,e);Be=!!(n.flags&131072)}else Be=!1,Ct&&t.flags&1048576&&ME(t,zm,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")yA(i)?(n=ql(i,n),t.tag=1,t=PS(null,t,i,n,e)):(t.tag=0,t=Qb(null,t,i,n,e));else{if(i!=null){if(s=i.$$typeof,s===iA){t.tag=11,t=LS(null,t,i,n,e);break t}else if(s===sA){t.tag=14,t=kS(null,t,i,n,e);break t}}throw t=Tb(i)||i,Error(q(306,t,""))}}return t;case 0:return Qb(n,t,t.type,t.pendingProps,e);case 1:return i=t.type,s=ql(i,t.pendingProps),PS(n,t,i,s,e);case 3:t:{if(Mm(t,t.stateNode.containerInfo),n===null)throw Error(q(387));i=t.pendingProps;var a=t.memoizedState;s=a.element,Vb(n,t),Rd(t,i,null,e);var r=t.memoizedState;if(i=r.cache,Za(t,Te,i),i!==a.cache&&Ub(t,[Te],e,!0),Md(),i=r.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=HS(n,t,i,e);break t}else if(i!==s){s=Ti(Error(q(424)),t),Ud(s),t=HS(n,t,i,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ae=Zi(n.firstChild),vn=t,Ct=!0,Il=null,Ts=!0,e=g2(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(Pg(),i===s){t=za(n,t,e);break t}qe(n,t,i,e)}t=t.child}return t;case 26:return Up(n,t),n===null?(e=e_(t.type,null,t.pendingProps,null))?t.memoizedState=e:Ct||(e=t.type,n=t.pendingProps,i=Zm(Gr.current).createElement(e),i[ln]=t,i[Pn]=n,Qe(i,e,n),Ie(i),t.stateNode=i):t.memoizedState=e_(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return Mb(t),n===null&&Ct&&(i=t.stateNode=dT(t.type,t.pendingProps,Gr.current),vn=t,Ts=!0,s=ae,lo(t.type)?(fv=s,ae=Zi(i.firstChild)):ae=s),qe(n,t,t.pendingProps.children,e),Up(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&Ct&&((s=i=ae)&&(i=aL(i,t.type,t.pendingProps,Ts),i!==null?(t.stateNode=i,vn=t,ae=Zi(i.firstChild),Ts=!1,s=!0):s=!1),s||Gl(t)),Mb(t),s=t.type,a=t.pendingProps,r=n!==null?n.memoizedProps:null,i=a.children,uv(s,a)?i=null:r!==null&&uv(s,r)&&(t.flags|=32),t.memoizedState!==null&&(s=EA(n,t,_3,null,null,e),Xd._currentValue=s),Up(n,t),qe(n,t,i,e),t.child;case 6:return n===null&&Ct&&((n=e=ae)&&(e=rL(e,t.pendingProps,Ts),e!==null?(t.stateNode=e,vn=t,ae=null,n=!0):n=!1),n||Gl(t)),null;case 13:return x2(n,t,e);case 4:return Mm(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=gh(t,null,i,e):qe(n,t,i,e),t.child;case 11:return LS(n,t,t.type,t.pendingProps,e);case 7:return qe(n,t,t.pendingProps,e),t.child;case 8:return qe(n,t,t.pendingProps.children,e),t.child;case 12:return qe(n,t,t.pendingProps.children,e),t.child;case 10:return i=t.pendingProps,Za(t,t.type,i.value),qe(n,t,i.children,e),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Vl(t),s=cn(s),i=i(s),t.flags|=1,qe(n,t,i,e),t.child;case 14:return kS(n,t,t.type,t.pendingProps,e);case 15:return S2(n,t,t.type,t.pendingProps,e);case 19:return E2(n,t,e);case 31:return i=t.pendingProps,e=t.mode,i={mode:i.mode,children:i.children},n===null?(e=Vm(i,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=Ra(n.child,i),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return _2(n,t,e);case 24:return Vl(t),i=cn(Te),n===null?(s=wA(),s===null&&(s=jt,a=AA(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=e),s=a),t.memoizedState={parent:i,cache:s},SA(t),Za(t,Te,s)):(n.lanes&e&&(Vb(n,t),Rd(t,null,null,e),Md()),s=n.memoizedState,a=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Za(t,Te,i)):(i=a.cache,Za(t,Te,i),i!==s.cache&&Ub(t,[Te],e,!0))),qe(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(q(156,t.tag))}function Bs(n){n.flags|=4}function BS(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!pT(t)){if(t=Di.current,t!==null&&((St&4194048)===St?Ns!==null:(St&62914560)!==St&&!(St&536870912)||t!==Ns))throw Td=Gb,DE;n.flags|=8192}}function dp(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?Qx():536870912,n.lanes|=t,ph|=t)}function Bh(n,t){if(!Ct)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ee(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function L3(n,t,e){var i=t.pendingProps;switch(vA(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ee(t),null;case 1:return ee(t),null;case 3:return e=t.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Na(Te),lh(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(Hh(t)?Bs(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pS())),ee(t),null;case 26:return e=t.memoizedState,n===null?(Bs(t),e!==null?(ee(t),BS(t,e)):(ee(t),t.flags&=-16777217)):e?e!==n.memoizedState?(Bs(t),ee(t),BS(t,e)):(ee(t),t.flags&=-16777217):(n.memoizedProps!==i&&Bs(t),ee(t),t.flags&=-16777217),null;case 27:Rm(t),e=Gr.current;var s=t.type;if(n!==null&&t.stateNode!=null)n.memoizedProps!==i&&Bs(t);else{if(!i){if(t.stateNode===null)throw Error(q(166));return ee(t),null}n=Ms.current,Hh(t)?fS(t):(n=dT(s,i,e),t.stateNode=n,Bs(t))}return ee(t),null;case 5:if(Rm(t),e=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==i&&Bs(t);else{if(!i){if(t.stateNode===null)throw Error(q(166));return ee(t),null}if(n=Ms.current,Hh(t))fS(t);else{switch(s=Zm(Gr.current),n){case 1:n=s.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:n=s.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":n=s.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":n=s.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?n.multiple=!0:i.size&&(n.size=i.size);break;default:n=typeof i.is=="string"?s.createElement(e,{is:i.is}):s.createElement(e)}}n[ln]=t,n[Pn]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)n.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=n;t:switch(Qe(n,e,i),e){case"button":case"input":case"select":case"textarea":n=!!i.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Bs(t)}}return ee(t),t.flags&=-16777217,null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==i&&Bs(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(q(166));if(n=Gr.current,Hh(t)){if(n=t.stateNode,e=t.memoizedProps,i=null,s=vn,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}n[ln]=t,n=!!(n.nodeValue===e||i!==null&&i.suppressHydrationWarning===!0||cT(n.nodeValue,e)),n||Gl(t)}else n=Zm(n).createTextNode(i),n[ln]=t,t.stateNode=n}return ee(t),null;case 13:if(i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(s=Hh(t),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[ln]=t}else Pg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ee(t),s=!1}else s=pS(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Ca(t),t):(Ca(t),null)}if(Ca(t),t.flags&128)return t.lanes=e,t;if(e=i!==null,n=n!==null&&n.memoizedState!==null,e){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var a=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==s&&(i.flags|=2048)}return e!==n&&e&&(t.child.flags|=8192),dp(t,t.updateQueue),ee(t),null;case 4:return lh(),n===null&&VA(t.stateNode.containerInfo),ee(t),null;case 10:return Na(t.type),ee(t),null;case 19:if(Fe(Ce),s=t.memoizedState,s===null)return ee(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)Bh(s,!1);else{if(re!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=Um(n),a!==null){for(t.flags|=128,Bh(s,!1),n=a.updateQueue,t.updateQueue=n,dp(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)CE(e,n),e=e.sibling;return te(Ce,Ce.current&1|2),t.child}n=n.sibling}s.tail!==null&&Rs()>qm&&(t.flags|=128,i=!0,Bh(s,!1),t.lanes=4194304)}else{if(!i)if(n=Um(a),n!==null){if(t.flags|=128,i=!0,n=n.updateQueue,t.updateQueue=n,dp(t,n),Bh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ct)return ee(t),null}else 2*Rs()-s.renderingStartTime>qm&&e!==536870912&&(t.flags|=128,i=!0,Bh(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Rs(),t.sibling=null,n=Ce.current,te(Ce,i?n&1|2:n&1),t):(ee(t),null);case 22:case 23:return Ca(t),_A(),i=t.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?e&536870912&&!(t.flags&128)&&(ee(t),t.subtreeFlags&6&&(t.flags|=8192)):ee(t),e=t.updateQueue,e!==null&&dp(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==e&&(t.flags|=2048),n!==null&&Fe(Bl),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),Na(Te),ee(t),null;case 25:return null;case 30:return null}throw Error(q(156,t.tag))}function k3(n,t){switch(vA(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Na(Te),lh(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return Rm(t),null;case 13:if(Ca(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(q(340));Pg()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Fe(Ce),null;case 4:return lh(),null;case 10:return Na(t.type),null;case 22:case 23:return Ca(t),_A(),n!==null&&Fe(Bl),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return Na(Te),null;case 25:return null;default:return null}}function C2(n,t){switch(vA(t),t.tag){case 3:Na(Te),lh();break;case 26:case 27:case 5:Rm(t);break;case 4:lh();break;case 13:Ca(t);break;case 19:Fe(Ce);break;case 10:Na(t.type);break;case 22:case 23:Ca(t),_A(),n!==null&&Fe(Bl);break;case 24:Na(Te)}}function jg(n,t){try{var e=t.updateQueue,i=e!==null?e.lastEffect:null;if(i!==null){var s=i.next;e=s;do{if((e.tag&n)===n){i=void 0;var a=e.create,r=e.inst;i=a(),r.destroy=i}e=e.next}while(e!==s)}}catch(o){Ft(t,t.return,o)}}function to(n,t,e){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var a=s.next;i=a;do{if((i.tag&n)===n){var r=i.inst,o=r.destroy;if(o!==void 0){r.destroy=void 0,s=t;var l=e,u=o;try{u()}catch(h){Ft(s,l,h)}}}i=i.next}while(i!==a)}}catch(h){Ft(t,t.return,h)}}function M2(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{OE(t,e)}catch(i){Ft(n,n.return,i)}}}function R2(n,t,e){e.props=ql(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(i){Ft(n,t,i)}}function Dd(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof e=="function"?n.refCleanup=e(i):e.current=i}}catch(s){Ft(n,t,s)}}function Cs(n,t){var e=n.ref,i=n.refCleanup;if(e!==null)if(typeof i=="function")try{i()}catch(s){Ft(n,t,s)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(s){Ft(n,t,s)}else e.current=null}function N2(n){var t=n.type,e=n.memoizedProps,i=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&i.focus();break t;case"img":e.src?i.src=e.src:e.srcSet&&(i.srcset=e.srcSet)}}catch(s){Ft(n,n.return,s)}}function $y(n,t,e){try{var i=n.stateNode;tL(i,n.type,e,t),i[Pn]=t}catch(s){Ft(n,n.return,s)}}function D2(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&lo(n.type)||n.tag===4}function qy(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||D2(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&lo(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tv(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=iy));else if(i!==4&&(i===27&&lo(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(tv(n,t,e),n=n.sibling;n!==null;)tv(n,t,e),n=n.sibling}function $m(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(i===27&&lo(n.type)&&(e=n.stateNode),n=n.child,n!==null))for($m(n,t,e),n=n.sibling;n!==null;)$m(n,t,e),n=n.sibling}function L2(n){var t=n.stateNode,e=n.memoizedProps;try{for(var i=n.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Qe(t,i,e),t[ln]=n,t[Pn]=e}catch(a){Ft(n,n.return,a)}}var Aa=!1,he=!1,Xy=!1,FS=typeof WeakSet=="function"?WeakSet:Set,He=null;function O3(n,t){if(n=n.containerInfo,lv=e0,n=vE(n),gA(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break t}var r=0,o=-1,l=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var g;d!==e||s!==0&&d.nodeType!==3||(o=r+s),d!==a||i!==0&&d.nodeType!==3||(l=r+i),d.nodeType===3&&(r+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break e;if(f===e&&++u===s&&(o=r),f===a&&++h===i&&(l=r),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}e=o===-1||l===-1?null:{start:o,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(cv={focusedElem:n,selectionRange:e},e0=!1,He=t;He!==null;)if(t=He,n=t.child,(t.subtreeFlags&1024)!==0&&n!==null)n.return=t,He=n;else for(;He!==null;){switch(t=He,a=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&a!==null){n=void 0,e=t,s=a.memoizedProps,a=a.memoizedState,i=e.stateNode;try{var b=ql(e.type,s,e.elementType===e.type);n=i.getSnapshotBeforeUpdate(b,a),i.__reactInternalSnapshotBeforeUpdate=n}catch(m){Ft(e,e.return,m)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)hv(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":hv(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(q(163))}if(n=t.sibling,n!==null){n.return=t.return,He=n;break}He=t.return}}function k2(n,t,e){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Ga(n,e),i&4&&jg(5,e);break;case 1:if(Ga(n,e),i&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(r){Ft(e,e.return,r)}else{var s=ql(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(s,t,n.__reactInternalSnapshotBeforeUpdate)}catch(r){Ft(e,e.return,r)}}i&64&&M2(e),i&512&&Dd(e,e.return);break;case 3:if(Ga(n,e),i&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{OE(n,t)}catch(r){Ft(e,e.return,r)}}break;case 27:t===null&&i&4&&L2(e);case 26:case 5:Ga(n,e),t===null&&i&4&&N2(e),i&512&&Dd(e,e.return);break;case 12:Ga(n,e);break;case 13:Ga(n,e),i&4&&P2(n,e),i&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=G3.bind(null,e),oL(n,e))));break;case 22:if(i=e.memoizedState!==null||Aa,!i){t=t!==null&&t.memoizedState!==null||he,s=Aa;var a=he;Aa=i,(he=t)&&!a?$a(n,e,(e.subtreeFlags&8772)!==0):Ga(n,e),Aa=s,he=a}break;case 30:break;default:Ga(n,e)}}function O2(n){var t=n.alternate;t!==null&&(n.alternate=null,O2(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&lA(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Kt=null,Ln=!1;function Fs(n,t,e){for(e=e.child;e!==null;)z2(n,t,e),e=e.sibling}function z2(n,t,e){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(Dg,e)}catch{}switch(e.tag){case 26:he||Cs(e,t),Fs(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:he||Cs(e,t);var i=Kt,s=Ln;lo(e.type)&&(Kt=e.stateNode,Ln=!1),Fs(n,t,e),zd(e.stateNode),Kt=i,Ln=s;break;case 5:he||Cs(e,t);case 6:if(i=Kt,s=Ln,Kt=null,Fs(n,t,e),Kt=i,Ln=s,Kt!==null)if(Ln)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(e.stateNode)}catch(a){Ft(e,t,a)}else try{Kt.removeChild(e.stateNode)}catch(a){Ft(e,t,a)}break;case 18:Kt!==null&&(Ln?(n=Kt,QS(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Wd(n)):QS(Kt,e.stateNode));break;case 4:i=Kt,s=Ln,Kt=e.stateNode.containerInfo,Ln=!0,Fs(n,t,e),Kt=i,Ln=s;break;case 0:case 11:case 14:case 15:he||to(2,e,t),he||to(4,e,t),Fs(n,t,e);break;case 1:he||(Cs(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"&&R2(e,t,i)),Fs(n,t,e);break;case 21:Fs(n,t,e);break;case 22:he=(i=he)||e.memoizedState!==null,Fs(n,t,e),he=i;break;default:Fs(n,t,e)}}function P2(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wd(n)}catch(e){Ft(t,t.return,e)}}function z3(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new FS),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new FS),t;default:throw Error(q(435,n.tag))}}function Yy(n,t){var e=z3(n);t.forEach(function(i){var s=V3.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}function Bn(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i],a=n,r=t,o=r;t:for(;o!==null;){switch(o.tag){case 27:if(lo(o.type)){Kt=o.stateNode,Ln=!1;break t}break;case 5:Kt=o.stateNode,Ln=!1;break t;case 3:case 4:Kt=o.stateNode.containerInfo,Ln=!0;break t}o=o.return}if(Kt===null)throw Error(q(160));z2(a,r,s),Kt=null,Ln=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)H2(t,n),t=t.sibling}var Xi=null;function H2(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Bn(t,n),Fn(n),i&4&&(to(3,n,n.return),jg(3,n),to(5,n,n.return));break;case 1:Bn(t,n),Fn(n),i&512&&(he||e===null||Cs(e,e.return)),i&64&&Aa&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?i:e.concat(i))));break;case 26:var s=Xi;if(Bn(t,n),Fn(n),i&512&&(he||e===null||Cs(e,e.return)),i&4){var a=e!==null?e.memoizedState:null;if(i=n.memoizedState,e===null)if(i===null)if(n.stateNode===null){t:{i=n.type,e=n.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":a=s.getElementsByTagName("title")[0],(!a||a[Og]||a[ln]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(i),s.head.insertBefore(a,s.querySelector("head > title"))),Qe(a,i,e),a[ln]=n,Ie(a),i=a;break t;case"link":var r=i_("link","href",s).get(i+(e.href||""));if(r){for(var o=0;o<r.length;o++)if(a=r[o],a.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&a.getAttribute("rel")===(e.rel==null?null:e.rel)&&a.getAttribute("title")===(e.title==null?null:e.title)&&a.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){r.splice(o,1);break e}}a=s.createElement(i),Qe(a,i,e),s.head.appendChild(a);break;case"meta":if(r=i_("meta","content",s).get(i+(e.content||""))){for(o=0;o<r.length;o++)if(a=r[o],a.getAttribute("content")===(e.content==null?null:""+e.content)&&a.getAttribute("name")===(e.name==null?null:e.name)&&a.getAttribute("property")===(e.property==null?null:e.property)&&a.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&a.getAttribute("charset")===(e.charSet==null?null:e.charSet)){r.splice(o,1);break e}}a=s.createElement(i),Qe(a,i,e),s.head.appendChild(a);break;default:throw Error(q(468,i))}a[ln]=n,Ie(a),i=a}n.stateNode=i}else s_(s,n.type,n.stateNode);else n.stateNode=n_(s,i,n.memoizedProps);else a!==i?(a===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):a.count--,i===null?s_(s,n.type,n.stateNode):n_(s,i,n.memoizedProps)):i===null&&n.stateNode!==null&&$y(n,n.memoizedProps,e.memoizedProps)}break;case 27:Bn(t,n),Fn(n),i&512&&(he||e===null||Cs(e,e.return)),e!==null&&i&4&&$y(n,n.memoizedProps,e.memoizedProps);break;case 5:if(Bn(t,n),Fn(n),i&512&&(he||e===null||Cs(e,e.return)),n.flags&32){s=n.stateNode;try{uh(s,"")}catch(g){Ft(n,n.return,g)}}i&4&&n.stateNode!=null&&(s=n.memoizedProps,$y(n,s,e!==null?e.memoizedProps:s)),i&1024&&(Xy=!0);break;case 6:if(Bn(t,n),Fn(n),i&4){if(n.stateNode===null)throw Error(q(162));i=n.memoizedProps,e=n.stateNode;try{e.nodeValue=i}catch(g){Ft(n,n.return,g)}}break;case 3:if(Vp=null,s=Xi,Xi=Qm(t.containerInfo),Bn(t,n),Xi=s,Fn(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(g){Ft(n,n.return,g)}Xy&&(Xy=!1,I2(n));break;case 4:i=Xi,Xi=Qm(n.stateNode.containerInfo),Bn(t,n),Fn(n),Xi=i;break;case 12:Bn(t,n),Fn(n);break;case 13:Bn(t,n),Fn(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(UA=Rs()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,Yy(n,i)));break;case 22:s=n.memoizedState!==null;var l=e!==null&&e.memoizedState!==null,u=Aa,h=he;if(Aa=u||s,he=h||l,Bn(t,n),he=h,Aa=u,Fn(n),i&8192)t:for(t=n.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(e===null||l||Aa||he||Ao(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){l=e=t;try{if(a=l.stateNode,s)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(g){Ft(l,l.return,g)}}}else if(t.tag===6){if(e===null){l=t;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(g){Ft(l,l.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=n.updateQueue,i!==null&&(e=i.retryQueue,e!==null&&(i.retryQueue=null,Yy(n,e))));break;case 19:Bn(t,n),Fn(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,Yy(n,i)));break;case 30:break;case 21:break;default:Bn(t,n),Fn(n)}}function Fn(n){var t=n.flags;if(t&2){try{for(var e,i=n.return;i!==null;){if(D2(i)){e=i;break}i=i.return}if(e==null)throw Error(q(160));switch(e.tag){case 27:var s=e.stateNode,a=qy(n);$m(n,a,s);break;case 5:var r=e.stateNode;e.flags&32&&(uh(r,""),e.flags&=-33);var o=qy(n);$m(n,o,r);break;case 3:case 4:var l=e.stateNode.containerInfo,u=qy(n);tv(n,u,l);break;default:throw Error(q(161))}}catch(h){Ft(n,n.return,h)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function I2(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;I2(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function Ga(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)k2(n,t.alternate,t),t=t.sibling}function Ao(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:to(4,t,t.return),Ao(t);break;case 1:Cs(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&R2(t,t.return,e),Ao(t);break;case 27:zd(t.stateNode);case 26:case 5:Cs(t,t.return),Ao(t);break;case 22:t.memoizedState===null&&Ao(t);break;case 30:Ao(t);break;default:Ao(t)}n=n.sibling}}function $a(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=n,a=t,r=a.flags;switch(a.tag){case 0:case 11:case 15:$a(s,a,e),jg(4,a);break;case 1:if($a(s,a,e),i=a,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){Ft(i,i.return,u)}if(i=a,s=i.updateQueue,s!==null){var o=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)kE(l[s],o)}catch(u){Ft(i,i.return,u)}}e&&r&64&&M2(a),Dd(a,a.return);break;case 27:L2(a);case 26:case 5:$a(s,a,e),e&&i===null&&r&4&&N2(a),Dd(a,a.return);break;case 12:$a(s,a,e);break;case 13:$a(s,a,e),e&&r&4&&P2(s,a);break;case 22:a.memoizedState===null&&$a(s,a,e),Dd(a,a.return);break;case 30:break;default:$a(s,a,e)}t=t.sibling}}function HA(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&Ig(e))}function IA(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&Ig(n))}function as(n,t,e,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)B2(n,t,e,i),t=t.sibling}function B2(n,t,e,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:as(n,t,e,i),s&2048&&jg(9,t);break;case 1:as(n,t,e,i);break;case 3:as(n,t,e,i),s&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&Ig(n)));break;case 12:if(s&2048){as(n,t,e,i),n=t.stateNode;try{var a=t.memoizedProps,r=a.id,o=a.onPostCommit;typeof o=="function"&&o(r,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(l){Ft(t,t.return,l)}}else as(n,t,e,i);break;case 13:as(n,t,e,i);break;case 23:break;case 22:a=t.stateNode,r=t.alternate,t.memoizedState!==null?a._visibility&2?as(n,t,e,i):Ld(n,t):a._visibility&2?as(n,t,e,i):(a._visibility|=2,yc(n,t,e,i,(t.subtreeFlags&10256)!==0)),s&2048&&HA(r,t);break;case 24:as(n,t,e,i),s&2048&&IA(t.alternate,t);break;default:as(n,t,e,i)}}function yc(n,t,e,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=n,r=t,o=e,l=i,u=r.flags;switch(r.tag){case 0:case 11:case 15:yc(a,r,o,l,s),jg(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?yc(a,r,o,l,s):Ld(a,r):(h._visibility|=2,yc(a,r,o,l,s)),s&&u&2048&&HA(r.alternate,r);break;case 24:yc(a,r,o,l,s),s&&u&2048&&IA(r.alternate,r);break;default:yc(a,r,o,l,s)}t=t.sibling}}function Ld(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,i=t,s=i.flags;switch(i.tag){case 22:Ld(e,i),s&2048&&HA(i.alternate,i);break;case 24:Ld(e,i),s&2048&&IA(i.alternate,i);break;default:Ld(e,i)}t=t.sibling}}var td=8192;function cc(n){if(n.subtreeFlags&td)for(n=n.child;n!==null;)F2(n),n=n.sibling}function F2(n){switch(n.tag){case 26:cc(n),n.flags&td&&n.memoizedState!==null&&AL(Xi,n.memoizedState,n.memoizedProps);break;case 5:cc(n);break;case 3:case 4:var t=Xi;Xi=Qm(n.stateNode.containerInfo),cc(n),Xi=t;break;case 22:n.memoizedState===null&&(t=n.alternate,t!==null&&t.memoizedState!==null?(t=td,td=16777216,cc(n),td=t):cc(n));break;default:cc(n)}}function U2(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function Fh(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];He=i,G2(i,n)}U2(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)j2(n),n=n.sibling}function j2(n){switch(n.tag){case 0:case 11:case 15:Fh(n),n.flags&2048&&to(9,n,n.return);break;case 3:Fh(n);break;case 12:Fh(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,jp(n)):Fh(n);break;default:Fh(n)}}function jp(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];He=i,G2(i,n)}U2(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:to(8,t,t.return),jp(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,jp(t));break;default:jp(t)}n=n.sibling}}function G2(n,t){for(;He!==null;){var e=He;switch(e.tag){case 0:case 11:case 15:to(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var i=e.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ig(e.memoizedState.cache)}if(i=e.child,i!==null)i.return=e,He=i;else t:for(e=n;He!==null;){i=He;var s=i.sibling,a=i.return;if(O2(i),i===e){He=null;break t}if(s!==null){s.return=a,He=s;break t}He=a}}}var P3={getCacheForType:function(n){var t=cn(Te),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e}},H3=typeof WeakMap=="function"?WeakMap:Map,Ot=0,jt=null,vt=null,St=0,kt=0,ni=null,Ur=!1,Ch=!1,BA=!1,Pa=0,re=0,eo=0,Fl=0,FA=0,Mi=0,ph=0,kd=null,kn=null,ev=!1,UA=0,qm=1/0,Xm=null,qr=null,We=0,Xr=null,mh=null,Kc=0,nv=0,iv=null,V2=null,Od=0,sv=null;function oi(){if(Ot&2&&St!==0)return St&-St;if(lt.T!==null){var n=hh;return n!==0?n:GA()}return eE()}function $2(){Mi===0&&(Mi=!(St&536870912)||Ct?Zx():536870912);var n=Di.current;return n!==null&&(n.flags|=32),Mi}function li(n,t,e){(n===jt&&(kt===2||kt===9)||n.cancelPendingCommit!==null)&&(yh(n,0),jr(n,St,Mi,!1)),kg(n,e),(!(Ot&2)||n!==jt)&&(n===jt&&(!(Ot&2)&&(Fl|=e),re===4&&jr(n,St,Mi,!1)),Os(n))}function q2(n,t,e){if(Ot&6)throw Error(q(327));var i=!e&&(t&124)===0&&(t&n.expiredLanes)===0||Lg(n,t),s=i?F3(n,t):Ky(n,t,!0),a=i;do{if(s===0){Ch&&!i&&jr(n,t,0,!1);break}else{if(e=n.current.alternate,a&&!I3(e)){s=Ky(n,t,!1),a=!1;continue}if(s===2){if(a=t,n.errorRecoveryDisabledLanes&a)var r=0;else r=n.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var o=n;s=kd;var l=o.current.memoizedState.isDehydrated;if(l&&(yh(o,r).flags|=256),r=Ky(o,r,!1),r!==2){if(BA&&!l){o.errorRecoveryDisabledLanes|=a,Fl|=a,s=4;break t}a=kn,kn=s,a!==null&&(kn===null?kn=a:kn.push.apply(kn,a))}s=r}if(a=!1,s!==2)continue}}if(s===1){yh(n,0),jr(n,t,0,!0);break}t:{switch(i=n,a=s,a){case 0:case 1:throw Error(q(345));case 4:if((t&4194048)!==t)break;case 6:jr(i,t,Mi,!Ur);break t;case 2:kn=null;break;case 3:case 5:break;default:throw Error(q(329))}if((t&62914560)===t&&(s=UA+300-Rs(),10<s)){if(jr(i,t,Mi,!Ur),V0(i,0,!0)!==0)break t;i.timeoutHandle=hT(US.bind(null,i,e,kn,Xm,ev,t,Mi,Fl,ph,Ur,a,2,-0,0),s);break t}US(i,e,kn,Xm,ev,t,Mi,Fl,ph,Ur,a,0,-0,0)}}break}while(!0);Os(n)}function US(n,t,e,i,s,a,r,o,l,u,h,d,f,g){if(n.timeoutHandle=-1,d=t.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(qd={stylesheets:null,count:0,unsuspend:vL},F2(t),d=wL(),d!==null)){n.cancelPendingCommit=d(GS.bind(null,n,t,a,e,i,s,r,o,l,h,1,f,g)),jr(n,a,r,!u);return}GS(n,t,a,e,i,s,r,o,l)}function I3(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var i=0;i<e.length;i++){var s=e[i],a=s.getSnapshot;s=s.value;try{if(!ui(a(),s))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(n,t,e,i){t&=~FA,t&=~Fl,n.suspendedLanes|=t,n.pingedLanes&=~t,i&&(n.warmLanes|=t),i=n.expirationTimes;for(var s=t;0<s;){var a=31-ri(s),r=1<<a;i[a]=-1,s&=~r}e!==0&&Jx(n,e,t)}function ty(){return Ot&6?!0:(Gg(0),!1)}function jA(){if(vt!==null){if(kt===0)var n=vt.return;else n=vt,Ta=ec=null,MA(n),Yc=null,Gd=0,n=vt;for(;n!==null;)C2(n.alternate,n),n=n.return;vt=null}}function yh(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,nL(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),jA(),jt=n,vt=e=Ra(n.current,null),St=t,kt=0,ni=null,Ur=!1,Ch=Lg(n,t),BA=!1,ph=Mi=FA=Fl=eo=re=0,kn=kd=null,ev=!1,t&8&&(t|=t&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=t;0<i;){var s=31-ri(i),a=1<<s;t|=n[s],i&=~a}return Pa=t,Y0(),e}function X2(n,t){pt=null,lt.H=Fm,t===Bg||t===W0?(t=vS(),kt=3):t===DE?(t=vS(),kt=4):kt=t===w2?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ni=t,vt===null&&(re=1,Gm(n,Ti(t,n.current)))}function Y2(){var n=lt.H;return lt.H=Fm,n===null?Fm:n}function K2(){var n=lt.A;return lt.A=P3,n}function av(){re=4,Ur||(St&4194048)!==St&&Di.current!==null||(Ch=!0),!(eo&134217727)&&!(Fl&134217727)||jt===null||jr(jt,St,Mi,!1)}function Ky(n,t,e){var i=Ot;Ot|=2;var s=Y2(),a=K2();(jt!==n||St!==t)&&(Xm=null,yh(n,t)),t=!1;var r=re;t:do try{if(kt!==0&&vt!==null){var o=vt,l=ni;switch(kt){case 8:jA(),r=6;break t;case 3:case 2:case 9:case 6:Di.current===null&&(t=!0);var u=kt;if(kt=0,ni=null,Ic(n,o,l,u),e&&Ch){r=0;break t}break;default:u=kt,kt=0,ni=null,Ic(n,o,l,u)}}B3(),r=re;break}catch(h){X2(n,h)}while(!0);return t&&n.shellSuspendCounter++,Ta=ec=null,Ot=i,lt.H=s,lt.A=a,vt===null&&(jt=null,St=0,Y0()),r}function B3(){for(;vt!==null;)W2(vt)}function F3(n,t){var e=Ot;Ot|=2;var i=Y2(),s=K2();jt!==n||St!==t?(Xm=null,qm=Rs()+500,yh(n,t)):Ch=Lg(n,t);t:do try{if(kt!==0&&vt!==null){t=vt;var a=ni;e:switch(kt){case 1:kt=0,ni=null,Ic(n,t,a,1);break;case 2:case 9:if(bS(a)){kt=0,ni=null,jS(t);break}t=function(){kt!==2&&kt!==9||jt!==n||(kt=7),Os(n)},a.then(t,t);break t;case 3:kt=7;break t;case 4:kt=5;break t;case 7:bS(a)?(kt=0,ni=null,jS(t)):(kt=0,ni=null,Ic(n,t,a,7));break;case 5:var r=null;switch(vt.tag){case 26:r=vt.memoizedState;case 5:case 27:var o=vt;if(!r||pT(r)){kt=0,ni=null;var l=o.sibling;if(l!==null)vt=l;else{var u=o.return;u!==null?(vt=u,ey(u)):vt=null}break e}}kt=0,ni=null,Ic(n,t,a,5);break;case 6:kt=0,ni=null,Ic(n,t,a,6);break;case 8:jA(),re=6;break t;default:throw Error(q(462))}}U3();break}catch(h){X2(n,h)}while(!0);return Ta=ec=null,lt.H=i,lt.A=s,Ot=e,vt!==null?0:(jt=null,St=0,Y0(),re)}function U3(){for(;vt!==null&&!cD();)W2(vt)}function W2(n){var t=T2(n.alternate,n,Pa);n.memoizedProps=n.pendingProps,t===null?ey(n):vt=t}function jS(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=zS(e,t,t.pendingProps,t.type,void 0,St);break;case 11:t=zS(e,t,t.pendingProps,t.type.render,t.ref,St);break;case 5:MA(t);default:C2(e,t),t=vt=CE(t,Pa),t=T2(e,t,Pa)}n.memoizedProps=n.pendingProps,t===null?ey(n):vt=t}function Ic(n,t,e,i){Ta=ec=null,MA(t),Yc=null,Gd=0;var s=t.return;try{if(N3(n,s,t,e,St)){re=1,Gm(n,Ti(e,n.current)),vt=null;return}}catch(a){if(s!==null)throw vt=s,a;re=1,Gm(n,Ti(e,n.current)),vt=null;return}t.flags&32768?(Ct||i===1?n=!0:Ch||St&536870912?n=!1:(Ur=n=!0,(i===2||i===9||i===3||i===6)&&(i=Di.current,i!==null&&i.tag===13&&(i.flags|=16384))),Z2(t,n)):ey(t)}function ey(n){var t=n;do{if(t.flags&32768){Z2(t,Ur);return}n=t.return;var e=L3(t.alternate,t,Pa);if(e!==null){vt=e;return}if(t=t.sibling,t!==null){vt=t;return}vt=t=n}while(t!==null);re===0&&(re=5)}function Z2(n,t){do{var e=k3(n.alternate,n);if(e!==null){e.flags&=32767,vt=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){vt=n;return}vt=n=e}while(n!==null);re=6,vt=null}function GS(n,t,e,i,s,a,r,o,l){n.cancelPendingCommit=null;do ny();while(We!==0);if(Ot&6)throw Error(q(327));if(t!==null){if(t===n.current)throw Error(q(177));if(a=t.lanes|t.childLanes,a|=pA,vD(n,e,a,r,o,l),n===jt&&(vt=jt=null,St=0),mh=t,Xr=n,Kc=e,nv=a,iv=s,V2=i,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,$3(Nm,function(){return nT(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=lt.T,lt.T=null,s=Mt.p,Mt.p=2,r=Ot,Ot|=4;try{O3(n,t,e)}finally{Ot=r,Mt.p=s,lt.T=i}}We=1,Q2(),J2(),tT()}}function Q2(){if(We===1){We=0;var n=Xr,t=mh,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=lt.T,lt.T=null;var i=Mt.p;Mt.p=2;var s=Ot;Ot|=4;try{H2(t,n);var a=cv,r=vE(n.containerInfo),o=a.focusedElem,l=a.selectionRange;if(r!==o&&o&&o.ownerDocument&&bE(o.ownerDocument.documentElement,o)){if(l!==null&&gA(o)){var u=l.start,h=l.end;if(h===void 0&&(h=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var g=f.getSelection(),b=o.textContent.length,m=Math.min(l.start,b),S=l.end===void 0?m:Math.min(l.end,b);!g.extend&&m>S&&(r=S,S=m,m=r);var p=uS(o,m),y=uS(o,S);if(p&&y&&(g.rangeCount!==1||g.anchorNode!==p.node||g.anchorOffset!==p.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var A=d.createRange();A.setStart(p.node,p.offset),g.removeAllRanges(),m>S?(g.addRange(A),g.extend(y.node,y.offset)):(A.setEnd(y.node,y.offset),g.addRange(A))}}}}for(d=[],g=o;g=g.parentNode;)g.nodeType===1&&d.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}e0=!!lv,cv=lv=null}finally{Ot=s,Mt.p=i,lt.T=e}}n.current=t,We=2}}function J2(){if(We===2){We=0;var n=Xr,t=mh,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=lt.T,lt.T=null;var i=Mt.p;Mt.p=2;var s=Ot;Ot|=4;try{k2(n,t.alternate,t)}finally{Ot=s,Mt.p=i,lt.T=e}}We=3}}function tT(){if(We===4||We===3){We=0,uD();var n=Xr,t=mh,e=Kc,i=V2;t.subtreeFlags&10256||t.flags&10256?We=5:(We=0,mh=Xr=null,eT(n,n.pendingLanes));var s=n.pendingLanes;if(s===0&&(qr=null),oA(e),t=t.stateNode,ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(Dg,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=lt.T,s=Mt.p,Mt.p=2,lt.T=null;try{for(var a=n.onRecoverableError,r=0;r<i.length;r++){var o=i[r];a(o.value,{componentStack:o.stack})}}finally{lt.T=t,Mt.p=s}}Kc&3&&ny(),Os(n),s=n.pendingLanes,e&4194090&&s&42?n===sv?Od++:(Od=0,sv=n):Od=0,Gg(0)}}function eT(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,Ig(t)))}function ny(n){return Q2(),J2(),tT(),nT()}function nT(){if(We!==5)return!1;var n=Xr,t=nv;nv=0;var e=oA(Kc),i=lt.T,s=Mt.p;try{Mt.p=32>e?32:e,lt.T=null,e=iv,iv=null;var a=Xr,r=Kc;if(We=0,mh=Xr=null,Kc=0,Ot&6)throw Error(q(331));var o=Ot;if(Ot|=4,j2(a.current),B2(a,a.current,r,e),Ot=o,Gg(0,!1),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(Dg,a)}catch{}return!0}finally{Mt.p=s,lt.T=i,eT(n,t)}}function VS(n,t,e){t=Ti(e,t),t=Zb(n.stateNode,t,2),n=$r(n,t,2),n!==null&&(kg(n,2),Os(n))}function Ft(n,t,e){if(n.tag===3)VS(n,n,e);else for(;t!==null;){if(t.tag===3){VS(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qr===null||!qr.has(i))){n=Ti(e,n),e=v2(2),i=$r(t,e,2),i!==null&&(A2(e,i,t,n),kg(i,2),Os(i));break}}t=t.return}}function Wy(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new H3;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(BA=!0,s.add(e),n=j3.bind(null,n,t,e),t.then(n,n))}function j3(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,jt===n&&(St&e)===e&&(re===4||re===3&&(St&62914560)===St&&300>Rs()-UA?!(Ot&2)&&yh(n,0):FA|=e,ph===St&&(ph=0)),Os(n)}function iT(n,t){t===0&&(t=Qx()),n=Th(n,t),n!==null&&(kg(n,t),Os(n))}function G3(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),iT(n,e)}function V3(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(q(314))}i!==null&&i.delete(t),iT(n,e)}function $3(n,t){return aA(n,t)}var Ym=null,bc=null,rv=!1,Km=!1,Zy=!1,Ul=0;function Os(n){n!==bc&&n.next===null&&(bc===null?Ym=bc=n:bc=bc.next=n),Km=!0,rv||(rv=!0,X3())}function Gg(n,t){if(!Zy&&Km){Zy=!0;do for(var e=!1,i=Ym;i!==null;){if(n!==0){var s=i.pendingLanes;if(s===0)var a=0;else{var r=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-ri(42|n)+1)-1,a&=s&~(r&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(e=!0,$S(i,a))}else a=St,a=V0(i,i===jt?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||Lg(i,a)||(e=!0,$S(i,a));i=i.next}while(e);Zy=!1}}function q3(){sT()}function sT(){Km=rv=!1;var n=0;Ul!==0&&(eL()&&(n=Ul),Ul=0);for(var t=Rs(),e=null,i=Ym;i!==null;){var s=i.next,a=aT(i,t);a===0?(i.next=null,e===null?Ym=s:e.next=s,s===null&&(bc=e)):(e=i,(n!==0||a&3)&&(Km=!0)),i=s}Gg(n)}function aT(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,a=n.pendingLanes&-62914561;0<a;){var r=31-ri(a),o=1<<r,l=s[r];l===-1?(!(o&e)||o&i)&&(s[r]=bD(o,t)):l<=t&&(n.expiredLanes|=o),a&=~o}if(t=jt,e=St,e=V0(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,e===0||n===t&&(kt===2||kt===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&_y(i),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||Lg(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(i!==null&&_y(i),oA(e)){case 2:case 8:e=Kx;break;case 32:e=Nm;break;case 268435456:e=Wx;break;default:e=Nm}return i=rT.bind(null,n),e=aA(e,i),n.callbackPriority=t,n.callbackNode=e,t}return i!==null&&i!==null&&_y(i),n.callbackPriority=2,n.callbackNode=null,2}function rT(n,t){if(We!==0&&We!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(ny()&&n.callbackNode!==e)return null;var i=St;return i=V0(n,n===jt?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(q2(n,i,t),aT(n,Rs()),n.callbackNode!=null&&n.callbackNode===e?rT.bind(null,n):null)}function $S(n,t){if(ny())return null;q2(n,t,!0)}function X3(){iL(function(){Ot&6?aA(Yx,q3):sT()})}function GA(){return Ul===0&&(Ul=Zx()),Ul}function qS(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Op(""+n)}function XS(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function Y3(n,t,e,i,s){if(t==="submit"&&e&&e.stateNode===s){var a=qS((s[Pn]||null).action),r=i.submitter;r&&(t=(t=r[Pn]||null)?qS(t.formAction):r.getAttribute("formAction"),t!==null&&(a=t,r=null));var o=new $0("action","action",null,i,s);n.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ul!==0){var l=r?XS(s,r):new FormData(s);Kb(e,{pending:!0,data:l,method:s.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=r?XS(s,r):new FormData(s),Kb(e,{pending:!0,data:l,method:s.method,action:a},a,l))},currentTarget:s}]})}}for(var Qy=0;Qy<Hb.length;Qy++){var Jy=Hb[Qy],K3=Jy.toLowerCase(),W3=Jy[0].toUpperCase()+Jy.slice(1);es(K3,"on"+W3)}es(wE,"onAnimationEnd");es(SE,"onAnimationIteration");es(_E,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(f3,"onTransitionRun");es(g3,"onTransitionStart");es(p3,"onTransitionCancel");es(xE,"onTransitionEnd");ch("onMouseEnter",["mouseout","mouseover"]);ch("onMouseLeave",["mouseout","mouseover"]);ch("onPointerEnter",["pointerout","pointerover"]);ch("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vd));function oT(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var a=void 0;if(t)for(var r=i.length-1;0<=r;r--){var o=i[r],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break t;a=o,s.currentTarget=u;try{a(s)}catch(h){jm(h)}s.currentTarget=null,a=l}else for(r=0;r<i.length;r++){if(o=i[r],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break t;a=o,s.currentTarget=u;try{a(s)}catch(h){jm(h)}s.currentTarget=null,a=l}}}}function bt(n,t){var e=t[Nb];e===void 0&&(e=t[Nb]=new Set);var i=n+"__bubble";e.has(i)||(lT(t,n,2,!1),e.add(i))}function tb(n,t,e){var i=0;t&&(i|=4),lT(e,n,i,t)}var fp="_reactListening"+Math.random().toString(36).slice(2);function VA(n){if(!n[fp]){n[fp]=!0,nE.forEach(function(e){e!=="selectionchange"&&(Z3.has(e)||tb(e,!1,n),tb(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[fp]||(t[fp]=!0,tb("selectionchange",!1,t))}}function lT(n,t,e,i){switch(AT(t)){case 2:var s=xL;break;case 8:s=EL;break;default:s=YA}e=s.bind(null,t,e,n),s=void 0,!Ob||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function eb(n,t,e,i,s){var a=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var o=i.stateNode.containerInfo;if(o===s)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===s)return;r=r.return}for(;o!==null;){if(r=Rc(o),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){i=a=r;continue t}o=o.parentNode}}i=i.return}uE(function(){var u=a,h=uA(e),d=[];t:{var f=EE.get(n);if(f!==void 0){var g=$0,b=n;switch(n){case"keypress":if(Pp(e)===0)break t;case"keydown":case"keyup":g=$D;break;case"focusin":b="focus",g=Dy;break;case"focusout":b="blur",g=Dy;break;case"beforeblur":case"afterblur":g=Dy;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=tS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=kD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=YD;break;case wE:case SE:case _E:g=PD;break;case xE:g=WD;break;case"scroll":case"scrollend":g=DD;break;case"wheel":g=QD;break;case"copy":case"cut":case"paste":g=ID;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=nS;break;case"toggle":case"beforetoggle":g=t3}var m=(t&4)!==0,S=!m&&(n==="scroll"||n==="scrollend"),p=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,A;y!==null;){var w=y;if(A=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||A===null||p===null||(w=Id(y,p),w!=null&&m.push($d(y,w,A))),S)break;y=y.return}0<m.length&&(f=new g(f,b,null,e,h),d.push({event:f,listeners:m}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&e!==kb&&(b=e.relatedTarget||e.fromElement)&&(Rc(b)||b[xh]))break t;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(b=e.relatedTarget||e.toElement,g=u,b=b?Rc(b):null,b!==null&&(S=Ng(b),m=b.tag,b!==S||m!==5&&m!==27&&m!==6)&&(b=null)):(g=null,b=u),g!==b)){if(m=tS,w="onMouseLeave",p="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(m=nS,w="onPointerLeave",p="onPointerEnter",y="pointer"),S=g==null?f:Jh(g),A=b==null?f:Jh(b),f=new m(w,y+"leave",g,e,h),f.target=S,f.relatedTarget=A,w=null,Rc(h)===u&&(m=new m(p,y+"enter",b,e,h),m.target=A,m.relatedTarget=S,w=m),S=w,g&&b)e:{for(m=g,p=b,y=0,A=m;A;A=uc(A))y++;for(A=0,w=p;w;w=uc(w))A++;for(;0<y-A;)m=uc(m),y--;for(;0<A-y;)p=uc(p),A--;for(;y--;){if(m===p||p!==null&&m===p.alternate)break e;m=uc(m),p=uc(p)}m=null}else m=null;g!==null&&YS(d,f,g,m,!1),b!==null&&S!==null&&YS(d,S,b,m,!0)}}t:{if(f=u?Jh(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var T=rS;else if(aS(f))if(mE)T=u3;else{T=l3;var C=o3}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&cA(u.elementType)&&(T=rS):T=c3;if(T&&(T=T(n,u))){pE(d,T,e,h);break t}C&&C(n,f,u),n==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&Lb(f,"number",f.value)}switch(C=u?Jh(u):window,n){case"focusin":(aS(C)||C.contentEditable==="true")&&(Lc=C,zb=u,xd=null);break;case"focusout":xd=zb=Lc=null;break;case"mousedown":Pb=!0;break;case"contextmenu":case"mouseup":case"dragend":Pb=!1,hS(d,e,h);break;case"selectionchange":if(d3)break;case"keydown":case"keyup":hS(d,e,h)}var M;if(fA)t:{switch(n){case"compositionstart":var L="onCompositionStart";break t;case"compositionend":L="onCompositionEnd";break t;case"compositionupdate":L="onCompositionUpdate";break t}L=void 0}else Dc?fE(n,e)&&(L="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(L="onCompositionStart");L&&(dE&&e.locale!=="ko"&&(Dc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Dc&&(M=hE()):(Fr=h,hA="value"in Fr?Fr.value:Fr.textContent,Dc=!0)),C=Wm(u,L),0<C.length&&(L=new eS(L,n,null,e,h),d.push({event:L,listeners:C}),M?L.data=M:(M=gE(e),M!==null&&(L.data=M)))),(M=n3?i3(n,e):s3(n,e))&&(L=Wm(u,"onBeforeInput"),0<L.length&&(C=new eS("onBeforeInput","beforeinput",null,e,h),d.push({event:C,listeners:L}),C.data=M)),Y3(d,n,u,e,h)}oT(d,t)})}function $d(n,t,e){return{instance:n,listener:t,currentTarget:e}}function Wm(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,a=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=Id(n,e),s!=null&&i.unshift($d(n,s,a)),s=Id(n,t),s!=null&&i.push($d(n,s,a))),n.tag===3)return i;n=n.return}return[]}function uc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function YS(n,t,e,i,s){for(var a=t._reactName,r=[];e!==null&&e!==i;){var o=e,l=o.alternate,u=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||u===null||(l=u,s?(u=Id(e,a),u!=null&&r.unshift($d(e,u,l))):s||(u=Id(e,a),u!=null&&r.push($d(e,u,l)))),e=e.return}r.length!==0&&n.push({event:t,listeners:r})}var Q3=/\r\n?/g,J3=/\u0000|\uFFFD/g;function KS(n){return(typeof n=="string"?n:""+n).replace(Q3,`
`).replace(J3,"")}function cT(n,t){return t=KS(t),KS(n)===t}function iy(){}function zt(n,t,e,i,s,a){switch(e){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||uh(n,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&uh(n,""+i);break;case"className":rp(n,"class",i);break;case"tabIndex":rp(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":rp(n,e,i);break;case"style":cE(n,i,a);break;case"data":if(t!=="object"){rp(n,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=Op(""+i),n.setAttribute(e,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(e==="formAction"?(t!=="input"&&zt(n,t,"name",s.name,s,null),zt(n,t,"formEncType",s.formEncType,s,null),zt(n,t,"formMethod",s.formMethod,s,null),zt(n,t,"formTarget",s.formTarget,s,null)):(zt(n,t,"encType",s.encType,s,null),zt(n,t,"method",s.method,s,null),zt(n,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=Op(""+i),n.setAttribute(e,i);break;case"onClick":i!=null&&(n.onclick=iy);break;case"onScroll":i!=null&&bt("scroll",n);break;case"onScrollEnd":i!=null&&bt("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(e=i.__html,e!=null){if(s.children!=null)throw Error(q(60));n.innerHTML=e}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}e=Op(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""+i):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":i===!0?n.setAttribute(e,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,i):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(e,i):n.removeAttribute(e);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(e):n.setAttribute(e,i);break;case"popover":bt("beforetoggle",n),bt("toggle",n),kp(n,"popover",i);break;case"xlinkActuate":Is(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Is(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Is(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Is(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Is(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Is(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Is(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Is(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Is(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":kp(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=RD.get(e)||e,kp(n,e,i))}}function ov(n,t,e,i,s,a){switch(e){case"style":cE(n,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(e=i.__html,e!=null){if(s.children!=null)throw Error(q(60));n.innerHTML=e}}break;case"children":typeof i=="string"?uh(n,i):(typeof i=="number"||typeof i=="bigint")&&uh(n,""+i);break;case"onScroll":i!=null&&bt("scroll",n);break;case"onScrollEnd":i!=null&&bt("scrollend",n);break;case"onClick":i!=null&&(n.onclick=iy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iE.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(s=e.endsWith("Capture"),t=e.slice(2,s?e.length-7:void 0),a=n[Pn]||null,a=a!=null?a[e]:null,typeof a=="function"&&n.removeEventListener(t,a,s),typeof i=="function")){typeof a!="function"&&a!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,i,s);break t}e in n?n[e]=i:i===!0?n.setAttribute(e,""):kp(n,e,i)}}}function Qe(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",n),bt("load",n);var i=!1,s=!1,a;for(a in e)if(e.hasOwnProperty(a)){var r=e[a];if(r!=null)switch(a){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(q(137,t));default:zt(n,t,a,r,e,null)}}s&&zt(n,t,"srcSet",e.srcSet,e,null),i&&zt(n,t,"src",e.src,e,null);return;case"input":bt("invalid",n);var o=a=r=s=null,l=null,u=null;for(i in e)if(e.hasOwnProperty(i)){var h=e[i];if(h!=null)switch(i){case"name":s=h;break;case"type":r=h;break;case"checked":l=h;break;case"defaultChecked":u=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(q(137,t));break;default:zt(n,t,i,h,e,null)}}rE(n,a,o,l,u,r,s,!1),Dm(n);return;case"select":bt("invalid",n),i=r=a=null;for(s in e)if(e.hasOwnProperty(s)&&(o=e[s],o!=null))switch(s){case"value":a=o;break;case"defaultValue":r=o;break;case"multiple":i=o;default:zt(n,t,s,o,e,null)}t=a,e=r,n.multiple=!!i,t!=null?Gc(n,!!i,t,!1):e!=null&&Gc(n,!!i,e,!0);return;case"textarea":bt("invalid",n),a=s=i=null;for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],o!=null))switch(r){case"value":i=o;break;case"defaultValue":s=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(q(91));break;default:zt(n,t,r,o,e,null)}lE(n,i,s,a),Dm(n);return;case"option":for(l in e)if(e.hasOwnProperty(l)&&(i=e[l],i!=null))switch(l){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:zt(n,t,l,i,e,null)}return;case"dialog":bt("beforetoggle",n),bt("toggle",n),bt("cancel",n),bt("close",n);break;case"iframe":case"object":bt("load",n);break;case"video":case"audio":for(i=0;i<Vd.length;i++)bt(Vd[i],n);break;case"image":bt("error",n),bt("load",n);break;case"details":bt("toggle",n);break;case"embed":case"source":case"link":bt("error",n),bt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in e)if(e.hasOwnProperty(u)&&(i=e[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(q(137,t));default:zt(n,t,u,i,e,null)}return;default:if(cA(t)){for(h in e)e.hasOwnProperty(h)&&(i=e[h],i!==void 0&&ov(n,t,h,i,e,void 0));return}}for(o in e)e.hasOwnProperty(o)&&(i=e[o],i!=null&&zt(n,t,o,i,e,null))}function tL(n,t,e,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,r=null,o=null,l=null,u=null,h=null;for(g in e){var d=e[g];if(e.hasOwnProperty(g)&&d!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(g)||zt(n,t,g,null,i,d)}}for(var f in i){var g=i[f];if(d=e[f],i.hasOwnProperty(f)&&(g!=null||d!=null))switch(f){case"type":a=g;break;case"name":s=g;break;case"checked":u=g;break;case"defaultChecked":h=g;break;case"value":r=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(q(137,t));break;default:g!==d&&zt(n,t,f,g,i,d)}}Db(n,r,o,l,u,h,a,s);return;case"select":g=r=o=f=null;for(a in e)if(l=e[a],e.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(a)||zt(n,t,a,null,i,l)}for(s in i)if(a=i[s],l=e[s],i.hasOwnProperty(s)&&(a!=null||l!=null))switch(s){case"value":f=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:a!==l&&zt(n,t,s,a,i,l)}t=o,e=r,i=g,f!=null?Gc(n,!!e,f,!1):!!i!=!!e&&(t!=null?Gc(n,!!e,t,!0):Gc(n,!!e,e?[]:"",!1));return;case"textarea":g=f=null;for(o in e)if(s=e[o],e.hasOwnProperty(o)&&s!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:zt(n,t,o,null,i,s)}for(r in i)if(s=i[r],a=e[r],i.hasOwnProperty(r)&&(s!=null||a!=null))switch(r){case"value":f=s;break;case"defaultValue":g=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(q(91));break;default:s!==a&&zt(n,t,r,s,i,a)}oE(n,f,g);return;case"option":for(var b in e)if(f=e[b],e.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b))switch(b){case"selected":n.selected=!1;break;default:zt(n,t,b,null,i,f)}for(l in i)if(f=i[l],g=e[l],i.hasOwnProperty(l)&&f!==g&&(f!=null||g!=null))switch(l){case"selected":n.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:zt(n,t,l,f,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in e)f=e[m],e.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m)&&zt(n,t,m,null,i,f);for(u in i)if(f=i[u],g=e[u],i.hasOwnProperty(u)&&f!==g&&(f!=null||g!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(q(137,t));break;default:zt(n,t,u,f,i,g)}return;default:if(cA(t)){for(var S in e)f=e[S],e.hasOwnProperty(S)&&f!==void 0&&!i.hasOwnProperty(S)&&ov(n,t,S,void 0,i,f);for(h in i)f=i[h],g=e[h],!i.hasOwnProperty(h)||f===g||f===void 0&&g===void 0||ov(n,t,h,f,i,g);return}}for(var p in e)f=e[p],e.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&zt(n,t,p,null,i,f);for(d in i)f=i[d],g=e[d],!i.hasOwnProperty(d)||f===g||f==null&&g==null||zt(n,t,d,f,i,g)}var lv=null,cv=null;function Zm(n){return n.nodeType===9?n:n.ownerDocument}function WS(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uT(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function uv(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nb=null;function eL(){var n=window.event;return n&&n.type==="popstate"?n===nb?!1:(nb=n,!0):(nb=null,!1)}var hT=typeof setTimeout=="function"?setTimeout:void 0,nL=typeof clearTimeout=="function"?clearTimeout:void 0,ZS=typeof Promise=="function"?Promise:void 0,iL=typeof queueMicrotask=="function"?queueMicrotask:typeof ZS<"u"?function(n){return ZS.resolve(null).then(n).catch(sL)}:hT;function sL(n){setTimeout(function(){throw n})}function lo(n){return n==="head"}function QS(n,t){var e=t,i=0,s=0;do{var a=e.nextSibling;if(n.removeChild(e),a&&a.nodeType===8)if(e=a.data,e==="/$"){if(0<i&&8>i){e=i;var r=n.ownerDocument;if(e&1&&zd(r.documentElement),e&2&&zd(r.body),e&4)for(e=r.head,zd(e),r=e.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[Og]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||e.removeChild(r),r=o}}if(s===0){n.removeChild(a),Wd(t);return}s--}else e==="$"||e==="$?"||e==="$!"?s++:i=e.charCodeAt(0)-48;else i=0;e=a}while(e);Wd(t)}function hv(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":hv(e),lA(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function aL(n,t,e,i){for(;n.nodeType===1;){var s=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[Og])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(a=n.getAttribute("rel"),a==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(a!==s.rel||n.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||n.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||n.getAttribute("title")!==(s.title==null?null:s.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(a=n.getAttribute("src"),(a!==(s.src==null?null:s.src)||n.getAttribute("type")!==(s.type==null?null:s.type)||n.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&n.getAttribute("name")===a)return n}else return n;if(n=Zi(n.nextSibling),n===null)break}return null}function rL(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=Zi(n.nextSibling),n===null))return null;return n}function dv(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function oL(n,t){var e=n.ownerDocument;if(n.data!=="$?"||e.readyState==="complete")t();else{var i=function(){t(),e.removeEventListener("DOMContentLoaded",i)};e.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function Zi(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return n}var fv=null;function JS(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}function dT(n,t,e){switch(t=Zm(e),n){case"html":if(n=t.documentElement,!n)throw Error(q(452));return n;case"head":if(n=t.head,!n)throw Error(q(453));return n;case"body":if(n=t.body,!n)throw Error(q(454));return n;default:throw Error(q(451))}}function zd(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);lA(n)}var Li=new Map,t_=new Set;function Qm(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ua=Mt.d;Mt.d={f:lL,r:cL,D:uL,C:hL,L:dL,m:fL,X:pL,S:gL,M:mL};function lL(){var n=Ua.f(),t=ty();return n||t}function cL(n){var t=Eh(n);t!==null&&t.tag===5&&t.type==="form"?a2(t):Ua.r(n)}var Mh=typeof document>"u"?null:document;function fT(n,t,e){var i=Mh;if(i&&typeof t=="string"&&t){var s=Ei(t);s='link[rel="'+n+'"][href="'+s+'"]',typeof e=="string"&&(s+='[crossorigin="'+e+'"]'),t_.has(s)||(t_.add(s),n={rel:n,crossOrigin:e,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),Qe(t,"link",n),Ie(t),i.head.appendChild(t)))}}function uL(n){Ua.D(n),fT("dns-prefetch",n,null)}function hL(n,t){Ua.C(n,t),fT("preconnect",n,t)}function dL(n,t,e){Ua.L(n,t,e);var i=Mh;if(i&&n&&t){var s='link[rel="preload"][as="'+Ei(t)+'"]';t==="image"&&e&&e.imageSrcSet?(s+='[imagesrcset="'+Ei(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(s+='[imagesizes="'+Ei(e.imageSizes)+'"]')):s+='[href="'+Ei(n)+'"]';var a=s;switch(t){case"style":a=bh(n);break;case"script":a=Rh(n)}Li.has(a)||(n=$t({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),Li.set(a,n),i.querySelector(s)!==null||t==="style"&&i.querySelector(Vg(a))||t==="script"&&i.querySelector($g(a))||(t=i.createElement("link"),Qe(t,"link",n),Ie(t),i.head.appendChild(t)))}}function fL(n,t){Ua.m(n,t);var e=Mh;if(e&&n){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Ei(i)+'"][href="'+Ei(n)+'"]',a=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Rh(n)}if(!Li.has(a)&&(n=$t({rel:"modulepreload",href:n},t),Li.set(a,n),e.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector($g(a)))return}i=e.createElement("link"),Qe(i,"link",n),Ie(i),e.head.appendChild(i)}}}function gL(n,t,e){Ua.S(n,t,e);var i=Mh;if(i&&n){var s=jc(i).hoistableStyles,a=bh(n);t=t||"default";var r=s.get(a);if(!r){var o={loading:0,preload:null};if(r=i.querySelector(Vg(a)))o.loading=5;else{n=$t({rel:"stylesheet",href:n,"data-precedence":t},e),(e=Li.get(a))&&$A(n,e);var l=r=i.createElement("link");Ie(l),Qe(l,"link",n),l._p=new Promise(function(u,h){l.onload=u,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Gp(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:o},s.set(a,r)}}}function pL(n,t){Ua.X(n,t);var e=Mh;if(e&&n){var i=jc(e).hoistableScripts,s=Rh(n),a=i.get(s);a||(a=e.querySelector($g(s)),a||(n=$t({src:n,async:!0},t),(t=Li.get(s))&&qA(n,t),a=e.createElement("script"),Ie(a),Qe(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(s,a))}}function mL(n,t){Ua.M(n,t);var e=Mh;if(e&&n){var i=jc(e).hoistableScripts,s=Rh(n),a=i.get(s);a||(a=e.querySelector($g(s)),a||(n=$t({src:n,async:!0,type:"module"},t),(t=Li.get(s))&&qA(n,t),a=e.createElement("script"),Ie(a),Qe(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(s,a))}}function e_(n,t,e,i){var s=(s=Gr.current)?Qm(s):null;if(!s)throw Error(q(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=bh(e.href),e=jc(s).hoistableStyles,i=e.get(t),i||(i={type:"style",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=bh(e.href);var a=jc(s).hoistableStyles,r=a.get(n);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(n,r),(a=s.querySelector(Vg(n)))&&!a._p&&(r.instance=a,r.state.loading=5),Li.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},Li.set(n,e),a||yL(s,n,e,r.state))),t&&i===null)throw Error(q(528,""));return r}if(t&&i!==null)throw Error(q(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Rh(e),e=jc(s).hoistableScripts,i=e.get(t),i||(i={type:"script",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(q(444,n))}}function bh(n){return'href="'+Ei(n)+'"'}function Vg(n){return'link[rel="stylesheet"]['+n+"]"}function gT(n){return $t({},n,{"data-precedence":n.precedence,precedence:null})}function yL(n,t,e,i){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=n.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Qe(t,"link",e),Ie(t),n.head.appendChild(t))}function Rh(n){return'[src="'+Ei(n)+'"]'}function $g(n){return"script[async]"+n}function n_(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var i=n.querySelector('style[data-href~="'+Ei(e.href)+'"]');if(i)return t.instance=i,Ie(i),i;var s=$t({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),Ie(i),Qe(i,"style",s),Gp(i,e.precedence,n),t.instance=i;case"stylesheet":s=bh(e.href);var a=n.querySelector(Vg(s));if(a)return t.state.loading|=4,t.instance=a,Ie(a),a;i=gT(e),(s=Li.get(s))&&$A(i,s),a=(n.ownerDocument||n).createElement("link"),Ie(a);var r=a;return r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),Qe(a,"link",i),t.state.loading|=4,Gp(a,e.precedence,n),t.instance=a;case"script":return a=Rh(e.src),(s=n.querySelector($g(a)))?(t.instance=s,Ie(s),s):(i=e,(s=Li.get(a))&&(i=$t({},e),qA(i,s)),n=n.ownerDocument||n,s=n.createElement("script"),Ie(s),Qe(s,"link",i),n.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(q(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Gp(i,e.precedence,n));return t.instance}function Gp(n,t,e){for(var i=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,a=s,r=0;r<i.length;r++){var o=i[r];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(n,a.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function $A(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function qA(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var Vp=null;function i_(n,t,e){if(Vp===null){var i=new Map,s=Vp=new Map;s.set(e,i)}else s=Vp,i=s.get(e),i||(i=new Map,s.set(e,i));if(i.has(n))return i;for(i.set(n,null),e=e.getElementsByTagName(n),s=0;s<e.length;s++){var a=e[s];if(!(a[Og]||a[ln]||n==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(t)||"";r=n+r;var o=i.get(r);o?o.push(a):i.set(r,[a])}}return i}function s_(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function bL(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function pT(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var qd=null;function vL(){}function AL(n,t,e){if(qd===null)throw Error(q(475));var i=qd;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=bh(e.href),a=n.querySelector(Vg(s));if(a){n=a._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=Jm.bind(i),n.then(i,i)),t.state.loading|=4,t.instance=a,Ie(a);return}a=n.ownerDocument||n,e=gT(e),(s=Li.get(s))&&$A(e,s),a=a.createElement("link"),Ie(a);var r=a;r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),Qe(a,"link",e),t.instance=a}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,n),(n=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Jm.bind(i),n.addEventListener("load",t),n.addEventListener("error",t))}}function wL(){if(qd===null)throw Error(q(475));var n=qd;return n.stylesheets&&n.count===0&&gv(n,n.stylesheets),0<n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&&gv(n,n.stylesheets),n.unsuspend){var i=n.unsuspend;n.unsuspend=null,i()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function Jm(){if(this.count--,this.count===0){if(this.stylesheets)gv(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var t0=null;function gv(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,t0=new Map,t.forEach(SL,n),t0=null,Jm.call(n))}function SL(n,t){if(!(t.state.loading&4)){var e=t0.get(n);if(e)var i=e.get(null);else{e=new Map,t0.set(n,e);for(var s=n.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var r=s[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(e.set(r.dataset.precedence,r),i=r)}i&&e.set(null,i)}s=t.instance,r=s.getAttribute("data-precedence"),a=e.get(r)||i,a===i&&e.set(null,s),e.set(r,s),this.count++,i=Jm.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),a?a.parentNode.insertBefore(s,a.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(s,n.firstChild)),t.state.loading|=4}}var Xd={$$typeof:_a,Provider:null,Consumer:null,_currentValue:zl,_currentValue2:zl,_threadCount:0};function _L(n,t,e,i,s,a,r,o){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xy(0),this.hiddenUpdates=xy(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function mT(n,t,e,i,s,a,r,o,l,u,h,d){return n=new _L(n,t,e,r,o,l,u,d),t=1,a===!0&&(t|=24),a=si(3,null,null,t),n.current=a,a.stateNode=n,t=AA(),t.refCount++,n.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:e,cache:t},SA(a),n}function yT(n){return n?(n=zc,n):zc}function bT(n,t,e,i,s,a){s=yT(s),i.context===null?i.context=s:i.pendingContext=s,i=Vr(t),i.payload={element:e},a=a===void 0?null:a,a!==null&&(i.callback=a),e=$r(n,i,t),e!==null&&(li(e,n,t),Cd(e,n,t))}function a_(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function XA(n,t){a_(n,t),(n=n.alternate)&&a_(n,t)}function vT(n){if(n.tag===13){var t=Th(n,67108864);t!==null&&li(t,n,67108864),XA(n,67108864)}}var e0=!0;function xL(n,t,e,i){var s=lt.T;lt.T=null;var a=Mt.p;try{Mt.p=2,YA(n,t,e,i)}finally{Mt.p=a,lt.T=s}}function EL(n,t,e,i){var s=lt.T;lt.T=null;var a=Mt.p;try{Mt.p=8,YA(n,t,e,i)}finally{Mt.p=a,lt.T=s}}function YA(n,t,e,i){if(e0){var s=pv(i);if(s===null)eb(n,t,i,n0,e),r_(n,i);else if(CL(s,n,t,e,i))i.stopPropagation();else if(r_(n,i),t&4&&-1<TL.indexOf(n)){for(;s!==null;){var a=Eh(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=bo(a.pendingLanes);if(r!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;r;){var l=1<<31-ri(r);o.entanglements[1]|=l,r&=~l}Os(a),!(Ot&6)&&(qm=Rs()+500,Gg(0))}}break;case 13:o=Th(a,2),o!==null&&li(o,a,2),ty(),XA(a,2)}if(a=pv(i),a===null&&eb(n,t,i,n0,e),a===s)break;s=a}s!==null&&i.stopPropagation()}else eb(n,t,i,null,e)}}function pv(n){return n=uA(n),KA(n)}var n0=null;function KA(n){if(n0=null,n=Rc(n),n!==null){var t=Ng(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=Vx(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return n0=n,null}function AT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hD()){case Yx:return 2;case Kx:return 8;case Nm:case dD:return 32;case Wx:return 268435456;default:return 32}default:return 32}}var mv=!1,Yr=null,Kr=null,Wr=null,Yd=new Map,Kd=new Map,tr=[],TL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(n,t){switch(n){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Yd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(t.pointerId)}}function Uh(n,t,e,i,s,a){return n===null||n.nativeEvent!==a?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Eh(t),t!==null&&vT(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function CL(n,t,e,i,s){switch(t){case"focusin":return Yr=Uh(Yr,n,t,e,i,s),!0;case"dragenter":return Kr=Uh(Kr,n,t,e,i,s),!0;case"mouseover":return Wr=Uh(Wr,n,t,e,i,s),!0;case"pointerover":var a=s.pointerId;return Yd.set(a,Uh(Yd.get(a)||null,n,t,e,i,s)),!0;case"gotpointercapture":return a=s.pointerId,Kd.set(a,Uh(Kd.get(a)||null,n,t,e,i,s)),!0}return!1}function wT(n){var t=Rc(n.target);if(t!==null){var e=Ng(t);if(e!==null){if(t=e.tag,t===13){if(t=Vx(e),t!==null){n.blockedOn=t,AD(n.priority,function(){if(e.tag===13){var i=oi();i=rA(i);var s=Th(e,i);s!==null&&li(s,e,i),XA(e,i)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $p(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=pv(n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);kb=i,e.target.dispatchEvent(i),kb=null}else return t=Eh(e),t!==null&&vT(t),n.blockedOn=e,!1;t.shift()}return!0}function o_(n,t,e){$p(n)&&e.delete(t)}function ML(){mv=!1,Yr!==null&&$p(Yr)&&(Yr=null),Kr!==null&&$p(Kr)&&(Kr=null),Wr!==null&&$p(Wr)&&(Wr=null),Yd.forEach(o_),Kd.forEach(o_)}function gp(n,t){n.blockedOn===t&&(n.blockedOn=null,mv||(mv=!0,Re.unstable_scheduleCallback(Re.unstable_NormalPriority,ML)))}var pp=null;function l_(n){pp!==n&&(pp=n,Re.unstable_scheduleCallback(Re.unstable_NormalPriority,function(){pp===n&&(pp=null);for(var t=0;t<n.length;t+=3){var e=n[t],i=n[t+1],s=n[t+2];if(typeof i!="function"){if(KA(i||e)===null)continue;break}var a=Eh(e);a!==null&&(n.splice(t,3),t-=3,Kb(a,{pending:!0,data:s,method:e.method,action:i},i,s))}}))}function Wd(n){function t(l){return gp(l,n)}Yr!==null&&gp(Yr,n),Kr!==null&&gp(Kr,n),Wr!==null&&gp(Wr,n),Yd.forEach(t),Kd.forEach(t);for(var e=0;e<tr.length;e++){var i=tr[e];i.blockedOn===n&&(i.blockedOn=null)}for(;0<tr.length&&(e=tr[0],e.blockedOn===null);)wT(e),e.blockedOn===null&&tr.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(i=0;i<e.length;i+=3){var s=e[i],a=e[i+1],r=s[Pn]||null;if(typeof a=="function")r||l_(e);else if(r){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,r=a[Pn]||null)o=r.formAction;else if(KA(s)!==null)continue}else o=r.action;typeof o=="function"?e[i+1]=o:(e.splice(i,3),i-=3),l_(e)}}}function WA(n){this._internalRoot=n}sy.prototype.render=WA.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(q(409));var e=t.current,i=oi();bT(e,i,n,t,null,null)};sy.prototype.unmount=WA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;bT(n.current,2,null,n,null,null),ty(),t[xh]=null}};function sy(n){this._internalRoot=n}sy.prototype.unstable_scheduleHydration=function(n){if(n){var t=eE();n={blockedOn:null,target:n,priority:t};for(var e=0;e<tr.length&&t!==0&&t<tr[e].priority;e++);tr.splice(e,0,n),e===0&&wT(n)}};var c_=jx.version;if(c_!=="19.1.0")throw Error(q(527,c_,"19.1.0"));Mt.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(q(188)):(n=Object.keys(n).join(","),Error(q(268,n)));return n=sD(t),n=n!==null?$x(n):null,n=n===null?null:n.stateNode,n};var RL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:lt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{Dg=mp.inject(RL),ai=mp}catch{}}j0.createRoot=function(n,t){if(!Gx(n))throw Error(q(299));var e=!1,i="",s=m2,a=y2,r=b2,o=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(o=t.unstable_transitionCallbacks)),t=mT(n,1,!1,null,null,e,i,s,a,r,o,null),n[xh]=t.current,VA(n),new WA(t)};j0.hydrateRoot=function(n,t,e){if(!Gx(n))throw Error(q(299));var i=!1,s="",a=m2,r=y2,o=b2,l=null,u=null;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks),e.formState!==void 0&&(u=e.formState)),t=mT(n,1,!0,t,e??null,i,s,a,r,o,l,u),t.context=yT(null),e=t.current,i=oi(),i=rA(i),s=Vr(i),s.callback=null,$r(e,s,i),e=i,t.current.lanes=e,kg(t,e),Os(t),n[xh]=t.current,VA(n),new sy(t)};j0.version="19.1.0";function ST(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ST)}catch(n){console.error(n)}}ST(),Px.exports=j0;var NL=Px.exports;const DL=Z1(NL);function _n(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=_n(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var _T={exports:{}},xT={},ET={exports:{}},TT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=D;function LL(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var kL=typeof Object.is=="function"?Object.is:LL,OL=vh.useState,zL=vh.useEffect,PL=vh.useLayoutEffect,HL=vh.useDebugValue;function IL(n,t){var e=t(),i=OL({inst:{value:e,getSnapshot:t}}),s=i[0].inst,a=i[1];return PL(function(){s.value=e,s.getSnapshot=t,ib(s)&&a({inst:s})},[n,e,t]),zL(function(){return ib(s)&&a({inst:s}),n(function(){ib(s)&&a({inst:s})})},[n]),HL(e),e}function ib(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!kL(n,e)}catch{return!0}}function BL(n,t){return t()}var FL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BL:IL;TT.useSyncExternalStore=vh.useSyncExternalStore!==void 0?vh.useSyncExternalStore:FL;ET.exports=TT;var UL=ET.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=D,jL=UL;function GL(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var VL=typeof Object.is=="function"?Object.is:GL,$L=jL.useSyncExternalStore,qL=ay.useRef,XL=ay.useEffect,YL=ay.useMemo,KL=ay.useDebugValue;xT.useSyncExternalStoreWithSelector=function(n,t,e,i,s){var a=qL(null);if(a.current===null){var r={hasValue:!1,value:null};a.current=r}else r=a.current;a=YL(function(){function l(g){if(!u){if(u=!0,h=g,g=i(g),s!==void 0&&r.hasValue){var b=r.value;if(s(b,g))return d=b}return d=g}if(b=d,VL(h,g))return b;var m=i(g);return s!==void 0&&s(b,m)?(h=g,b):(h=g,d=m)}var u=!1,h,d,f=e===void 0?null:e;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,e,i,s]);var o=$L(n,a[0],a[1]);return XL(function(){r.hasValue=!0,r.value=o},[o]),KL(o),o};_T.exports=xT;var WL=_T.exports;const ZL=Z1(WL),QL={},u_=n=>{let t;const e=new Set,i=(h,d)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const g=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),e.forEach(b=>b(t,g))}},s=()=>t,l={setState:i,getState:s,getInitialState:()=>u,subscribe:h=>(e.add(h),()=>e.delete(h)),destroy:()=>{(QL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},u=t=n(i,s,l);return l},JL=n=>n?u_(n):u_,{useDebugValue:tk}=j,{useSyncExternalStoreWithSelector:ek}=ZL,nk=n=>n;function CT(n,t=nk,e){const i=ek(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return tk(i),i}const h_=(n,t)=>{const e=JL(n),i=(s,a=t)=>CT(e,s,a);return Object.assign(i,e),i},ik=(n,t)=>n?h_(n,t):h_;function un(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,s]of n)if(!Object.is(s,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}var sk={value:()=>{}};function ry(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new qp(e)}function qp(n){this._=n}function ak(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",s=e.indexOf(".");if(s>=0&&(i=e.slice(s+1),e=e.slice(0,s)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}qp.prototype=ry.prototype={constructor:qp,on:function(n,t){var e=this._,i=ak(n+"",e),s,a=-1,r=i.length;if(arguments.length<2){for(;++a<r;)if((s=(n=i[a]).type)&&(s=rk(e[s],n.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(s=(n=i[a]).type)e[s]=d_(e[s],n.name,t);else if(t==null)for(s in e)e[s]=d_(e[s],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new qp(n)},call:function(n,t){if((s=arguments.length-2)>0)for(var e=new Array(s),i=0,s,a;i<s;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],i=0,s=a.length;i<s;++i)a[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,a=i.length;s<a;++s)i[s].value.apply(t,e)}};function rk(n,t){for(var e=0,i=n.length,s;e<i;++e)if((s=n[e]).name===t)return s.value}function d_(n,t,e){for(var i=0,s=n.length;i<s;++i)if(n[i].name===t){n[i]=sk,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var yv="http://www.w3.org/1999/xhtml";const f_={svg:"http://www.w3.org/2000/svg",xhtml:yv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oy(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),f_.hasOwnProperty(t)?{space:f_[t],local:n}:n}function ok(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===yv&&t.documentElement.namespaceURI===yv?t.createElement(n):t.createElementNS(e,n)}}function lk(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function MT(n){var t=oy(n);return(t.local?lk:ok)(t)}function ck(){}function ZA(n){return n==null?ck:function(){return this.querySelector(n)}}function uk(n){typeof n!="function"&&(n=ZA(n));for(var t=this._groups,e=t.length,i=new Array(e),s=0;s<e;++s)for(var a=t[s],r=a.length,o=i[s]=new Array(r),l,u,h=0;h<r;++h)(l=a[h])&&(u=n.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),o[h]=u);return new hi(i,this._parents)}function hk(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function dk(){return[]}function RT(n){return n==null?dk:function(){return this.querySelectorAll(n)}}function fk(n){return function(){return hk(n.apply(this,arguments))}}function gk(n){typeof n=="function"?n=fk(n):n=RT(n);for(var t=this._groups,e=t.length,i=[],s=[],a=0;a<e;++a)for(var r=t[a],o=r.length,l,u=0;u<o;++u)(l=r[u])&&(i.push(n.call(l,l.__data__,u,r)),s.push(l));return new hi(i,s)}function NT(n){return function(){return this.matches(n)}}function DT(n){return function(t){return t.matches(n)}}var pk=Array.prototype.find;function mk(n){return function(){return pk.call(this.children,n)}}function yk(){return this.firstElementChild}function bk(n){return this.select(n==null?yk:mk(typeof n=="function"?n:DT(n)))}var vk=Array.prototype.filter;function Ak(){return Array.from(this.children)}function wk(n){return function(){return vk.call(this.children,n)}}function Sk(n){return this.selectAll(n==null?Ak:wk(typeof n=="function"?n:DT(n)))}function _k(n){typeof n!="function"&&(n=NT(n));for(var t=this._groups,e=t.length,i=new Array(e),s=0;s<e;++s)for(var a=t[s],r=a.length,o=i[s]=[],l,u=0;u<r;++u)(l=a[u])&&n.call(l,l.__data__,u,a)&&o.push(l);return new hi(i,this._parents)}function LT(n){return new Array(n.length)}function xk(){return new hi(this._enter||this._groups.map(LT),this._parents)}function i0(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}i0.prototype={constructor:i0,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Ek(n){return function(){return n}}function Tk(n,t,e,i,s,a){for(var r=0,o,l=t.length,u=a.length;r<u;++r)(o=t[r])?(o.__data__=a[r],i[r]=o):e[r]=new i0(n,a[r]);for(;r<l;++r)(o=t[r])&&(s[r]=o)}function Ck(n,t,e,i,s,a,r){var o,l,u=new Map,h=t.length,d=a.length,f=new Array(h),g;for(o=0;o<h;++o)(l=t[o])&&(f[o]=g=r.call(l,l.__data__,o,t)+"",u.has(g)?s[o]=l:u.set(g,l));for(o=0;o<d;++o)g=r.call(n,a[o],o,a)+"",(l=u.get(g))?(i[o]=l,l.__data__=a[o],u.delete(g)):e[o]=new i0(n,a[o]);for(o=0;o<h;++o)(l=t[o])&&u.get(f[o])===l&&(s[o]=l)}function Mk(n){return n.__data__}function Rk(n,t){if(!arguments.length)return Array.from(this,Mk);var e=t?Ck:Tk,i=this._parents,s=this._groups;typeof n!="function"&&(n=Ek(n));for(var a=s.length,r=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var h=i[u],d=s[u],f=d.length,g=Nk(n.call(h,h&&h.__data__,u,i)),b=g.length,m=o[u]=new Array(b),S=r[u]=new Array(b),p=l[u]=new Array(f);e(h,d,m,S,p,g,t);for(var y=0,A=0,w,T;y<b;++y)if(w=m[y]){for(y>=A&&(A=y+1);!(T=S[A])&&++A<b;);w._next=T||null}}return r=new hi(r,i),r._enter=o,r._exit=l,r}function Nk(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Dk(){return new hi(this._exit||this._groups.map(LT),this._parents)}function Lk(n,t,e){var i=this.enter(),s=this,a=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(s=t(s),s&&(s=s.selection())),e==null?a.remove():e(a),i&&s?i.merge(s).order():s}function kk(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,s=e.length,a=i.length,r=Math.min(s,a),o=new Array(s),l=0;l<r;++l)for(var u=e[l],h=i[l],d=u.length,f=o[l]=new Array(d),g,b=0;b<d;++b)(g=u[b]||h[b])&&(f[b]=g);for(;l<s;++l)o[l]=e[l];return new hi(o,this._parents)}function Ok(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],s=i.length-1,a=i[s],r;--s>=0;)(r=i[s])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function zk(n){n||(n=Pk);function t(d,f){return d&&f?n(d.__data__,f.__data__):!d-!f}for(var e=this._groups,i=e.length,s=new Array(i),a=0;a<i;++a){for(var r=e[a],o=r.length,l=s[a]=new Array(o),u,h=0;h<o;++h)(u=r[h])&&(l[h]=u);l.sort(t)}return new hi(s,this._parents).order()}function Pk(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Hk(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Ik(){return Array.from(this)}function Bk(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],s=0,a=i.length;s<a;++s){var r=i[s];if(r)return r}return null}function Fk(){let n=0;for(const t of this)++n;return n}function Uk(){return!this.node()}function jk(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var s=t[e],a=0,r=s.length,o;a<r;++a)(o=s[a])&&n.call(o,o.__data__,a,s);return this}function Gk(n){return function(){this.removeAttribute(n)}}function Vk(n){return function(){this.removeAttributeNS(n.space,n.local)}}function $k(n,t){return function(){this.setAttribute(n,t)}}function qk(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function Xk(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function Yk(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Kk(n,t){var e=oy(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?Vk:Gk:typeof t=="function"?e.local?Yk:Xk:e.local?qk:$k)(e,t))}function kT(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Wk(n){return function(){this.style.removeProperty(n)}}function Zk(n,t,e){return function(){this.style.setProperty(n,t,e)}}function Qk(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function Jk(n,t,e){return arguments.length>1?this.each((t==null?Wk:typeof t=="function"?Qk:Zk)(n,t,e??"")):Ah(this.node(),n)}function Ah(n,t){return n.style.getPropertyValue(t)||kT(n).getComputedStyle(n,null).getPropertyValue(t)}function t5(n){return function(){delete this[n]}}function e5(n,t){return function(){this[n]=t}}function n5(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function i5(n,t){return arguments.length>1?this.each((t==null?t5:typeof t=="function"?n5:e5)(n,t)):this.node()[n]}function OT(n){return n.trim().split(/^|\s+/)}function QA(n){return n.classList||new zT(n)}function zT(n){this._node=n,this._names=OT(n.getAttribute("class")||"")}zT.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function PT(n,t){for(var e=QA(n),i=-1,s=t.length;++i<s;)e.add(t[i])}function HT(n,t){for(var e=QA(n),i=-1,s=t.length;++i<s;)e.remove(t[i])}function s5(n){return function(){PT(this,n)}}function a5(n){return function(){HT(this,n)}}function r5(n,t){return function(){(t.apply(this,arguments)?PT:HT)(this,n)}}function o5(n,t){var e=OT(n+"");if(arguments.length<2){for(var i=QA(this.node()),s=-1,a=e.length;++s<a;)if(!i.contains(e[s]))return!1;return!0}return this.each((typeof t=="function"?r5:t?s5:a5)(e,t))}function l5(){this.textContent=""}function c5(n){return function(){this.textContent=n}}function u5(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function h5(n){return arguments.length?this.each(n==null?l5:(typeof n=="function"?u5:c5)(n)):this.node().textContent}function d5(){this.innerHTML=""}function f5(n){return function(){this.innerHTML=n}}function g5(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function p5(n){return arguments.length?this.each(n==null?d5:(typeof n=="function"?g5:f5)(n)):this.node().innerHTML}function m5(){this.nextSibling&&this.parentNode.appendChild(this)}function y5(){return this.each(m5)}function b5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function v5(){return this.each(b5)}function A5(n){var t=typeof n=="function"?n:MT(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function w5(){return null}function S5(n,t){var e=typeof n=="function"?n:MT(n),i=t==null?w5:typeof t=="function"?t:ZA(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function _5(){var n=this.parentNode;n&&n.removeChild(this)}function x5(){return this.each(_5)}function E5(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function T5(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function C5(n){return this.select(n?T5:E5)}function M5(n){return arguments.length?this.property("__data__",n):this.node().__data__}function R5(n){return function(t){n.call(this,t,this.__data__)}}function N5(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function D5(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,s=t.length,a;e<s;++e)a=t[e],(!n.type||a.type===n.type)&&a.name===n.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function L5(n,t,e){return function(){var i=this.__on,s,a=R5(t);if(i){for(var r=0,o=i.length;r<o;++r)if((s=i[r]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=e),s.value=t;return}}this.addEventListener(n.type,a,e),s={type:n.type,name:n.name,value:t,listener:a,options:e},i?i.push(s):this.__on=[s]}}function k5(n,t,e){var i=N5(n+""),s,a=i.length,r;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,h;l<u;++l)for(s=0,h=o[l];s<a;++s)if((r=i[s]).type===h.type&&r.name===h.name)return h.value}return}for(o=t?L5:D5,s=0;s<a;++s)this.each(o(i[s],t,e));return this}function IT(n,t,e){var i=kT(n),s=i.CustomEvent;typeof s=="function"?s=new s(t,e):(s=i.document.createEvent("Event"),e?(s.initEvent(t,e.bubbles,e.cancelable),s.detail=e.detail):s.initEvent(t,!1,!1)),n.dispatchEvent(s)}function O5(n,t){return function(){return IT(this,n,t)}}function z5(n,t){return function(){return IT(this,n,t.apply(this,arguments))}}function P5(n,t){return this.each((typeof t=="function"?z5:O5)(n,t))}function*H5(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],s=0,a=i.length,r;s<a;++s)(r=i[s])&&(yield r)}var BT=[null];function hi(n,t){this._groups=n,this._parents=t}function qg(){return new hi([[document.documentElement]],BT)}function I5(){return this}hi.prototype=qg.prototype={constructor:hi,select:uk,selectAll:gk,selectChild:bk,selectChildren:Sk,filter:_k,data:Rk,enter:xk,exit:Dk,join:Lk,merge:kk,selection:I5,order:Ok,sort:zk,call:Hk,nodes:Ik,node:Bk,size:Fk,empty:Uk,each:jk,attr:Kk,style:Jk,property:i5,classed:o5,text:h5,html:p5,raise:y5,lower:v5,append:A5,insert:S5,remove:x5,clone:C5,datum:M5,on:k5,dispatch:P5,[Symbol.iterator]:H5};function Yi(n){return typeof n=="string"?new hi([[document.querySelector(n)]],[document.documentElement]):new hi([[n]],BT)}function B5(n){let t;for(;t=n.sourceEvent;)n=t;return n}function cs(n,t){if(n=B5(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}}return[n.pageX,n.pageY]}const F5={passive:!1},Zd={capture:!0,passive:!1};function sb(n){n.stopImmediatePropagation()}function Wc(n){n.preventDefault(),n.stopImmediatePropagation()}function FT(n){var t=n.document.documentElement,e=Yi(n).on("dragstart.drag",Wc,Zd);"onselectstart"in t?e.on("selectstart.drag",Wc,Zd):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function UT(n,t){var e=n.document.documentElement,i=Yi(n).on("dragstart.drag",null);t&&(i.on("click.drag",Wc,Zd),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const yp=n=>()=>n;function bv(n,{sourceEvent:t,subject:e,target:i,identifier:s,active:a,x:r,y:o,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}bv.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function U5(n){return!n.ctrlKey&&!n.button}function j5(){return this.parentNode}function G5(n,t){return t??{x:n.x,y:n.y}}function V5(){return navigator.maxTouchPoints||"ontouchstart"in this}function $5(){var n=U5,t=j5,e=G5,i=V5,s={},a=ry("start","drag","end"),r=0,o,l,u,h,d=0;function f(w){w.on("mousedown.drag",g).filter(i).on("touchstart.drag",S).on("touchmove.drag",p,F5).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,T){if(!(h||!n.call(this,w,T))){var C=A(this,t.call(this,w,T),w,T,"mouse");C&&(Yi(w.view).on("mousemove.drag",b,Zd).on("mouseup.drag",m,Zd),FT(w.view),sb(w),u=!1,o=w.clientX,l=w.clientY,C("start",w))}}function b(w){if(Wc(w),!u){var T=w.clientX-o,C=w.clientY-l;u=T*T+C*C>d}s.mouse("drag",w)}function m(w){Yi(w.view).on("mousemove.drag mouseup.drag",null),UT(w.view,u),Wc(w),s.mouse("end",w)}function S(w,T){if(n.call(this,w,T)){var C=w.changedTouches,M=t.call(this,w,T),L=C.length,k,P;for(k=0;k<L;++k)(P=A(this,M,w,T,C[k].identifier,C[k]))&&(sb(w),P("start",w,C[k]))}}function p(w){var T=w.changedTouches,C=T.length,M,L;for(M=0;M<C;++M)(L=s[T[M].identifier])&&(Wc(w),L("drag",w,T[M]))}function y(w){var T=w.changedTouches,C=T.length,M,L;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),M=0;M<C;++M)(L=s[T[M].identifier])&&(sb(w),L("end",w,T[M]))}function A(w,T,C,M,L,k){var P=a.copy(),H=cs(k||C,T),$,G,R;if((R=e.call(w,new bv("beforestart",{sourceEvent:C,target:f,identifier:L,active:r,x:H[0],y:H[1],dx:0,dy:0,dispatch:P}),M))!=null)return $=R.x-H[0]||0,G=R.y-H[1]||0,function B(E,N,z){var O=H,I;switch(E){case"start":s[L]=B,I=r++;break;case"end":delete s[L],--r;case"drag":H=cs(z||N,T),I=r;break}P.call(E,w,new bv(E,{sourceEvent:N,subject:R,target:f,identifier:L,active:I,x:H[0]+$,y:H[1]+G,dx:H[0]-O[0],dy:H[1]-O[1],dispatch:P}),M)}}return f.filter=function(w){return arguments.length?(n=typeof w=="function"?w:yp(!!w),f):n},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:yp(w),f):t},f.subject=function(w){return arguments.length?(e=typeof w=="function"?w:yp(w),f):e},f.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:yp(!!w),f):i},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function JA(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function jT(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function Xg(){}var Qd=.7,s0=1/Qd,Zc="\\s*([+-]?\\d+)\\s*",Jd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ds="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",q5=/^#([0-9a-f]{3,8})$/,X5=new RegExp(`^rgb\\(${Zc},${Zc},${Zc}\\)$`),Y5=new RegExp(`^rgb\\(${Ds},${Ds},${Ds}\\)$`),K5=new RegExp(`^rgba\\(${Zc},${Zc},${Zc},${Jd}\\)$`),W5=new RegExp(`^rgba\\(${Ds},${Ds},${Ds},${Jd}\\)$`),Z5=new RegExp(`^hsl\\(${Jd},${Ds},${Ds}\\)$`),Q5=new RegExp(`^hsla\\(${Jd},${Ds},${Ds},${Jd}\\)$`),g_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JA(Xg,tf,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:p_,formatHex:p_,formatHex8:J5,formatHsl:tO,formatRgb:m_,toString:m_});function p_(){return this.rgb().formatHex()}function J5(){return this.rgb().formatHex8()}function tO(){return GT(this).formatHsl()}function m_(){return this.rgb().formatRgb()}function tf(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=q5.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?y_(t):e===3?new zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?bp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?bp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=X5.exec(n))?new zn(t[1],t[2],t[3],1):(t=Y5.exec(n))?new zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=K5.exec(n))?bp(t[1],t[2],t[3],t[4]):(t=W5.exec(n))?bp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Z5.exec(n))?A_(t[1],t[2]/100,t[3]/100,1):(t=Q5.exec(n))?A_(t[1],t[2]/100,t[3]/100,t[4]):g_.hasOwnProperty(n)?y_(g_[n]):n==="transparent"?new zn(NaN,NaN,NaN,0):null}function y_(n){return new zn(n>>16&255,n>>8&255,n&255,1)}function bp(n,t,e,i){return i<=0&&(n=t=e=NaN),new zn(n,t,e,i)}function eO(n){return n instanceof Xg||(n=tf(n)),n?(n=n.rgb(),new zn(n.r,n.g,n.b,n.opacity)):new zn}function vv(n,t,e,i){return arguments.length===1?eO(n):new zn(n,t,e,i??1)}function zn(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}JA(zn,vv,jT(Xg,{brighter(n){return n=n==null?s0:Math.pow(s0,n),new zn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Qd:Math.pow(Qd,n),new zn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new zn(jl(this.r),jl(this.g),jl(this.b),a0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b_,formatHex:b_,formatHex8:nO,formatRgb:v_,toString:v_}));function b_(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function nO(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function v_(){const n=a0(this.opacity);return`${n===1?"rgb(":"rgba("}${jl(this.r)}, ${jl(this.g)}, ${jl(this.b)}${n===1?")":`, ${n})`}`}function a0(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function jl(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Co(n){return n=jl(n),(n<16?"0":"")+n.toString(16)}function A_(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Ki(n,t,e,i)}function GT(n){if(n instanceof Ki)return new Ki(n.h,n.s,n.l,n.opacity);if(n instanceof Xg||(n=tf(n)),!n)return new Ki;if(n instanceof Ki)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,s=Math.min(t,e,i),a=Math.max(t,e,i),r=NaN,o=a-s,l=(a+s)/2;return o?(t===a?r=(e-i)/o+(e<i)*6:e===a?r=(i-t)/o+2:r=(t-e)/o+4,o/=l<.5?a+s:2-a-s,r*=60):o=l>0&&l<1?0:r,new Ki(r,o,l,n.opacity)}function iO(n,t,e,i){return arguments.length===1?GT(n):new Ki(n,t,e,i??1)}function Ki(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}JA(Ki,iO,jT(Xg,{brighter(n){return n=n==null?s0:Math.pow(s0,n),new Ki(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Qd:Math.pow(Qd,n),new Ki(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,s=2*e-i;return new zn(ab(n>=240?n-240:n+120,s,i),ab(n,s,i),ab(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Ki(w_(this.h),vp(this.s),vp(this.l),a0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=a0(this.opacity);return`${n===1?"hsl(":"hsla("}${w_(this.h)}, ${vp(this.s)*100}%, ${vp(this.l)*100}%${n===1?")":`, ${n})`}`}}));function w_(n){return n=(n||0)%360,n<0?n+360:n}function vp(n){return Math.max(0,Math.min(1,n||0))}function ab(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const VT=n=>()=>n;function sO(n,t){return function(e){return n+e*t}}function aO(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function rO(n){return(n=+n)==1?$T:function(t,e){return e-t?aO(t,e,n):VT(isNaN(t)?e:t)}}function $T(n,t){var e=t-n;return e?sO(n,e):VT(isNaN(n)?t:n)}const S_=function n(t){var e=rO(t);function i(s,a){var r=e((s=vv(s)).r,(a=vv(a)).r),o=e(s.g,a.g),l=e(s.b,a.b),u=$T(s.opacity,a.opacity);return function(h){return s.r=r(h),s.g=o(h),s.b=l(h),s.opacity=u(h),s+""}}return i.gamma=n,i}(1);function Ka(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var Av=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rb=new RegExp(Av.source,"g");function oO(n){return function(){return n}}function lO(n){return function(t){return n(t)+""}}function cO(n,t){var e=Av.lastIndex=rb.lastIndex=0,i,s,a,r=-1,o=[],l=[];for(n=n+"",t=t+"";(i=Av.exec(n))&&(s=rb.exec(t));)(a=s.index)>e&&(a=t.slice(e,a),o[r]?o[r]+=a:o[++r]=a),(i=i[0])===(s=s[0])?o[r]?o[r]+=s:o[++r]=s:(o[++r]=null,l.push({i:r,x:Ka(i,s)})),e=rb.lastIndex;return e<t.length&&(a=t.slice(e),o[r]?o[r]+=a:o[++r]=a),o.length<2?l[0]?lO(l[0].x):oO(t):(t=l.length,function(u){for(var h=0,d;h<t;++h)o[(d=l[h]).i]=d.x(u);return o.join("")})}var __=180/Math.PI,wv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qT(n,t,e,i,s,a){var r,o,l;return(r=Math.sqrt(n*n+t*t))&&(n/=r,t/=r),(l=n*e+t*i)&&(e-=n*l,i-=t*l),(o=Math.sqrt(e*e+i*i))&&(e/=o,i/=o,l/=o),n*i<t*e&&(n=-n,t=-t,l=-l,r=-r),{translateX:s,translateY:a,rotate:Math.atan2(t,n)*__,skewX:Math.atan(l)*__,scaleX:r,scaleY:o}}var Ap;function uO(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?wv:qT(t.a,t.b,t.c,t.d,t.e,t.f)}function hO(n){return n==null||(Ap||(Ap=document.createElementNS("http://www.w3.org/2000/svg","g")),Ap.setAttribute("transform",n),!(n=Ap.transform.baseVal.consolidate()))?wv:(n=n.matrix,qT(n.a,n.b,n.c,n.d,n.e,n.f))}function XT(n,t,e,i){function s(u){return u.length?u.pop()+" ":""}function a(u,h,d,f,g,b){if(u!==d||h!==f){var m=g.push("translate(",null,t,null,e);b.push({i:m-4,x:Ka(u,d)},{i:m-2,x:Ka(h,f)})}else(d||f)&&g.push("translate("+d+t+f+e)}function r(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(s(d)+"rotate(",null,i)-2,x:Ka(u,h)})):h&&d.push(s(d)+"rotate("+h+i)}function o(u,h,d,f){u!==h?f.push({i:d.push(s(d)+"skewX(",null,i)-2,x:Ka(u,h)}):h&&d.push(s(d)+"skewX("+h+i)}function l(u,h,d,f,g,b){if(u!==d||h!==f){var m=g.push(s(g)+"scale(",null,",",null,")");b.push({i:m-4,x:Ka(u,d)},{i:m-2,x:Ka(h,f)})}else(d!==1||f!==1)&&g.push(s(g)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=n(u),h=n(h),a(u.translateX,u.translateY,h.translateX,h.translateY,d,f),r(u.rotate,h.rotate,d,f),o(u.skewX,h.skewX,d,f),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(g){for(var b=-1,m=f.length,S;++b<m;)d[(S=f[b]).i]=S.x(g);return d.join("")}}}var dO=XT(uO,"px, ","px)","deg)"),fO=XT(hO,", ",")",")"),gO=1e-12;function x_(n){return((n=Math.exp(n))+1/n)/2}function pO(n){return((n=Math.exp(n))-1/n)/2}function mO(n){return((n=Math.exp(2*n))-1)/(n+1)}const yO=function n(t,e,i){function s(a,r){var o=a[0],l=a[1],u=a[2],h=r[0],d=r[1],f=r[2],g=h-o,b=d-l,m=g*g+b*b,S,p;if(m<gO)p=Math.log(f/u)/t,S=function(M){return[o+M*g,l+M*b,u*Math.exp(t*M*p)]};else{var y=Math.sqrt(m),A=(f*f-u*u+i*m)/(2*u*e*y),w=(f*f-u*u-i*m)/(2*f*e*y),T=Math.log(Math.sqrt(A*A+1)-A),C=Math.log(Math.sqrt(w*w+1)-w);p=(C-T)/t,S=function(M){var L=M*p,k=x_(T),P=u/(e*y)*(k*mO(t*L+T)-pO(T));return[o+P*g,l+P*b,u*k/x_(t*L+T)]}}return S.duration=p*1e3*t/Math.SQRT2,S}return s.rho=function(a){var r=Math.max(.001,+a),o=r*r,l=o*o;return n(r,o,l)},s}(Math.SQRT2,2,4);var wh=0,ed=0,jh=0,YT=1e3,r0,nd,o0=0,Xl=0,ly=0,ef=typeof performance=="object"&&performance.now?performance:Date,KT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function tw(){return Xl||(KT(bO),Xl=ef.now()+ly)}function bO(){Xl=0}function l0(){this._call=this._time=this._next=null}l0.prototype=WT.prototype={constructor:l0,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?tw():+e)+(t==null?0:+t),!this._next&&nd!==this&&(nd?nd._next=this:r0=this,nd=this),this._call=n,this._time=e,Sv()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sv())}};function WT(n,t,e){var i=new l0;return i.restart(n,t,e),i}function vO(){tw(),++wh;for(var n=r0,t;n;)(t=Xl-n._time)>=0&&n._call.call(void 0,t),n=n._next;--wh}function E_(){Xl=(o0=ef.now())+ly,wh=ed=0;try{vO()}finally{wh=0,wO(),Xl=0}}function AO(){var n=ef.now(),t=n-o0;t>YT&&(ly-=t,o0=n)}function wO(){for(var n,t=r0,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:r0=e);nd=n,Sv(i)}function Sv(n){if(!wh){ed&&(ed=clearTimeout(ed));var t=n-Xl;t>24?(n<1/0&&(ed=setTimeout(E_,n-ef.now()-ly)),jh&&(jh=clearInterval(jh))):(jh||(o0=ef.now(),jh=setInterval(AO,YT)),wh=1,KT(E_))}}function T_(n,t,e){var i=new l0;return t=t==null?0:+t,i.restart(s=>{i.stop(),n(s+t)},t,e),i}var SO=ry("start","end","cancel","interrupt"),_O=[],ZT=0,C_=1,_v=2,Xp=3,M_=4,xv=5,Yp=6;function cy(n,t,e,i,s,a){var r=n.__transition;if(!r)n.__transition={};else if(e in r)return;xO(n,e,{name:t,index:i,group:s,on:SO,tween:_O,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ZT})}function ew(n,t){var e=ns(n,t);if(e.state>ZT)throw new Error("too late; already scheduled");return e}function zs(n,t){var e=ns(n,t);if(e.state>Xp)throw new Error("too late; already running");return e}function ns(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function xO(n,t,e){var i=n.__transition,s;i[t]=e,e.timer=WT(a,0,e.time);function a(u){e.state=C_,e.timer.restart(r,e.delay,e.time),e.delay<=u&&r(u-e.delay)}function r(u){var h,d,f,g;if(e.state!==C_)return l();for(h in i)if(g=i[h],g.name===e.name){if(g.state===Xp)return T_(r);g.state===M_?(g.state=Yp,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete i[h]):+h<t&&(g.state=Yp,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete i[h])}if(T_(function(){e.state===Xp&&(e.state=M_,e.timer.restart(o,e.delay,e.time),o(u))}),e.state=_v,e.on.call("start",n,n.__data__,e.index,e.group),e.state===_v){for(e.state=Xp,s=new Array(f=e.tween.length),h=0,d=-1;h<f;++h)(g=e.tween[h].value.call(n,n.__data__,e.index,e.group))&&(s[++d]=g);s.length=d+1}}function o(u){for(var h=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(l),e.state=xv,1),d=-1,f=s.length;++d<f;)s[d].call(n,h);e.state===xv&&(e.on.call("end",n,n.__data__,e.index,e.group),l())}function l(){e.state=Yp,e.timer.stop(),delete i[t];for(var u in i)return;delete n.__transition}}function Kp(n,t){var e=n.__transition,i,s,a=!0,r;if(e){t=t==null?null:t+"";for(r in e){if((i=e[r]).name!==t){a=!1;continue}s=i.state>_v&&i.state<xv,i.state=Yp,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[r]}a&&delete n.__transition}}function EO(n){return this.each(function(){Kp(this,n)})}function TO(n,t){var e,i;return function(){var s=zs(this,n),a=s.tween;if(a!==e){i=e=a;for(var r=0,o=i.length;r<o;++r)if(i[r].name===t){i=i.slice(),i.splice(r,1);break}}s.tween=i}}function CO(n,t,e){var i,s;if(typeof e!="function")throw new Error;return function(){var a=zs(this,n),r=a.tween;if(r!==i){s=(i=r).slice();for(var o={name:t,value:e},l=0,u=s.length;l<u;++l)if(s[l].name===t){s[l]=o;break}l===u&&s.push(o)}a.tween=s}}function MO(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=ns(this.node(),e).tween,s=0,a=i.length,r;s<a;++s)if((r=i[s]).name===n)return r.value;return null}return this.each((t==null?TO:CO)(e,n,t))}function nw(n,t,e){var i=n._id;return n.each(function(){var s=zs(this,i);(s.value||(s.value={}))[t]=e.apply(this,arguments)}),function(s){return ns(s,i).value[t]}}function QT(n,t){var e;return(typeof t=="number"?Ka:t instanceof tf?S_:(e=tf(t))?(t=e,S_):cO)(n,t)}function RO(n){return function(){this.removeAttribute(n)}}function NO(n){return function(){this.removeAttributeNS(n.space,n.local)}}function DO(n,t,e){var i,s=e+"",a;return function(){var r=this.getAttribute(n);return r===s?null:r===i?a:a=t(i=r,e)}}function LO(n,t,e){var i,s=e+"",a;return function(){var r=this.getAttributeNS(n.space,n.local);return r===s?null:r===i?a:a=t(i=r,e)}}function kO(n,t,e){var i,s,a;return function(){var r,o=e(this),l;return o==null?void this.removeAttribute(n):(r=this.getAttribute(n),l=o+"",r===l?null:r===i&&l===s?a:(s=l,a=t(i=r,o)))}}function OO(n,t,e){var i,s,a;return function(){var r,o=e(this),l;return o==null?void this.removeAttributeNS(n.space,n.local):(r=this.getAttributeNS(n.space,n.local),l=o+"",r===l?null:r===i&&l===s?a:(s=l,a=t(i=r,o)))}}function zO(n,t){var e=oy(n),i=e==="transform"?fO:QT;return this.attrTween(n,typeof t=="function"?(e.local?OO:kO)(e,i,nw(this,"attr."+n,t)):t==null?(e.local?NO:RO)(e):(e.local?LO:DO)(e,i,t))}function PO(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function HO(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function IO(n,t){var e,i;function s(){var a=t.apply(this,arguments);return a!==i&&(e=(i=a)&&HO(n,a)),e}return s._value=t,s}function BO(n,t){var e,i;function s(){var a=t.apply(this,arguments);return a!==i&&(e=(i=a)&&PO(n,a)),e}return s._value=t,s}function FO(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=oy(n);return this.tween(e,(i.local?IO:BO)(i,t))}function UO(n,t){return function(){ew(this,n).delay=+t.apply(this,arguments)}}function jO(n,t){return t=+t,function(){ew(this,n).delay=t}}function GO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?UO:jO)(t,n)):ns(this.node(),t).delay}function VO(n,t){return function(){zs(this,n).duration=+t.apply(this,arguments)}}function $O(n,t){return t=+t,function(){zs(this,n).duration=t}}function qO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?VO:$O)(t,n)):ns(this.node(),t).duration}function XO(n,t){if(typeof t!="function")throw new Error;return function(){zs(this,n).ease=t}}function YO(n){var t=this._id;return arguments.length?this.each(XO(t,n)):ns(this.node(),t).ease}function KO(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;zs(this,n).ease=e}}function WO(n){if(typeof n!="function")throw new Error;return this.each(KO(this._id,n))}function ZO(n){typeof n!="function"&&(n=NT(n));for(var t=this._groups,e=t.length,i=new Array(e),s=0;s<e;++s)for(var a=t[s],r=a.length,o=i[s]=[],l,u=0;u<r;++u)(l=a[u])&&n.call(l,l.__data__,u,a)&&o.push(l);return new Ha(i,this._parents,this._name,this._id)}function QO(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,s=e.length,a=Math.min(i,s),r=new Array(i),o=0;o<a;++o)for(var l=t[o],u=e[o],h=l.length,d=r[o]=new Array(h),f,g=0;g<h;++g)(f=l[g]||u[g])&&(d[g]=f);for(;o<i;++o)r[o]=t[o];return new Ha(r,this._parents,this._name,this._id)}function JO(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function t4(n,t,e){var i,s,a=JO(t)?ew:zs;return function(){var r=a(this,n),o=r.on;o!==i&&(s=(i=o).copy()).on(t,e),r.on=s}}function e4(n,t){var e=this._id;return arguments.length<2?ns(this.node(),e).on.on(n):this.each(t4(e,n,t))}function n4(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function i4(){return this.on("end.remove",n4(this._id))}function s4(n){var t=this._name,e=this._id;typeof n!="function"&&(n=ZA(n));for(var i=this._groups,s=i.length,a=new Array(s),r=0;r<s;++r)for(var o=i[r],l=o.length,u=a[r]=new Array(l),h,d,f=0;f<l;++f)(h=o[f])&&(d=n.call(h,h.__data__,f,o))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,cy(u[f],t,e,f,u,ns(h,e)));return new Ha(a,this._parents,t,e)}function a4(n){var t=this._name,e=this._id;typeof n!="function"&&(n=RT(n));for(var i=this._groups,s=i.length,a=[],r=[],o=0;o<s;++o)for(var l=i[o],u=l.length,h,d=0;d<u;++d)if(h=l[d]){for(var f=n.call(h,h.__data__,d,l),g,b=ns(h,e),m=0,S=f.length;m<S;++m)(g=f[m])&&cy(g,t,e,m,f,b);a.push(f),r.push(h)}return new Ha(a,r,t,e)}var r4=qg.prototype.constructor;function o4(){return new r4(this._groups,this._parents)}function l4(n,t){var e,i,s;return function(){var a=Ah(this,n),r=(this.style.removeProperty(n),Ah(this,n));return a===r?null:a===e&&r===i?s:s=t(e=a,i=r)}}function JT(n){return function(){this.style.removeProperty(n)}}function c4(n,t,e){var i,s=e+"",a;return function(){var r=Ah(this,n);return r===s?null:r===i?a:a=t(i=r,e)}}function u4(n,t,e){var i,s,a;return function(){var r=Ah(this,n),o=e(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(n),Ah(this,n))),r===l?null:r===i&&l===s?a:(s=l,a=t(i=r,o))}}function h4(n,t){var e,i,s,a="style."+t,r="end."+a,o;return function(){var l=zs(this,n),u=l.on,h=l.value[a]==null?o||(o=JT(t)):void 0;(u!==e||s!==h)&&(i=(e=u).copy()).on(r,s=h),l.on=i}}function d4(n,t,e){var i=(n+="")=="transform"?dO:QT;return t==null?this.styleTween(n,l4(n,i)).on("end.style."+n,JT(n)):typeof t=="function"?this.styleTween(n,u4(n,i,nw(this,"style."+n,t))).each(h4(this._id,n)):this.styleTween(n,c4(n,i,t),e).on("end.style."+n,null)}function f4(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function g4(n,t,e){var i,s;function a(){var r=t.apply(this,arguments);return r!==s&&(i=(s=r)&&f4(n,r,e)),i}return a._value=t,a}function p4(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,g4(n,t,e??""))}function m4(n){return function(){this.textContent=n}}function y4(n){return function(){var t=n(this);this.textContent=t??""}}function b4(n){return this.tween("text",typeof n=="function"?y4(nw(this,"text",n)):m4(n==null?"":n+""))}function v4(n){return function(t){this.textContent=n.call(this,t)}}function A4(n){var t,e;function i(){var s=n.apply(this,arguments);return s!==e&&(t=(e=s)&&v4(s)),t}return i._value=n,i}function w4(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,A4(n))}function S4(){for(var n=this._name,t=this._id,e=tC(),i=this._groups,s=i.length,a=0;a<s;++a)for(var r=i[a],o=r.length,l,u=0;u<o;++u)if(l=r[u]){var h=ns(l,t);cy(l,n,e,u,r,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ha(i,this._parents,n,e)}function _4(){var n,t,e=this,i=e._id,s=e.size();return new Promise(function(a,r){var o={value:r},l={value:function(){--s===0&&a()}};e.each(function(){var u=zs(this,i),h=u.on;h!==n&&(t=(n=h).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),s===0&&a()})}var x4=0;function Ha(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function tC(){return++x4}var Us=qg.prototype;Ha.prototype={constructor:Ha,select:s4,selectAll:a4,selectChild:Us.selectChild,selectChildren:Us.selectChildren,filter:ZO,merge:QO,selection:o4,transition:S4,call:Us.call,nodes:Us.nodes,node:Us.node,size:Us.size,empty:Us.empty,each:Us.each,on:e4,attr:zO,attrTween:FO,style:d4,styleTween:p4,text:b4,textTween:w4,remove:i4,tween:MO,delay:GO,duration:qO,ease:YO,easeVarying:WO,end:_4,[Symbol.iterator]:Us[Symbol.iterator]};function E4(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var T4={time:null,delay:0,duration:250,ease:E4};function C4(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function M4(n){var t,e;n instanceof Ha?(t=n._id,n=n._name):(t=tC(),(e=T4).time=tw(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var r=i[a],o=r.length,l,u=0;u<o;++u)(l=r[u])&&cy(l,n,t,u,r,e||C4(l,t));return new Ha(i,this._parents,n,t)}qg.prototype.interrupt=EO;qg.prototype.transition=M4;const wp=n=>()=>n;function R4(n,{sourceEvent:t,target:e,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Ma(n,t,e){this.k=n,this.x=t,this.y=e}Ma.prototype={constructor:Ma,scale:function(n){return n===1?this:new Ma(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Ma(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zr=new Ma(1,0,0);Ma.prototype;function ob(n){n.stopImmediatePropagation()}function Gh(n){n.preventDefault(),n.stopImmediatePropagation()}function N4(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function D4(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function R_(){return this.__zoom||Zr}function L4(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function k4(){return navigator.maxTouchPoints||"ontouchstart"in this}function O4(n,t,e){var i=n.invertX(t[0][0])-e[0][0],s=n.invertX(t[1][0])-e[1][0],a=n.invertY(t[0][1])-e[0][1],r=n.invertY(t[1][1])-e[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function z4(){var n=N4,t=D4,e=O4,i=L4,s=k4,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],o=250,l=yO,u=ry("start","zoom","end"),h,d,f,g=500,b=150,m=0,S=10;function p(R){R.property("__zoom",R_).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",P).filter(s).on("touchstart.zoom",H).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(R,B,E,N){var z=R.selection?R.selection():R;z.property("__zoom",R_),R!==z?T(R,B,E,N):z.interrupt().each(function(){C(this,arguments).event(N).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},p.scaleBy=function(R,B,E,N){p.scaleTo(R,function(){var z=this.__zoom.k,O=typeof B=="function"?B.apply(this,arguments):B;return z*O},E,N)},p.scaleTo=function(R,B,E,N){p.transform(R,function(){var z=t.apply(this,arguments),O=this.__zoom,I=E==null?w(z):typeof E=="function"?E.apply(this,arguments):E,V=O.invert(I),F=typeof B=="function"?B.apply(this,arguments):B;return e(A(y(O,F),I,V),z,r)},E,N)},p.translateBy=function(R,B,E,N){p.transform(R,function(){return e(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),r)},null,N)},p.translateTo=function(R,B,E,N,z){p.transform(R,function(){var O=t.apply(this,arguments),I=this.__zoom,V=N==null?w(O):typeof N=="function"?N.apply(this,arguments):N;return e(Zr.translate(V[0],V[1]).scale(I.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof E=="function"?-E.apply(this,arguments):-E),O,r)},N,z)};function y(R,B){return B=Math.max(a[0],Math.min(a[1],B)),B===R.k?R:new Ma(B,R.x,R.y)}function A(R,B,E){var N=B[0]-E[0]*R.k,z=B[1]-E[1]*R.k;return N===R.x&&z===R.y?R:new Ma(R.k,N,z)}function w(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function T(R,B,E,N){R.on("start.zoom",function(){C(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(N).end()}).tween("zoom",function(){var z=this,O=arguments,I=C(z,O).event(N),V=t.apply(z,O),F=E==null?w(V):typeof E=="function"?E.apply(z,O):E,X=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),Y=z.__zoom,tt=typeof B=="function"?B.apply(z,O):B,ut=l(Y.invert(F).concat(X/Y.k),tt.invert(F).concat(X/tt.k));return function(it){if(it===1)it=tt;else{var Nt=ut(it),qt=X/Nt[2];it=new Ma(qt,F[0]-Nt[0]*qt,F[1]-Nt[1]*qt)}I.zoom(null,it)}})}function C(R,B,E){return!E&&R.__zooming||new M(R,B)}function M(R,B){this.that=R,this.args=B,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,B),this.taps=0}M.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,B){return this.mouse&&R!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var B=Yi(this.that).datum();u.call(R,this.that,new R4(R,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:u}),B)}};function L(R,...B){if(!n.apply(this,arguments))return;var E=C(this,B).event(R),N=this.__zoom,z=Math.max(a[0],Math.min(a[1],N.k*Math.pow(2,i.apply(this,arguments)))),O=cs(R);if(E.wheel)(E.mouse[0][0]!==O[0]||E.mouse[0][1]!==O[1])&&(E.mouse[1]=N.invert(E.mouse[0]=O)),clearTimeout(E.wheel);else{if(N.k===z)return;E.mouse=[O,N.invert(O)],Kp(this),E.start()}Gh(R),E.wheel=setTimeout(I,b),E.zoom("mouse",e(A(y(N,z),E.mouse[0],E.mouse[1]),E.extent,r));function I(){E.wheel=null,E.end()}}function k(R,...B){if(f||!n.apply(this,arguments))return;var E=R.currentTarget,N=C(this,B,!0).event(R),z=Yi(R.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",X,!0),O=cs(R,E),I=R.clientX,V=R.clientY;FT(R.view),ob(R),N.mouse=[O,this.__zoom.invert(O)],Kp(this),N.start();function F(Y){if(Gh(Y),!N.moved){var tt=Y.clientX-I,ut=Y.clientY-V;N.moved=tt*tt+ut*ut>m}N.event(Y).zoom("mouse",e(A(N.that.__zoom,N.mouse[0]=cs(Y,E),N.mouse[1]),N.extent,r))}function X(Y){z.on("mousemove.zoom mouseup.zoom",null),UT(Y.view,N.moved),Gh(Y),N.event(Y).end()}}function P(R,...B){if(n.apply(this,arguments)){var E=this.__zoom,N=cs(R.changedTouches?R.changedTouches[0]:R,this),z=E.invert(N),O=E.k*(R.shiftKey?.5:2),I=e(A(y(E,O),N,z),t.apply(this,B),r);Gh(R),o>0?Yi(this).transition().duration(o).call(T,I,N,R):Yi(this).call(p.transform,I,N,R)}}function H(R,...B){if(n.apply(this,arguments)){var E=R.touches,N=E.length,z=C(this,B,R.changedTouches.length===N).event(R),O,I,V,F;for(ob(R),I=0;I<N;++I)V=E[I],F=cs(V,this),F=[F,this.__zoom.invert(F),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==F[2]&&(z.touch1=F,z.taps=0):(z.touch0=F,O=!0,z.taps=1+!!h);h&&(h=clearTimeout(h)),O&&(z.taps<2&&(d=F[0],h=setTimeout(function(){h=null},g)),Kp(this),z.start())}}function $(R,...B){if(this.__zooming){var E=C(this,B).event(R),N=R.changedTouches,z=N.length,O,I,V,F;for(Gh(R),O=0;O<z;++O)I=N[O],V=cs(I,this),E.touch0&&E.touch0[2]===I.identifier?E.touch0[0]=V:E.touch1&&E.touch1[2]===I.identifier&&(E.touch1[0]=V);if(I=E.that.__zoom,E.touch1){var X=E.touch0[0],Y=E.touch0[1],tt=E.touch1[0],ut=E.touch1[1],it=(it=tt[0]-X[0])*it+(it=tt[1]-X[1])*it,Nt=(Nt=ut[0]-Y[0])*Nt+(Nt=ut[1]-Y[1])*Nt;I=y(I,Math.sqrt(it/Nt)),V=[(X[0]+tt[0])/2,(X[1]+tt[1])/2],F=[(Y[0]+ut[0])/2,(Y[1]+ut[1])/2]}else if(E.touch0)V=E.touch0[0],F=E.touch0[1];else return;E.zoom("touch",e(A(I,V,F),E.extent,r))}}function G(R,...B){if(this.__zooming){var E=C(this,B).event(R),N=R.changedTouches,z=N.length,O,I;for(ob(R),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),O=0;O<z;++O)I=N[O],E.touch0&&E.touch0[2]===I.identifier?delete E.touch0:E.touch1&&E.touch1[2]===I.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(I=cs(I,this),Math.hypot(d[0]-I[0],d[1]-I[1])<S)){var V=Yi(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return p.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:wp(+R),p):i},p.filter=function(R){return arguments.length?(n=typeof R=="function"?R:wp(!!R),p):n},p.touchable=function(R){return arguments.length?(s=typeof R=="function"?R:wp(!!R),p):s},p.extent=function(R){return arguments.length?(t=typeof R=="function"?R:wp([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),p):t},p.scaleExtent=function(R){return arguments.length?(a[0]=+R[0],a[1]=+R[1],p):[a[0],a[1]]},p.translateExtent=function(R){return arguments.length?(r[0][0]=+R[0][0],r[1][0]=+R[1][0],r[0][1]=+R[0][1],r[1][1]=+R[1][1],p):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},p.constrain=function(R){return arguments.length?(e=R,p):e},p.duration=function(R){return arguments.length?(o=+R,p):o},p.interpolate=function(R){return arguments.length?(l=R,p):l},p.on=function(){var R=u.on.apply(u,arguments);return R===u?p:R},p.clickDistance=function(R){return arguments.length?(m=(R=+R)*R,p):Math.sqrt(m)},p.tapDistance=function(R){return arguments.length?(S=+R,p):S},p}const uy=D.createContext(null),P4=uy.Provider,Ia={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,t)=>`Couldn't create edge for ${n?"target":"source"} handle id: "${n?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},eC=Ia.error001();function ie(n,t){const e=D.useContext(uy);if(e===null)throw new Error(eC);return CT(e,n,t)}const Ue=()=>{const n=D.useContext(uy);if(n===null)throw new Error(eC);return D.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe,destroy:n.destroy}),[n])},H4=n=>n.userSelectionActive?"none":"all";function nC({position:n,children:t,className:e,style:i,...s}){const a=ie(H4),r=`${n}`.split("-");return j.createElement("div",{className:_n(["react-flow__panel",e,...r]),style:{...i,pointerEvents:a},...s},t)}function I4({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:j.createElement(nC,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},j.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const B4=({x:n,y:t,label:e,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:r=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...h})=>{const d=D.useRef(null),[f,g]=D.useState({x:0,y:0,width:0,height:0}),b=_n(["react-flow__edge-textwrapper",u]);return D.useEffect(()=>{if(d.current){const m=d.current.getBBox();g({x:m.x,y:m.y,width:m.width,height:m.height})}},[e]),typeof e>"u"||!e?null:j.createElement("g",{transform:`translate(${n-f.width/2} ${t-f.height/2})`,className:b,visibility:f.width?"visible":"hidden",...h},s&&j.createElement("rect",{width:f.width+2*r[0],x:-r[0],y:-r[1],height:f.height+2*r[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),j.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:i},e),l)};var F4=D.memo(B4);const iw=n=>({width:n.offsetWidth,height:n.offsetHeight}),Sh=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),sw=(n={x:0,y:0},t)=>({x:Sh(n.x,t[0][0],t[1][0]),y:Sh(n.y,t[0][1],t[1][1])}),N_=(n,t,e)=>n<t?Sh(Math.abs(n-t),1,50)/50:n>e?-Sh(Math.abs(n-e),1,50)/50:0,iC=(n,t)=>{const e=N_(n.x,35,t.width-35)*20,i=N_(n.y,35,t.height-35)*20;return[e,i]},sC=n=>{var t;return((t=n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},U4=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),aw=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),j4=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),D_=n=>({...n.positionAbsolute||{x:0,y:0},width:n.width||0,height:n.height||0}),Ev=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},G4=n=>Ri(n.width)&&Ri(n.height)&&Ri(n.x)&&Ri(n.y),Ri=n=>!isNaN(n)&&isFinite(n),oe=Symbol.for("internals"),aC=["Enter"," ","Escape"],V4=(n,t)=>{},$4=n=>"nativeEvent"in n;function Tv(n){var s,a;const t=$4(n)?n.nativeEvent:n,e=((a=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:a[0])||n.target;return["INPUT","SELECT","TEXTAREA"].includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const rC=n=>"clientX"in n,Qr=(n,t)=>{var a,r;const e=rC(n),i=e?n.clientX:(a=n.touches)==null?void 0:a[0].clientX,s=e?n.clientY:(r=n.touches)==null?void 0:r[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},c0=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0},Yg=({id:n,path:t,labelX:e,labelY:i,label:s,labelStyle:a,labelShowBg:r,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:d,markerStart:f,interactionWidth:g=20})=>j.createElement(j.Fragment,null,j.createElement("path",{id:n,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),g&&j.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&Ri(e)&&Ri(i)?j.createElement(F4,{x:e,y:i,label:s,labelStyle:a,labelShowBg:r,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);Yg.displayName="BaseEdge";function Vh(n,t,e){return e===void 0?e:i=>{const s=t().edges.find(a=>a.id===n);s&&e(i,{...s})}}function oC({sourceX:n,sourceY:t,targetX:e,targetY:i}){const s=Math.abs(e-n)/2,a=e<n?e+s:e-s,r=Math.abs(i-t)/2,o=i<t?i+r:i-r;return[a,o,s,r]}function lC({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:r,targetControlY:o}){const l=n*.125+s*.375+r*.375+e*.125,u=t*.125+a*.375+o*.375+i*.125,h=Math.abs(l-n),d=Math.abs(u-t);return[l,u,h,d]}var Yl;(function(n){n.Strict="strict",n.Loose="loose"})(Yl||(Yl={}));var Mo;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Mo||(Mo={}));var nf;(function(n){n.Partial="partial",n.Full="full"})(nf||(nf={}));var er;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(er||(er={}));var u0;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(u0||(u0={}));var st;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(st||(st={}));function L_({pos:n,x1:t,y1:e,x2:i,y2:s}){return n===st.Left||n===st.Right?[.5*(t+i),e]:[t,.5*(e+s)]}function cC({sourceX:n,sourceY:t,sourcePosition:e=st.Bottom,targetX:i,targetY:s,targetPosition:a=st.Top}){const[r,o]=L_({pos:e,x1:n,y1:t,x2:i,y2:s}),[l,u]=L_({pos:a,x1:i,y1:s,x2:n,y2:t}),[h,d,f,g]=lC({sourceX:n,sourceY:t,targetX:i,targetY:s,sourceControlX:r,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${n},${t} C${r},${o} ${l},${u} ${i},${s}`,h,d,f,g]}const rw=D.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,sourcePosition:s=st.Bottom,targetPosition:a=st.Top,label:r,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:b,interactionWidth:m})=>{const[S,p,y]=cC({sourceX:n,sourceY:t,sourcePosition:s,targetX:e,targetY:i,targetPosition:a});return j.createElement(Yg,{path:S,labelX:p,labelY:y,label:r,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:b,interactionWidth:m})});rw.displayName="SimpleBezierEdge";const k_={[st.Left]:{x:-1,y:0},[st.Right]:{x:1,y:0},[st.Top]:{x:0,y:-1},[st.Bottom]:{x:0,y:1}},q4=({source:n,sourcePosition:t=st.Bottom,target:e})=>t===st.Left||t===st.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},O_=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function X4({source:n,sourcePosition:t=st.Bottom,target:e,targetPosition:i=st.Top,center:s,offset:a}){const r=k_[t],o=k_[i],l={x:n.x+r.x*a,y:n.y+r.y*a},u={x:e.x+o.x*a,y:e.y+o.y*a},h=q4({source:l,sourcePosition:t,target:u}),d=h.x!==0?"x":"y",f=h[d];let g=[],b,m;const S={x:0,y:0},p={x:0,y:0},[y,A,w,T]=oC({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(r[d]*o[d]===-1){b=s.x??y,m=s.y??A;const M=[{x:b,y:l.y},{x:b,y:u.y}],L=[{x:l.x,y:m},{x:u.x,y:m}];r[d]===f?g=d==="x"?M:L:g=d==="x"?L:M}else{const M=[{x:l.x,y:u.y}],L=[{x:u.x,y:l.y}];if(d==="x"?g=r.x===f?L:M:g=r.y===f?M:L,t===i){const G=Math.abs(n[d]-e[d]);if(G<=a){const R=Math.min(a-1,a-G);r[d]===f?S[d]=(l[d]>n[d]?-1:1)*R:p[d]=(u[d]>e[d]?-1:1)*R}}if(t!==i){const G=d==="x"?"y":"x",R=r[d]===o[G],B=l[G]>u[G],E=l[G]<u[G];(r[d]===1&&(!R&&B||R&&E)||r[d]!==1&&(!R&&E||R&&B))&&(g=d==="x"?M:L)}const k={x:l.x+S.x,y:l.y+S.y},P={x:u.x+p.x,y:u.y+p.y},H=Math.max(Math.abs(k.x-g[0].x),Math.abs(P.x-g[0].x)),$=Math.max(Math.abs(k.y-g[0].y),Math.abs(P.y-g[0].y));H>=$?(b=(k.x+P.x)/2,m=g[0].y):(b=g[0].x,m=(k.y+P.y)/2)}return[[n,{x:l.x+S.x,y:l.y+S.y},...g,{x:u.x+p.x,y:u.y+p.y},e],b,m,w,T]}function Y4(n,t,e,i){const s=Math.min(O_(n,t)/2,O_(t,e)/2,i),{x:a,y:r}=t;if(n.x===a&&a===e.x||n.y===r&&r===e.y)return`L${a} ${r}`;if(n.y===r){const u=n.x<e.x?-1:1,h=n.y<e.y?1:-1;return`L ${a+s*u},${r}Q ${a},${r} ${a},${r+s*h}`}const o=n.x<e.x?1:-1,l=n.y<e.y?-1:1;return`L ${a},${r+s*l}Q ${a},${r} ${a+s*o},${r}`}function Cv({sourceX:n,sourceY:t,sourcePosition:e=st.Bottom,targetX:i,targetY:s,targetPosition:a=st.Top,borderRadius:r=5,centerX:o,centerY:l,offset:u=20}){const[h,d,f,g,b]=X4({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:s},targetPosition:a,center:{x:o,y:l},offset:u});return[h.reduce((S,p,y)=>{let A="";return y>0&&y<h.length-1?A=Y4(h[y-1],p,h[y+1],r):A=`${y===0?"M":"L"}${p.x} ${p.y}`,S+=A,S},""),d,f,g,b]}const hy=D.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,label:s,labelStyle:a,labelShowBg:r,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:h,sourcePosition:d=st.Bottom,targetPosition:f=st.Top,markerEnd:g,markerStart:b,pathOptions:m,interactionWidth:S})=>{const[p,y,A]=Cv({sourceX:n,sourceY:t,sourcePosition:d,targetX:e,targetY:i,targetPosition:f,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return j.createElement(Yg,{path:p,labelX:y,labelY:A,label:s,labelStyle:a,labelShowBg:r,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:g,markerStart:b,interactionWidth:S})});hy.displayName="SmoothStepEdge";const ow=D.memo(n=>{var t;return j.createElement(hy,{...n,pathOptions:D.useMemo(()=>{var e;return{borderRadius:0,offset:(e=n.pathOptions)==null?void 0:e.offset}},[(t=n.pathOptions)==null?void 0:t.offset])})});ow.displayName="StepEdge";function K4({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[s,a,r,o]=oC({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,s,a,r,o]}const lw=D.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,label:s,labelStyle:a,labelShowBg:r,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:d,markerStart:f,interactionWidth:g})=>{const[b,m,S]=K4({sourceX:n,sourceY:t,targetX:e,targetY:i});return j.createElement(Yg,{path:b,labelX:m,labelY:S,label:s,labelStyle:a,labelShowBg:r,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:d,markerStart:f,interactionWidth:g})});lw.displayName="StraightEdge";function Sp(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function z_({pos:n,x1:t,y1:e,x2:i,y2:s,c:a}){switch(n){case st.Left:return[t-Sp(t-i,a),e];case st.Right:return[t+Sp(i-t,a),e];case st.Top:return[t,e-Sp(e-s,a)];case st.Bottom:return[t,e+Sp(s-e,a)]}}function uC({sourceX:n,sourceY:t,sourcePosition:e=st.Bottom,targetX:i,targetY:s,targetPosition:a=st.Top,curvature:r=.25}){const[o,l]=z_({pos:e,x1:n,y1:t,x2:i,y2:s,c:r}),[u,h]=z_({pos:a,x1:i,y1:s,x2:n,y2:t,c:r}),[d,f,g,b]=lC({sourceX:n,sourceY:t,targetX:i,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:h});return[`M${n},${t} C${o},${l} ${u},${h} ${i},${s}`,d,f,g,b]}const h0=D.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,sourcePosition:s=st.Bottom,targetPosition:a=st.Top,label:r,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:b,pathOptions:m,interactionWidth:S})=>{const[p,y,A]=uC({sourceX:n,sourceY:t,sourcePosition:s,targetX:e,targetY:i,targetPosition:a,curvature:m==null?void 0:m.curvature});return j.createElement(Yg,{path:p,labelX:y,labelY:A,label:r,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:b,interactionWidth:S})});h0.displayName="BezierEdge";const cw=D.createContext(null),W4=cw.Provider;cw.Consumer;const Z4=()=>D.useContext(cw),Q4=n=>"id"in n&&"source"in n&&"target"in n,J4=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`reactflow__edge-${n}${t||""}-${e}${i||""}`,Mv=(n,t)=>typeof n>"u"?"":typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`,t6=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),e6=(n,t)=>{if(!n.source||!n.target)return t;let e;return Q4(n)?e={...n}:e={...n,id:J4(n)},t6(e,t)?t:t.concat(e)},Rv=({x:n,y:t},[e,i,s],a,[r,o])=>{const l={x:(n-e)/s,y:(t-i)/s};return a?{x:r*Math.round(l.x/r),y:o*Math.round(l.y/o)}:l},hC=({x:n,y:t},[e,i,s])=>({x:n*s+e,y:t*s+i}),Qc=(n,t=[0,0])=>{if(!n)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const e=(n.width??0)*t[0],i=(n.height??0)*t[1],s={x:n.position.x-e,y:n.position.y-i};return{...s,positionAbsolute:n.positionAbsolute?{x:n.positionAbsolute.x-e,y:n.positionAbsolute.y-i}:s}},uw=(n,t=[0,0])=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,s)=>{const{x:a,y:r}=Qc(s,t).positionAbsolute;return U4(i,aw({x:a,y:r,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return j4(e)},dC=(n,t,[e,i,s]=[0,0,1],a=!1,r=!1,o=[0,0])=>{const l={x:(t.x-e)/s,y:(t.y-i)/s,width:t.width/s,height:t.height/s},u=[];return n.forEach(h=>{const{width:d,height:f,selectable:g=!0,hidden:b=!1}=h;if(r&&!g||b)return!1;const{positionAbsolute:m}=Qc(h,o),S={x:m.x,y:m.y,width:d||0,height:f||0},p=Ev(l,S),y=typeof d>"u"||typeof f>"u"||d===null||f===null,A=a&&p>0,w=(d||0)*(f||0);(y||A||p>=w||h.dragging)&&u.push(h)}),u},fC=(n,t)=>{const e=n.map(i=>i.id);return t.filter(i=>e.includes(i.source)||e.includes(i.target))},gC=(n,t,e,i,s,a=.1)=>{const r=t/(n.width*(1+a)),o=e/(n.height*(1+a)),l=Math.min(r,o),u=Sh(l,i,s),h=n.x+n.width/2,d=n.y+n.height/2,f=t/2-h*u,g=e/2-d*u;return{x:f,y:g,zoom:u}},wo=(n,t=0)=>n.transition().duration(t);function P_(n,t,e,i){return(t[e]||[]).reduce((s,a)=>{var r,o;return`${n.id}-${a.id}-${e}`!==i&&s.push({id:a.id||null,type:e,nodeId:n.id,x:(((r=n.positionAbsolute)==null?void 0:r.x)??0)+a.x+a.width/2,y:(((o=n.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function n6(n,t,e,i,s,a){const{x:r,y:o}=Qr(n),u=t.elementsFromPoint(r,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const m=hw(void 0,u),S=u.getAttribute("data-handleid"),p=a({nodeId:b,id:S,type:m});if(p){const y=s.find(A=>A.nodeId===b&&A.type===m&&A.id===S);return{handle:{id:S,type:m,nodeId:b,x:(y==null?void 0:y.x)||e.x,y:(y==null?void 0:y.y)||e.y},validHandleResult:p}}}}let h=[],d=1/0;if(s.forEach(b=>{const m=Math.sqrt((b.x-e.x)**2+(b.y-e.y)**2);if(m<=i){const S=a(b);m<=d&&(m<d?h=[{handle:b,validHandleResult:S}]:m===d&&h.push({handle:b,validHandleResult:S}),d=m)}}),!h.length)return{handle:null,validHandleResult:pC()};if(h.length===1)return h[0];const f=h.some(({validHandleResult:b})=>b.isValid),g=h.some(({handle:b})=>b.type==="target");return h.find(({handle:b,validHandleResult:m})=>g?b.type==="target":f?m.isValid:!0)||h[0]}const i6={source:null,target:null,sourceHandle:null,targetHandle:null},pC=()=>({handleDomNode:null,isValid:!1,connection:i6,endHandle:null});function mC(n,t,e,i,s,a,r){const o=s==="target",l=r.querySelector(`.react-flow__handle[data-id="${n==null?void 0:n.nodeId}-${n==null?void 0:n.id}-${n==null?void 0:n.type}"]`),u={...pC(),handleDomNode:l};if(l){const h=hw(void 0,l),d=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),m={source:o?d:e,sourceHandle:o?f:i,target:o?e:d,targetHandle:o?i:f};u.connection=m,g&&b&&(t===Yl.Strict?o&&h==="source"||!o&&h==="target":d!==e||f!==i)&&(u.endHandle={nodeId:d,handleId:f,type:h},u.isValid=a(m))}return u}function s6({nodes:n,nodeId:t,handleId:e,handleType:i}){return n.reduce((s,a)=>{if(a[oe]){const{handleBounds:r}=a[oe];let o=[],l=[];r&&(o=P_(a,r,"source",`${t}-${e}-${i}`),l=P_(a,r,"target",`${t}-${e}-${i}`)),s.push(...o,...l)}return s},[])}function hw(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function lb(n){n==null||n.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function a6(n,t){let e=null;return t?e="valid":n&&!t&&(e="invalid"),e}function yC({event:n,handleId:t,nodeId:e,onConnect:i,isTarget:s,getState:a,setState:r,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const h=sC(n.target),{connectionMode:d,domNode:f,autoPanOnConnect:g,connectionRadius:b,onConnectStart:m,panBy:S,getNodes:p,cancelConnection:y}=a();let A=0,w;const{x:T,y:C}=Qr(n),M=h==null?void 0:h.elementFromPoint(T,C),L=hw(l,M),k=f==null?void 0:f.getBoundingClientRect();if(!k||!L)return;let P,H=Qr(n,k),$=!1,G=null,R=!1,B=null;const E=s6({nodes:p(),nodeId:e,handleId:t,handleType:L}),N=()=>{if(!g)return;const[I,V]=iC(H,k);S({x:I,y:V}),A=requestAnimationFrame(N)};r({connectionPosition:H,connectionStatus:null,connectionNodeId:e,connectionHandleId:t,connectionHandleType:L,connectionStartHandle:{nodeId:e,handleId:t,type:L},connectionEndHandle:null}),m==null||m(n,{nodeId:e,handleId:t,handleType:L});function z(I){const{transform:V}=a();H=Qr(I,k);const{handle:F,validHandleResult:X}=n6(I,h,Rv(H,V,!1,[1,1]),b,E,Y=>mC(Y,d,e,t,s?"target":"source",o,h));if(w=F,$||(N(),$=!0),B=X.handleDomNode,G=X.connection,R=X.isValid,r({connectionPosition:w&&R?hC({x:w.x,y:w.y},V):H,connectionStatus:a6(!!w,R),connectionEndHandle:X.endHandle}),!w&&!R&&!B)return lb(P);G.source!==G.target&&B&&(lb(P),P=B,B.classList.add("connecting","react-flow__handle-connecting"),B.classList.toggle("valid",R),B.classList.toggle("react-flow__handle-valid",R))}function O(I){var V,F;(w||B)&&G&&R&&(i==null||i(G)),(F=(V=a()).onConnectEnd)==null||F.call(V,I),l&&(u==null||u(I)),lb(P),y(),cancelAnimationFrame(A),$=!1,R=!1,G=null,B=null,h.removeEventListener("mousemove",z),h.removeEventListener("mouseup",O),h.removeEventListener("touchmove",z),h.removeEventListener("touchend",O)}h.addEventListener("mousemove",z),h.addEventListener("mouseup",O),h.addEventListener("touchmove",z),h.addEventListener("touchend",O)}const H_=()=>!0,r6=n=>({connectionStartHandle:n.connectionStartHandle,connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName}),o6=(n,t,e)=>i=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:r}=i;return{connecting:(s==null?void 0:s.nodeId)===n&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===e||(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===e,clickConnecting:(r==null?void 0:r.nodeId)===n&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===e}},bC=D.forwardRef(({type:n="source",position:t=st.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:r,onConnect:o,children:l,className:u,onMouseDown:h,onTouchStart:d,...f},g)=>{var k,P;const b=r||null,m=n==="target",S=Ue(),p=Z4(),{connectOnClick:y,noPanClassName:A}=ie(r6,un),{connecting:w,clickConnecting:T}=ie(o6(p,b,n),un);p||(P=(k=S.getState()).onError)==null||P.call(k,"010",Ia.error010());const C=H=>{const{defaultEdgeOptions:$,onConnect:G,hasDefaultEdges:R}=S.getState(),B={...$,...H};if(R){const{edges:E,setEdges:N}=S.getState();N(e6(B,E))}G==null||G(B),o==null||o(B)},M=H=>{if(!p)return;const $=rC(H);s&&($&&H.button===0||!$)&&yC({event:H,handleId:b,nodeId:p,onConnect:C,isTarget:m,getState:S.getState,setState:S.setState,isValidConnection:e||S.getState().isValidConnection||H_}),$?h==null||h(H):d==null||d(H)},L=H=>{const{onClickConnectStart:$,onClickConnectEnd:G,connectionClickStartHandle:R,connectionMode:B,isValidConnection:E}=S.getState();if(!p||!R&&!s)return;if(!R){$==null||$(H,{nodeId:p,handleId:b,handleType:n}),S.setState({connectionClickStartHandle:{nodeId:p,type:n,handleId:b}});return}const N=sC(H.target),z=e||E||H_,{connection:O,isValid:I}=mC({nodeId:p,id:b,type:n},B,R.nodeId,R.handleId||null,R.type,z,N);I&&C(O),G==null||G(H),S.setState({connectionClickStartHandle:null})};return j.createElement("div",{"data-handleid":b,"data-nodeid":p,"data-handlepos":t,"data-id":`${p}-${b}-${n}`,className:_n(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",A,u,{source:!m,target:m,connectable:i,connectablestart:s,connectableend:a,connecting:T,connectionindicator:i&&(s&&!w||a&&w)}]),onMouseDown:M,onTouchStart:M,onClick:y?L:void 0,ref:g,...f},l)});bC.displayName="Handle";var d0=D.memo(bC);const vC=({data:n,isConnectable:t,targetPosition:e=st.Top,sourcePosition:i=st.Bottom})=>j.createElement(j.Fragment,null,j.createElement(d0,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,j.createElement(d0,{type:"source",position:i,isConnectable:t}));vC.displayName="DefaultNode";var Nv=D.memo(vC);const AC=({data:n,isConnectable:t,sourcePosition:e=st.Bottom})=>j.createElement(j.Fragment,null,n==null?void 0:n.label,j.createElement(d0,{type:"source",position:e,isConnectable:t}));AC.displayName="InputNode";var wC=D.memo(AC);const SC=({data:n,isConnectable:t,targetPosition:e=st.Top})=>j.createElement(j.Fragment,null,j.createElement(d0,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label);SC.displayName="OutputNode";var _C=D.memo(SC);const dw=()=>null;dw.displayName="GroupNode";const l6=n=>({selectedNodes:n.getNodes().filter(t=>t.selected),selectedEdges:n.edges.filter(t=>t.selected).map(t=>({...t}))}),_p=n=>n.id;function c6(n,t){return un(n.selectedNodes.map(_p),t.selectedNodes.map(_p))&&un(n.selectedEdges.map(_p),t.selectedEdges.map(_p))}const xC=D.memo(({onSelectionChange:n})=>{const t=Ue(),{selectedNodes:e,selectedEdges:i}=ie(l6,c6);return D.useEffect(()=>{const s={nodes:e,edges:i};n==null||n(s),t.getState().onSelectionChange.forEach(a=>a(s))},[e,i,n]),null});xC.displayName="SelectionListener";const u6=n=>!!n.onSelectionChange;function h6({onSelectionChange:n}){const t=ie(u6);return n||t?j.createElement(xC,{onSelectionChange:n}):null}const d6=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset});function hc(n,t){D.useEffect(()=>{typeof n<"u"&&t(n)},[n])}function mt(n,t,e){D.useEffect(()=>{typeof t<"u"&&e({[n]:t})},[t])}const f6=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:s,onConnectStart:a,onConnectEnd:r,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:h,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:m,maxZoom:S,nodeExtent:p,onNodesChange:y,onEdgesChange:A,elementsSelectable:w,connectionMode:T,snapGrid:C,snapToGrid:M,translateExtent:L,connectOnClick:k,defaultEdgeOptions:P,fitView:H,fitViewOptions:$,onNodesDelete:G,onEdgesDelete:R,onNodeDrag:B,onNodeDragStart:E,onNodeDragStop:N,onSelectionDrag:z,onSelectionDragStart:O,onSelectionDragStop:I,noPanClassName:V,nodeOrigin:F,rfId:X,autoPanOnConnect:Y,autoPanOnNodeDrag:tt,onError:ut,connectionRadius:it,isValidConnection:Nt,nodeDragThreshold:qt})=>{const{setNodes:Et,setEdges:hn,setDefaultNodesAndEdges:Ae,setMinZoom:xn,setMaxZoom:En,setTranslateExtent:we,setNodeExtent:is,reset:Gt}=ie(d6,un),at=Ue();return D.useEffect(()=>{const In=i==null?void 0:i.map(co=>({...co,...P}));return Ae(e,In),()=>{Gt()}},[]),mt("defaultEdgeOptions",P,at.setState),mt("connectionMode",T,at.setState),mt("onConnect",s,at.setState),mt("onConnectStart",a,at.setState),mt("onConnectEnd",r,at.setState),mt("onClickConnectStart",o,at.setState),mt("onClickConnectEnd",l,at.setState),mt("nodesDraggable",u,at.setState),mt("nodesConnectable",h,at.setState),mt("nodesFocusable",d,at.setState),mt("edgesFocusable",f,at.setState),mt("edgesUpdatable",g,at.setState),mt("elementsSelectable",w,at.setState),mt("elevateNodesOnSelect",b,at.setState),mt("snapToGrid",M,at.setState),mt("snapGrid",C,at.setState),mt("onNodesChange",y,at.setState),mt("onEdgesChange",A,at.setState),mt("connectOnClick",k,at.setState),mt("fitViewOnInit",H,at.setState),mt("fitViewOnInitOptions",$,at.setState),mt("onNodesDelete",G,at.setState),mt("onEdgesDelete",R,at.setState),mt("onNodeDrag",B,at.setState),mt("onNodeDragStart",E,at.setState),mt("onNodeDragStop",N,at.setState),mt("onSelectionDrag",z,at.setState),mt("onSelectionDragStart",O,at.setState),mt("onSelectionDragStop",I,at.setState),mt("noPanClassName",V,at.setState),mt("nodeOrigin",F,at.setState),mt("rfId",X,at.setState),mt("autoPanOnConnect",Y,at.setState),mt("autoPanOnNodeDrag",tt,at.setState),mt("onError",ut,at.setState),mt("connectionRadius",it,at.setState),mt("isValidConnection",Nt,at.setState),mt("nodeDragThreshold",qt,at.setState),hc(n,Et),hc(t,hn),hc(m,xn),hc(S,En),hc(L,we),hc(p,is),null},I_={display:"none"},g6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},EC="react-flow__node-desc",TC="react-flow__edge-desc",p6="react-flow__aria-live",m6=n=>n.ariaLiveMessage;function y6({rfId:n}){const t=ie(m6);return j.createElement("div",{id:`${p6}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:g6},t)}function b6({rfId:n,disableKeyboardA11y:t}){return j.createElement(j.Fragment,null,j.createElement("div",{id:`${EC}-${n}`,style:I_},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),j.createElement("div",{id:`${TC}-${n}`,style:I_},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&j.createElement(y6,{rfId:n}))}var sf=(n=null,t={actInsideInputWithModifier:!0})=>{const[e,i]=D.useState(!1),s=D.useRef(!1),a=D.useRef(new Set([])),[r,o]=D.useMemo(()=>{if(n!==null){const u=(Array.isArray(n)?n:[n]).filter(d=>typeof d=="string").map(d=>d.split("+")),h=u.reduce((d,f)=>d.concat(...f),[]);return[u,h]}return[[],[]]},[n]);return D.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(n!==null){const h=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Tv(g))return!1;const m=F_(g.code,o);a.current.add(g[m]),B_(r,a.current,!1)&&(g.preventDefault(),i(!0))},d=g=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Tv(g))return!1;const m=F_(g.code,o);B_(r,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(g[m]),g.key==="Meta"&&a.current.clear(),s.current=!1},f=()=>{a.current.clear(),i(!1)};return u==null||u.addEventListener("keydown",h),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",h),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[n,i]),e};function B_(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(s=>t.has(s)))}function F_(n,t){return t.includes(n)?"code":"key"}function CC(n,t,e,i){var o,l;const s=n.parentNode||n.parentId;if(!s)return e;const a=t.get(s),r=Qc(a,i);return CC(a,t,{x:(e.x??0)+r.x,y:(e.y??0)+r.y,z:(((o=a[oe])==null?void 0:o.z)??0)>(e.z??0)?((l=a[oe])==null?void 0:l.z)??0:e.z??0},i)}function MC(n,t,e){n.forEach(i=>{var a;const s=i.parentNode||i.parentId;if(s&&!n.has(s))throw new Error(`Parent node ${s} not found`);if(s||e!=null&&e[i.id]){const{x:r,y:o,z:l}=CC(i,n,{...i.position,z:((a=i[oe])==null?void 0:a.z)??0},t);i.positionAbsolute={x:r,y:o},i[oe].z=l,e!=null&&e[i.id]&&(i[oe].isParent=!0)}})}function cb(n,t,e,i){const s=new Map,a={},r=i?1e3:0;return n.forEach(o=>{var g;const l=(Ri(o.zIndex)?o.zIndex:0)+(o.selected?r:0),u=t.get(o.id),h={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},d=o.parentNode||o.parentId;d&&(a[d]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(h,oe,{enumerable:!1,value:{handleBounds:f||(g=u==null?void 0:u[oe])==null?void 0:g.handleBounds,z:l}}),s.set(o.id,h)}),MC(s,e,a),s}function RC(n,t={}){const{getNodes:e,width:i,height:s,minZoom:a,maxZoom:r,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:h,nodeOrigin:d}=n(),f=t.initial&&!u&&h;if(o&&l&&(f||!t.initial)){const b=e().filter(S=>{var y;const p=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(y=t.nodes)!=null&&y.length?p&&t.nodes.some(A=>A.id===S.id):p}),m=b.every(S=>S.width&&S.height);if(b.length>0&&m){const S=uw(b,d),{x:p,y,zoom:A}=gC(S,i,s,t.minZoom??a,t.maxZoom??r,t.padding??.1),w=Zr.translate(p,y).scale(A);return typeof t.duration=="number"&&t.duration>0?o.transform(wo(l,t.duration),w):o.transform(l,w),!0}}return!1}function v6(n,t){return n.forEach(e=>{const i=t.get(e.id);i&&t.set(i.id,{...i,[oe]:i[oe],selected:e.selected})}),new Map(t)}function A6(n,t){return t.map(e=>{const i=n.find(s=>s.id===e.id);return i&&(e.selected=i.selected),e})}function xp({changedNodes:n,changedEdges:t,get:e,set:i}){const{nodeInternals:s,edges:a,onNodesChange:r,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=e();n!=null&&n.length&&(l&&i({nodeInternals:v6(n,s)}),r==null||r(n)),t!=null&&t.length&&(u&&i({edges:A6(t,a)}),o==null||o(t))}const dc=()=>{},w6={zoomIn:dc,zoomOut:dc,zoomTo:dc,getZoom:()=>1,setViewport:dc,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:dc,fitBounds:dc,project:n=>n,screenToFlowPosition:n=>n,flowToScreenPosition:n=>n,viewportInitialized:!1},S6=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection}),_6=()=>{const n=Ue(),{d3Zoom:t,d3Selection:e}=ie(S6,un);return D.useMemo(()=>e&&t?{zoomIn:s=>t.scaleBy(wo(e,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(wo(e,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>t.scaleTo(wo(e,a==null?void 0:a.duration),s),getZoom:()=>n.getState().transform[2],setViewport:(s,a)=>{const[r,o,l]=n.getState().transform,u=Zr.translate(s.x??r,s.y??o).scale(s.zoom??l);t.transform(wo(e,a==null?void 0:a.duration),u)},getViewport:()=>{const[s,a,r]=n.getState().transform;return{x:s,y:a,zoom:r}},fitView:s=>RC(n.getState,s),setCenter:(s,a,r)=>{const{width:o,height:l,maxZoom:u}=n.getState(),h=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:u,d=o/2-s*h,f=l/2-a*h,g=Zr.translate(d,f).scale(h);t.transform(wo(e,r==null?void 0:r.duration),g)},fitBounds:(s,a)=>{const{width:r,height:o,minZoom:l,maxZoom:u}=n.getState(),{x:h,y:d,zoom:f}=gC(s,r,o,l,u,(a==null?void 0:a.padding)??.1),g=Zr.translate(h,d).scale(f);t.transform(wo(e,a==null?void 0:a.duration),g)},project:s=>{const{transform:a,snapToGrid:r,snapGrid:o}=n.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Rv(s,a,r,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:r,snapGrid:o,domNode:l}=n.getState();if(!l)return s;const{x:u,y:h}=l.getBoundingClientRect(),d={x:s.x-u,y:s.y-h};return Rv(d,a,r,o)},flowToScreenPosition:s=>{const{transform:a,domNode:r}=n.getState();if(!r)return s;const{x:o,y:l}=r.getBoundingClientRect(),u=hC(s,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:w6,[t,e])};function fw(){const n=_6(),t=Ue(),e=D.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),i=D.useCallback(m=>t.getState().nodeInternals.get(m),[]),s=D.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(S=>({...S}))},[]),a=D.useCallback(m=>{const{edges:S=[]}=t.getState();return S.find(p=>p.id===m)},[]),r=D.useCallback(m=>{const{getNodes:S,setNodes:p,hasDefaultNodes:y,onNodesChange:A}=t.getState(),w=S(),T=typeof m=="function"?m(w):m;if(y)p(T);else if(A){const C=T.length===0?w.map(M=>({type:"remove",id:M.id})):T.map(M=>({item:M,type:"reset"}));A(C)}},[]),o=D.useCallback(m=>{const{edges:S=[],setEdges:p,hasDefaultEdges:y,onEdgesChange:A}=t.getState(),w=typeof m=="function"?m(S):m;if(y)p(w);else if(A){const T=w.length===0?S.map(C=>({type:"remove",id:C.id})):w.map(C=>({item:C,type:"reset"}));A(T)}},[]),l=D.useCallback(m=>{const S=Array.isArray(m)?m:[m],{getNodes:p,setNodes:y,hasDefaultNodes:A,onNodesChange:w}=t.getState();if(A){const C=[...p(),...S];y(C)}else if(w){const T=S.map(C=>({item:C,type:"add"}));w(T)}},[]),u=D.useCallback(m=>{const S=Array.isArray(m)?m:[m],{edges:p=[],setEdges:y,hasDefaultEdges:A,onEdgesChange:w}=t.getState();if(A)y([...p,...S]);else if(w){const T=S.map(C=>({item:C,type:"add"}));w(T)}},[]),h=D.useCallback(()=>{const{getNodes:m,edges:S=[],transform:p}=t.getState(),[y,A,w]=p;return{nodes:m().map(T=>({...T})),edges:S.map(T=>({...T})),viewport:{x:y,y:A,zoom:w}}},[]),d=D.useCallback(({nodes:m,edges:S})=>{const{nodeInternals:p,getNodes:y,edges:A,hasDefaultNodes:w,hasDefaultEdges:T,onNodesDelete:C,onEdgesDelete:M,onNodesChange:L,onEdgesChange:k}=t.getState(),P=(m||[]).map(B=>B.id),H=(S||[]).map(B=>B.id),$=y().reduce((B,E)=>{const N=E.parentNode||E.parentId,z=!P.includes(E.id)&&N&&B.find(I=>I.id===N);return(typeof E.deletable=="boolean"?E.deletable:!0)&&(P.includes(E.id)||z)&&B.push(E),B},[]),G=A.filter(B=>typeof B.deletable=="boolean"?B.deletable:!0),R=G.filter(B=>H.includes(B.id));if($||R){const B=fC($,G),E=[...R,...B],N=E.reduce((z,O)=>(z.includes(O.id)||z.push(O.id),z),[]);if((T||w)&&(T&&t.setState({edges:A.filter(z=>!N.includes(z.id))}),w&&($.forEach(z=>{p.delete(z.id)}),t.setState({nodeInternals:new Map(p)}))),N.length>0&&(M==null||M(E),k&&k(N.map(z=>({id:z,type:"remove"})))),$.length>0&&(C==null||C($),L)){const z=$.map(O=>({id:O.id,type:"remove"}));L(z)}}},[]),f=D.useCallback(m=>{const S=G4(m),p=S?null:t.getState().nodeInternals.get(m.id);return!S&&!p?[null,null,S]:[S?m:D_(p),p,S]},[]),g=D.useCallback((m,S=!0,p)=>{const[y,A,w]=f(m);return y?(p||t.getState().getNodes()).filter(T=>{if(!w&&(T.id===A.id||!T.positionAbsolute))return!1;const C=D_(T),M=Ev(C,y);return S&&M>0||M>=y.width*y.height}):[]},[]),b=D.useCallback((m,S,p=!0)=>{const[y]=f(m);if(!y)return!1;const A=Ev(y,S);return p&&A>0||A>=y.width*y.height},[]);return D.useMemo(()=>({...n,getNodes:e,getNode:i,getEdges:s,getEdge:a,setNodes:r,setEdges:o,addNodes:l,addEdges:u,toObject:h,deleteElements:d,getIntersectingNodes:g,isNodeIntersecting:b}),[n,e,i,s,a,r,o,l,u,h,d,g,b])}const x6={actInsideInputWithModifier:!1};var E6=({deleteKeyCode:n,multiSelectionKeyCode:t})=>{const e=Ue(),{deleteElements:i}=fw(),s=sf(n,x6),a=sf(t);D.useEffect(()=>{if(s){const{edges:r,getNodes:o}=e.getState(),l=o().filter(h=>h.selected),u=r.filter(h=>h.selected);i({nodes:l,edges:u}),e.setState({nodesSelectionActive:!1})}},[s]),D.useEffect(()=>{e.setState({multiSelectionActive:a})},[a])};function T6(n){const t=Ue();D.useEffect(()=>{let e;const i=()=>{var a,r;if(!n.current)return;const s=iw(n.current);(s.height===0||s.width===0)&&((r=(a=t.getState()).onError)==null||r.call(a,"004",Ia.error004())),t.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),n.current&&(e=new ResizeObserver(()=>i()),e.observe(n.current)),()=>{window.removeEventListener("resize",i),e&&n.current&&e.unobserve(n.current)}},[])}const gw={position:"absolute",width:"100%",height:"100%",top:0,left:0},C6=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,Ep=n=>({x:n.x,y:n.y,zoom:n.k}),fc=(n,t)=>n.target.closest(`.${t}`),U_=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),j_=n=>{const t=n.ctrlKey&&c0()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t},M6=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection,d3ZoomHandler:n.d3ZoomHandler,userSelectionActive:n.userSelectionActive}),R6=({onMove:n,onMoveStart:t,onMoveEnd:e,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Mo.Free,zoomOnDoubleClick:u=!0,elementsSelectable:h,panOnDrag:d=!0,defaultViewport:f,translateExtent:g,minZoom:b,maxZoom:m,zoomActivationKeyCode:S,preventScrolling:p=!0,children:y,noWheelClassName:A,noPanClassName:w})=>{const T=D.useRef(),C=Ue(),M=D.useRef(!1),L=D.useRef(!1),k=D.useRef(null),P=D.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:$,d3ZoomHandler:G,userSelectionActive:R}=ie(M6,un),B=sf(S),E=D.useRef(0),N=D.useRef(!1),z=D.useRef();return T6(k),D.useEffect(()=>{if(k.current){const O=k.current.getBoundingClientRect(),I=z4().scaleExtent([b,m]).translateExtent(g),V=Yi(k.current).call(I),F=Zr.translate(f.x,f.y).scale(Sh(f.zoom,b,m)),X=[[0,0],[O.width,O.height]],Y=I.constrain()(F,X,g);I.transform(V,Y),I.wheelDelta(j_),C.setState({d3Zoom:I,d3Selection:V,d3ZoomHandler:V.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:k.current.closest(".react-flow")})}},[]),D.useEffect(()=>{$&&H&&(r&&!B&&!R?$.on("wheel.zoom",O=>{if(fc(O,A))return!1;O.preventDefault(),O.stopImmediatePropagation();const I=$.property("__zoom").k||1;if(O.ctrlKey&&a){const Nt=cs(O),qt=j_(O),Et=I*Math.pow(2,qt);H.scaleTo($,Et,Nt,O);return}const V=O.deltaMode===1?20:1;let F=l===Mo.Vertical?0:O.deltaX*V,X=l===Mo.Horizontal?0:O.deltaY*V;!c0()&&O.shiftKey&&l!==Mo.Vertical&&(F=O.deltaY*V,X=0),H.translateBy($,-(F/I)*o,-(X/I)*o,{internal:!0});const Y=Ep($.property("__zoom")),{onViewportChangeStart:tt,onViewportChange:ut,onViewportChangeEnd:it}=C.getState();clearTimeout(z.current),N.current||(N.current=!0,t==null||t(O,Y),tt==null||tt(Y)),N.current&&(n==null||n(O,Y),ut==null||ut(Y),z.current=setTimeout(()=>{e==null||e(O,Y),it==null||it(Y),N.current=!1},150))},{passive:!1}):typeof G<"u"&&$.on("wheel.zoom",function(O,I){if(!p&&O.type==="wheel"&&!O.ctrlKey||fc(O,A))return null;O.preventDefault(),G.call(this,O,I)},{passive:!1}))},[R,r,l,$,H,G,B,a,p,A,t,n,e]),D.useEffect(()=>{H&&H.on("start",O=>{var F,X;if(!O.sourceEvent||O.sourceEvent.internal)return null;E.current=(F=O.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:I}=C.getState(),V=Ep(O.transform);M.current=!0,P.current=V,((X=O.sourceEvent)==null?void 0:X.type)==="mousedown"&&C.setState({paneDragging:!0}),I==null||I(V),t==null||t(O.sourceEvent,V)})},[H,t]),D.useEffect(()=>{H&&(R&&!M.current?H.on("zoom",null):R||H.on("zoom",O=>{var V;const{onViewportChange:I}=C.getState();if(C.setState({transform:[O.transform.x,O.transform.y,O.transform.k]}),L.current=!!(i&&U_(d,E.current??0)),(n||I)&&!((V=O.sourceEvent)!=null&&V.internal)){const F=Ep(O.transform);I==null||I(F),n==null||n(O.sourceEvent,F)}}))},[R,H,n,d,i]),D.useEffect(()=>{H&&H.on("end",O=>{if(!O.sourceEvent||O.sourceEvent.internal)return null;const{onViewportChangeEnd:I}=C.getState();if(M.current=!1,C.setState({paneDragging:!1}),i&&U_(d,E.current??0)&&!L.current&&i(O.sourceEvent),L.current=!1,(e||I)&&C6(P.current,O.transform)){const V=Ep(O.transform);P.current=V,clearTimeout(T.current),T.current=setTimeout(()=>{I==null||I(V),e==null||e(O.sourceEvent,V)},r?150:0)}})},[H,r,d,e,i]),D.useEffect(()=>{H&&H.filter(O=>{const I=B||s,V=a&&O.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&O.button===1&&O.type==="mousedown"&&(fc(O,"react-flow__node")||fc(O,"react-flow__edge")))return!0;if(!d&&!I&&!r&&!u&&!a||R||!u&&O.type==="dblclick"||fc(O,A)&&O.type==="wheel"||fc(O,w)&&(O.type!=="wheel"||r&&O.type==="wheel"&&!B)||!a&&O.ctrlKey&&O.type==="wheel"||!I&&!r&&!V&&O.type==="wheel"||!d&&(O.type==="mousedown"||O.type==="touchstart")||Array.isArray(d)&&!d.includes(O.button)&&O.type==="mousedown")return!1;const F=Array.isArray(d)&&d.includes(O.button)||!O.button||O.button<=1;return(!O.ctrlKey||O.type==="wheel")&&F})},[R,H,s,a,r,u,d,h,B]),j.createElement("div",{className:"react-flow__renderer",ref:k,style:gw},y)},N6=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function D6(){const{userSelectionActive:n,userSelectionRect:t}=ie(N6,un);return n&&t?j.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function G_(n,t){const e=t.parentNode||t.parentId,i=n.find(s=>s.id===e);if(i){const s=t.position.x+t.width-i.width,a=t.position.y+t.height-i.height;if(s>0||a>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),a>0&&(i.style.height+=a),t.position.x<0){const r=Math.abs(t.position.x);i.position.x=i.position.x-r,i.style.width+=r,t.position.x=0}if(t.position.y<0){const r=Math.abs(t.position.y);i.position.y=i.position.y-r,i.style.height+=r,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function L6(n,t){if(n.some(i=>i.type==="reset"))return n.filter(i=>i.type==="reset").map(i=>i.item);const e=n.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,s)=>{const a=n.filter(o=>o.id===s.id);if(a.length===0)return i.push(s),i;const r={...s};for(const o of a)if(o)switch(o.type){case"select":{r.selected=o.selected;break}case"position":{typeof o.position<"u"&&(r.position=o.position),typeof o.positionAbsolute<"u"&&(r.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(r.dragging=o.dragging),r.expandParent&&G_(i,r);break}case"dimensions":{typeof o.dimensions<"u"&&(r.width=o.dimensions.width,r.height=o.dimensions.height),typeof o.updateStyle<"u"&&(r.style={...r.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(r.resizing=o.resizing),r.expandParent&&G_(i,r);break}case"remove":return i}return i.push(r),i},e)}function k6(n,t){return L6(n,t)}const Wa=(n,t)=>({id:n,type:"select",selected:t});function Bc(n,t){return n.reduce((e,i)=>{const s=t.includes(i.id);return!i.selected&&s?(i.selected=!0,e.push(Wa(i.id,!0))):i.selected&&!s&&(i.selected=!1,e.push(Wa(i.id,!1))),e},[])}const ub=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},O6=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging}),NC=D.memo(({isSelecting:n,selectionMode:t=nf.Full,panOnDrag:e,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:r,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:h,children:d})=>{const f=D.useRef(null),g=Ue(),b=D.useRef(0),m=D.useRef(0),S=D.useRef(),{userSelectionActive:p,elementsSelectable:y,dragging:A}=ie(O6,un),w=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,m.current=0},T=G=>{a==null||a(G),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},C=G=>{if(Array.isArray(e)&&(e!=null&&e.includes(2))){G.preventDefault();return}r==null||r(G)},M=o?G=>o(G):void 0,L=G=>{const{resetSelectedElements:R,domNode:B}=g.getState();if(S.current=B==null?void 0:B.getBoundingClientRect(),!y||!n||G.button!==0||G.target!==f.current||!S.current)return;const{x:E,y:N}=Qr(G,S.current);R(),g.setState({userSelectionRect:{width:0,height:0,startX:E,startY:N,x:E,y:N}}),i==null||i(G)},k=G=>{const{userSelectionRect:R,nodeInternals:B,edges:E,transform:N,onNodesChange:z,onEdgesChange:O,nodeOrigin:I,getNodes:V}=g.getState();if(!n||!S.current||!R)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=Qr(G,S.current),X=R.startX??0,Y=R.startY??0,tt={...R,x:F.x<X?F.x:X,y:F.y<Y?F.y:Y,width:Math.abs(F.x-X),height:Math.abs(F.y-Y)},ut=V(),it=dC(B,tt,N,t===nf.Partial,!0,I),Nt=fC(it,E).map(Et=>Et.id),qt=it.map(Et=>Et.id);if(b.current!==qt.length){b.current=qt.length;const Et=Bc(ut,qt);Et.length&&(z==null||z(Et))}if(m.current!==Nt.length){m.current=Nt.length;const Et=Bc(E,Nt);Et.length&&(O==null||O(Et))}g.setState({userSelectionRect:tt})},P=G=>{if(G.button!==0)return;const{userSelectionRect:R}=g.getState();!p&&R&&G.target===f.current&&(T==null||T(G)),g.setState({nodesSelectionActive:b.current>0}),w(),s==null||s(G)},H=G=>{p&&(g.setState({nodesSelectionActive:b.current>0}),s==null||s(G)),w()},$=y&&(n||p);return j.createElement("div",{className:_n(["react-flow__pane",{dragging:A,selection:n}]),onClick:$?void 0:ub(T,f),onContextMenu:ub(C,f),onWheel:ub(M,f),onMouseEnter:$?void 0:l,onMouseDown:$?L:void 0,onMouseMove:$?k:u,onMouseUp:$?P:void 0,onMouseLeave:$?H:h,ref:f,style:gw},d,j.createElement(D6,null))});NC.displayName="Pane";function DC(n,t){const e=n.parentNode||n.parentId;if(!e)return!1;const i=t.get(e);return i?i.selected?!0:DC(i,t):!1}function V_(n,t,e){let i=n;do{if(i!=null&&i.matches(t))return!0;if(i===e.current)return!1;i=i.parentElement}while(i);return!1}function z6(n,t,e,i){return Array.from(n.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!DC(s,n))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var a,r;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:e.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:e.y-(((r=s.positionAbsolute)==null?void 0:r.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function P6(n,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(n.width||0),t[1][1]-(n.height||0)]]}function LC(n,t,e,i,s=[0,0],a){const r=P6(n,n.extent||i);let o=r;const l=n.parentNode||n.parentId;if(n.extent==="parent"&&!n.expandParent)if(l&&n.width&&n.height){const d=e.get(l),{x:f,y:g}=Qc(d,s).positionAbsolute;o=d&&Ri(f)&&Ri(g)&&Ri(d.width)&&Ri(d.height)?[[f+n.width*s[0],g+n.height*s[1]],[f+d.width-n.width+n.width*s[0],g+d.height-n.height+n.height*s[1]]]:o}else a==null||a("005",Ia.error005()),o=r;else if(n.extent&&l&&n.extent!=="parent"){const d=e.get(l),{x:f,y:g}=Qc(d,s).positionAbsolute;o=[[n.extent[0][0]+f,n.extent[0][1]+g],[n.extent[1][0]+f,n.extent[1][1]+g]]}let u={x:0,y:0};if(l){const d=e.get(l);u=Qc(d,s).positionAbsolute}const h=o&&o!=="parent"?sw(t,o):t;return{position:{x:h.x-u.x,y:h.y-u.y},positionAbsolute:h}}function hb({nodeId:n,dragItems:t,nodeInternals:e}){const i=t.map(s=>({...e.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[n?i.find(s=>s.id===n):i[0],i]}const $_=(n,t,e,i)=>{const s=t.querySelectorAll(n);if(!s||!s.length)return null;const a=Array.from(s),r=t.getBoundingClientRect(),o={x:r.width*i[0],y:r.height*i[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-r.left-o.x)/e,y:(u.top-r.top-o.y)/e,...iw(l)}})};function $h(n,t,e){return e===void 0?e:i=>{const s=t().nodeInternals.get(n);s&&e(i,{...s})}}function Dv({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:r,nodeInternals:o,onError:l}=t.getState(),u=o.get(n);if(!u){l==null||l("012",Ia.error012(n));return}t.setState({nodesSelectionActive:!1}),u.selected?(e||u.selected&&r)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var h;return(h=i==null?void 0:i.current)==null?void 0:h.blur()})):s([n])}function H6(){const n=Ue();return D.useCallback(({sourceEvent:e})=>{const{transform:i,snapGrid:s,snapToGrid:a}=n.getState(),r=e.touches?e.touches[0].clientX:e.clientX,o=e.touches?e.touches[0].clientY:e.clientY,l={x:(r-i[0])/i[2],y:(o-i[1])/i[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function db(n){return(t,e,i)=>n==null?void 0:n(t,i)}function kC({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:s,isSelectable:a,selectNodesOnDrag:r}){const o=Ue(),[l,u]=D.useState(!1),h=D.useRef([]),d=D.useRef({x:null,y:null}),f=D.useRef(0),g=D.useRef(null),b=D.useRef({x:0,y:0}),m=D.useRef(null),S=D.useRef(!1),p=D.useRef(!1),y=D.useRef(!1),A=H6();return D.useEffect(()=>{if(n!=null&&n.current){const w=Yi(n.current),T=({x:L,y:k})=>{const{nodeInternals:P,onNodeDrag:H,onSelectionDrag:$,updateNodePositions:G,nodeExtent:R,snapGrid:B,snapToGrid:E,nodeOrigin:N,onError:z}=o.getState();d.current={x:L,y:k};let O=!1,I={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&R){const F=uw(h.current,N);I=aw(F)}if(h.current=h.current.map(F=>{const X={x:L-F.distance.x,y:k-F.distance.y};E&&(X.x=B[0]*Math.round(X.x/B[0]),X.y=B[1]*Math.round(X.y/B[1]));const Y=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];h.current.length>1&&R&&!F.extent&&(Y[0][0]=F.positionAbsolute.x-I.x+R[0][0],Y[1][0]=F.positionAbsolute.x+(F.width??0)-I.x2+R[1][0],Y[0][1]=F.positionAbsolute.y-I.y+R[0][1],Y[1][1]=F.positionAbsolute.y+(F.height??0)-I.y2+R[1][1]);const tt=LC(F,X,P,Y,N,z);return O=O||F.position.x!==tt.position.x||F.position.y!==tt.position.y,F.position=tt.position,F.positionAbsolute=tt.positionAbsolute,F}),!O)return;G(h.current,!0,!0),u(!0);const V=s?H:db($);if(V&&m.current){const[F,X]=hb({nodeId:s,dragItems:h.current,nodeInternals:P});V(m.current,F,X)}},C=()=>{if(!g.current)return;const[L,k]=iC(b.current,g.current);if(L!==0||k!==0){const{transform:P,panBy:H}=o.getState();d.current.x=(d.current.x??0)-L/P[2],d.current.y=(d.current.y??0)-k/P[2],H({x:L,y:k})&&T(d.current)}f.current=requestAnimationFrame(C)},M=L=>{var N;const{nodeInternals:k,multiSelectionActive:P,nodesDraggable:H,unselectNodesAndEdges:$,onNodeDragStart:G,onSelectionDragStart:R}=o.getState();p.current=!0;const B=s?G:db(R);(!r||!a)&&!P&&s&&((N=k.get(s))!=null&&N.selected||$()),s&&a&&r&&Dv({id:s,store:o,nodeRef:n});const E=A(L);if(d.current=E,h.current=z6(k,H,E,s),B&&h.current){const[z,O]=hb({nodeId:s,dragItems:h.current,nodeInternals:k});B(L.sourceEvent,z,O)}};if(t)w.on(".drag",null);else{const L=$5().on("start",k=>{const{domNode:P,nodeDragThreshold:H}=o.getState();H===0&&M(k),y.current=!1;const $=A(k);d.current=$,g.current=(P==null?void 0:P.getBoundingClientRect())||null,b.current=Qr(k.sourceEvent,g.current)}).on("drag",k=>{var G,R;const P=A(k),{autoPanOnNodeDrag:H,nodeDragThreshold:$}=o.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!S.current&&p.current&&H&&(S.current=!0,C()),!p.current){const B=P.xSnapped-(((G=d==null?void 0:d.current)==null?void 0:G.x)??0),E=P.ySnapped-(((R=d==null?void 0:d.current)==null?void 0:R.y)??0);Math.sqrt(B*B+E*E)>$&&M(k)}(d.current.x!==P.xSnapped||d.current.y!==P.ySnapped)&&h.current&&p.current&&(m.current=k.sourceEvent,b.current=Qr(k.sourceEvent,g.current),T(P))}}).on("end",k=>{if(!(!p.current||y.current)&&(u(!1),S.current=!1,p.current=!1,cancelAnimationFrame(f.current),h.current)){const{updateNodePositions:P,nodeInternals:H,onNodeDragStop:$,onSelectionDragStop:G}=o.getState(),R=s?$:db(G);if(P(h.current,!1,!1),R){const[B,E]=hb({nodeId:s,dragItems:h.current,nodeInternals:H});R(k.sourceEvent,B,E)}}}).filter(k=>{const P=k.target;return!k.button&&(!e||!V_(P,`.${e}`,n))&&(!i||V_(P,i,n))});return w.call(L),()=>{w.on(".drag",null)}}}},[n,t,e,i,a,o,s,r,A]),l}function OC(){const n=Ue();return D.useCallback(e=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:a,getNodes:r,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:h}=n.getState(),d=r().filter(y=>y.selected&&(y.draggable||h&&typeof y.draggable>"u")),f=o?l[0]:5,g=o?l[1]:5,b=e.isShiftPressed?4:1,m=e.x*f*b,S=e.y*g*b,p=d.map(y=>{if(y.positionAbsolute){const A={x:y.positionAbsolute.x+m,y:y.positionAbsolute.y+S};o&&(A.x=l[0]*Math.round(A.x/l[0]),A.y=l[1]*Math.round(A.y/l[1]));const{positionAbsolute:w,position:T}=LC(y,A,i,s,void 0,u);y.position=T,y.positionAbsolute=w}return y});a(p,!0,!1)},[])}const Jc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var qh=n=>{const t=({id:e,type:i,data:s,xPos:a,yPos:r,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:h,onMouseEnter:d,onMouseMove:f,onMouseLeave:g,onContextMenu:b,onDoubleClick:m,style:S,className:p,isDraggable:y,isSelectable:A,isConnectable:w,isFocusable:T,selectNodesOnDrag:C,sourcePosition:M,targetPosition:L,hidden:k,resizeObserver:P,dragHandle:H,zIndex:$,isParent:G,noDragClassName:R,noPanClassName:B,initialized:E,disableKeyboardA11y:N,ariaLabel:z,rfId:O,hasHandleBounds:I})=>{const V=Ue(),F=D.useRef(null),X=D.useRef(null),Y=D.useRef(M),tt=D.useRef(L),ut=D.useRef(i),it=A||y||h||d||f||g,Nt=OC(),qt=$h(e,V.getState,d),Et=$h(e,V.getState,f),hn=$h(e,V.getState,g),Ae=$h(e,V.getState,b),xn=$h(e,V.getState,m),En=Gt=>{const{nodeDragThreshold:at}=V.getState();if(A&&(!C||!y||at>0)&&Dv({id:e,store:V,nodeRef:F}),h){const In=V.getState().nodeInternals.get(e);In&&h(Gt,{...In})}},we=Gt=>{if(!Tv(Gt)&&!N)if(aC.includes(Gt.key)&&A){const at=Gt.key==="Escape";Dv({id:e,store:V,unselect:at,nodeRef:F})}else y&&u&&Object.prototype.hasOwnProperty.call(Jc,Gt.key)&&(V.setState({ariaLiveMessage:`Moved selected node ${Gt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~r}`}),Nt({x:Jc[Gt.key].x,y:Jc[Gt.key].y,isShiftPressed:Gt.shiftKey}))};D.useEffect(()=>()=>{X.current&&(P==null||P.unobserve(X.current),X.current=null)},[]),D.useEffect(()=>{if(F.current&&!k){const Gt=F.current;(!E||!I||X.current!==Gt)&&(X.current&&(P==null||P.unobserve(X.current)),P==null||P.observe(Gt),X.current=Gt)}},[k,E,I]),D.useEffect(()=>{const Gt=ut.current!==i,at=Y.current!==M,In=tt.current!==L;F.current&&(Gt||at||In)&&(Gt&&(ut.current=i),at&&(Y.current=M),In&&(tt.current=L),V.getState().updateNodeDimensions([{id:e,nodeElement:F.current,forceUpdate:!0}]))},[e,i,M,L]);const is=kC({nodeRef:F,disabled:k||!y,noDragClassName:R,handleSelector:H,nodeId:e,isSelectable:A,selectNodesOnDrag:C});return k?null:j.createElement("div",{className:_n(["react-flow__node",`react-flow__node-${i}`,{[B]:y},p,{selected:u,selectable:A,parent:G,dragging:is}]),ref:F,style:{zIndex:$,transform:`translate(${o}px,${l}px)`,pointerEvents:it?"all":"none",visibility:E?"visible":"hidden",...S},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:qt,onMouseMove:Et,onMouseLeave:hn,onContextMenu:Ae,onClick:En,onDoubleClick:xn,onKeyDown:T?we:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":N?void 0:`${EC}-${O}`,"aria-label":z},j.createElement(W4,{value:e},j.createElement(n,{id:e,data:s,type:i,xPos:a,yPos:r,selected:u,isConnectable:w,sourcePosition:M,targetPosition:L,dragging:is,dragHandle:H,zIndex:$})))};return t.displayName="NodeWrapper",D.memo(t)};const I6=n=>{const t=n.getNodes().filter(e=>e.selected);return{...uw(t,n.nodeOrigin),transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`,userSelectionActive:n.userSelectionActive}};function B6({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=Ue(),{width:s,height:a,x:r,y:o,transformString:l,userSelectionActive:u}=ie(I6,un),h=OC(),d=D.useRef(null);if(D.useEffect(()=>{var b;e||(b=d.current)==null||b.focus({preventScroll:!0})},[e]),kC({nodeRef:d}),u||!s||!a)return null;const f=n?b=>{const m=i.getState().getNodes().filter(S=>S.selected);n(b,m)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(Jc,b.key)&&h({x:Jc[b.key].x,y:Jc[b.key].y,isShiftPressed:b.shiftKey})};return j.createElement("div",{className:_n(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},j.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:e?void 0:-1,onKeyDown:e?void 0:g,style:{width:s,height:a,top:o,left:r}}))}var F6=D.memo(B6);const U6=n=>n.nodesSelectionActive,zC=({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:r,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:h,selectionKeyCode:d,selectionOnDrag:f,selectionMode:g,onSelectionStart:b,onSelectionEnd:m,multiSelectionKeyCode:S,panActivationKeyCode:p,zoomActivationKeyCode:y,elementsSelectable:A,zoomOnScroll:w,zoomOnPinch:T,panOnScroll:C,panOnScrollSpeed:M,panOnScrollMode:L,zoomOnDoubleClick:k,panOnDrag:P,defaultViewport:H,translateExtent:$,minZoom:G,maxZoom:R,preventScrolling:B,onSelectionContextMenu:E,noWheelClassName:N,noPanClassName:z,disableKeyboardA11y:O})=>{const I=ie(U6),V=sf(d),F=sf(p),X=F||P,Y=F||C,tt=V||f&&X!==!0;return E6({deleteKeyCode:o,multiSelectionKeyCode:S}),j.createElement(R6,{onMove:l,onMoveStart:u,onMoveEnd:h,onPaneContextMenu:a,elementsSelectable:A,zoomOnScroll:w,zoomOnPinch:T,panOnScroll:Y,panOnScrollSpeed:M,panOnScrollMode:L,zoomOnDoubleClick:k,panOnDrag:!V&&X,defaultViewport:H,translateExtent:$,minZoom:G,maxZoom:R,zoomActivationKeyCode:y,preventScrolling:B,noWheelClassName:N,noPanClassName:z},j.createElement(NC,{onSelectionStart:b,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:r,panOnDrag:X,isSelecting:!!tt,selectionMode:g},n,I&&j.createElement(F6,{onSelectionContextMenu:E,noPanClassName:z,disableKeyboardA11y:O})))};zC.displayName="FlowRenderer";var j6=D.memo(zC);function G6(n){return ie(D.useCallback(e=>n?dC(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[n]))}function V6(n){const t={input:qh(n.input||wC),default:qh(n.default||Nv),output:qh(n.output||_C),group:qh(n.group||dw)},e={},i=Object.keys(n).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=qh(n[a]||Nv),s),e);return{...t,...i}}const $6=({x:n,y:t,width:e,height:i,origin:s})=>!e||!i?{x:n,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:n,y:t}:{x:n-e*s[0],y:t-i*s[1]},q6=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,updateNodeDimensions:n.updateNodeDimensions,onError:n.onError}),PC=n=>{const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:a,onError:r}=ie(q6,un),o=G6(n.onlyRenderVisibleElements),l=D.useRef(),u=D.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(d=>{const f=d.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(f)});return l.current=h,h},[]);return D.useEffect(()=>()=>{var h;(h=l==null?void 0:l.current)==null||h.disconnect()},[]),j.createElement("div",{className:"react-flow__nodes",style:gw},o.map(h=>{var T,C,M;let d=h.type||"default";n.nodeTypes[d]||(r==null||r("003",Ia.error003(d)),d="default");const f=n.nodeTypes[d]||n.nodeTypes.default,g=!!(h.draggable||t&&typeof h.draggable>"u"),b=!!(h.selectable||s&&typeof h.selectable>"u"),m=!!(h.connectable||e&&typeof h.connectable>"u"),S=!!(h.focusable||i&&typeof h.focusable>"u"),p=n.nodeExtent?sw(h.positionAbsolute,n.nodeExtent):h.positionAbsolute,y=(p==null?void 0:p.x)??0,A=(p==null?void 0:p.y)??0,w=$6({x:y,y:A,width:h.width??0,height:h.height??0,origin:n.nodeOrigin});return j.createElement(f,{key:h.id,id:h.id,className:h.className,style:h.style,type:d,data:h.data,sourcePosition:h.sourcePosition||st.Bottom,targetPosition:h.targetPosition||st.Top,hidden:h.hidden,xPos:y,yPos:A,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:n.selectNodesOnDrag,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,selected:!!h.selected,isDraggable:g,isSelectable:b,isConnectable:m,isFocusable:S,resizeObserver:u,dragHandle:h.dragHandle,zIndex:((T=h[oe])==null?void 0:T.z)??0,isParent:!!((C=h[oe])!=null&&C.isParent),noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,initialized:!!h.width&&!!h.height,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((M=h[oe])!=null&&M.handleBounds)})}))};PC.displayName="NodeRenderer";var X6=D.memo(PC);const Y6=(n,t,e)=>e===st.Left?n-t:e===st.Right?n+t:n,K6=(n,t,e)=>e===st.Top?n-t:e===st.Bottom?n+t:n,q_="react-flow__edgeupdater",X_=({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:s,onMouseEnter:a,onMouseOut:r,type:o})=>j.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:r,className:_n([q_,`${q_}-${o}`]),cx:Y6(t,i,n),cy:K6(e,i,n),r:i,stroke:"transparent",fill:"transparent"}),W6=()=>!0;var gc=n=>{const t=({id:e,className:i,type:s,data:a,onClick:r,onEdgeDoubleClick:o,selected:l,animated:u,label:h,labelStyle:d,labelShowBg:f,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:m,style:S,source:p,target:y,sourceX:A,sourceY:w,targetX:T,targetY:C,sourcePosition:M,targetPosition:L,elementsSelectable:k,hidden:P,sourceHandleId:H,targetHandleId:$,onContextMenu:G,onMouseEnter:R,onMouseMove:B,onMouseLeave:E,reconnectRadius:N,onReconnect:z,onReconnectStart:O,onReconnectEnd:I,markerEnd:V,markerStart:F,rfId:X,ariaLabel:Y,isFocusable:tt,isReconnectable:ut,pathOptions:it,interactionWidth:Nt,disableKeyboardA11y:qt})=>{const Et=D.useRef(null),[hn,Ae]=D.useState(!1),[xn,En]=D.useState(!1),we=Ue(),is=D.useMemo(()=>`url('#${Mv(F,X)}')`,[F,X]),Gt=D.useMemo(()=>`url('#${Mv(V,X)}')`,[V,X]);if(P)return null;const at=tn=>{var ss;const{edges:ki,addSelectedEdges:fo,unselectNodesAndEdges:go,multiSelectionActive:po}=we.getState(),Hs=ki.find(Lh=>Lh.id===e);Hs&&(k&&(we.setState({nodesSelectionActive:!1}),Hs.selected&&po?(go({nodes:[],edges:[Hs]}),(ss=Et.current)==null||ss.blur()):fo([e])),r&&r(tn,Hs))},In=Vh(e,we.getState,o),co=Vh(e,we.getState,G),Nh=Vh(e,we.getState,R),sc=Vh(e,we.getState,B),ac=Vh(e,we.getState,E),Ps=(tn,ki)=>{if(tn.button!==0)return;const{edges:fo,isValidConnection:go}=we.getState(),po=ki?y:p,Hs=(ki?$:H)||null,ss=ki?"target":"source",Lh=go||W6,by=ki,kh=fo.find(mo=>mo.id===e);En(!0),O==null||O(tn,kh,ss);const vy=mo=>{En(!1),I==null||I(mo,kh,ss)};yC({event:tn,handleId:Hs,nodeId:po,onConnect:mo=>z==null?void 0:z(kh,mo),isTarget:by,getState:we.getState,setState:we.setState,isValidConnection:Lh,edgeUpdaterType:ss,onReconnectEnd:vy})},rc=tn=>Ps(tn,!0),uo=tn=>Ps(tn,!1),ho=()=>Ae(!0),oc=()=>Ae(!1),lc=!k&&!r,Dh=tn=>{var ki;if(!qt&&aC.includes(tn.key)&&k){const{unselectNodesAndEdges:fo,addSelectedEdges:go,edges:po}=we.getState();tn.key==="Escape"?((ki=Et.current)==null||ki.blur(),fo({edges:[po.find(ss=>ss.id===e)]})):go([e])}};return j.createElement("g",{className:_n(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:l,animated:u,inactive:lc,updating:hn}]),onClick:at,onDoubleClick:In,onContextMenu:co,onMouseEnter:Nh,onMouseMove:sc,onMouseLeave:ac,onKeyDown:tt?Dh:void 0,tabIndex:tt?0:void 0,role:tt?"button":"img","data-testid":`rf__edge-${e}`,"aria-label":Y===null?void 0:Y||`Edge from ${p} to ${y}`,"aria-describedby":tt?`${TC}-${X}`:void 0,ref:Et},!xn&&j.createElement(n,{id:e,source:p,target:y,selected:l,animated:u,label:h,labelStyle:d,labelShowBg:f,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:m,data:a,style:S,sourceX:A,sourceY:w,targetX:T,targetY:C,sourcePosition:M,targetPosition:L,sourceHandleId:H,targetHandleId:$,markerStart:is,markerEnd:Gt,pathOptions:it,interactionWidth:Nt}),ut&&j.createElement(j.Fragment,null,(ut==="source"||ut===!0)&&j.createElement(X_,{position:M,centerX:A,centerY:w,radius:N,onMouseDown:rc,onMouseEnter:ho,onMouseOut:oc,type:"source"}),(ut==="target"||ut===!0)&&j.createElement(X_,{position:L,centerX:T,centerY:C,radius:N,onMouseDown:uo,onMouseEnter:ho,onMouseOut:oc,type:"target"})))};return t.displayName="EdgeWrapper",D.memo(t)};function Z6(n){const t={default:gc(n.default||h0),straight:gc(n.bezier||lw),step:gc(n.step||ow),smoothstep:gc(n.step||hy),simplebezier:gc(n.simplebezier||rw)},e={},i=Object.keys(n).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=gc(n[a]||h0),s),e);return{...t,...i}}function Y_(n,t,e=null){const i=((e==null?void 0:e.x)||0)+t.x,s=((e==null?void 0:e.y)||0)+t.y,a=(e==null?void 0:e.width)||t.width,r=(e==null?void 0:e.height)||t.height;switch(n){case st.Top:return{x:i+a/2,y:s};case st.Right:return{x:i+a,y:s+r/2};case st.Bottom:return{x:i+a/2,y:s+r};case st.Left:return{x:i,y:s+r/2}}}function K_(n,t){return n?n.length===1||!t?n[0]:t&&n.find(e=>e.id===t)||null:null}const Q6=(n,t,e,i,s,a)=>{const r=Y_(e,n,t),o=Y_(a,i,s);return{sourceX:r.x,sourceY:r.y,targetX:o.x,targetY:o.y}};function J6({sourcePos:n,targetPos:t,sourceWidth:e,sourceHeight:i,targetWidth:s,targetHeight:a,width:r,height:o,transform:l}){const u={x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x+e,t.x+s),y2:Math.max(n.y+i,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const h=aw({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:r/l[2],height:o/l[2]}),d=Math.max(0,Math.min(h.x2,u.x2)-Math.max(h.x,u.x)),f=Math.max(0,Math.min(h.y2,u.y2)-Math.max(h.y,u.y));return Math.ceil(d*f)>0}function W_(n){var i,s,a,r,o;const t=((i=n==null?void 0:n[oe])==null?void 0:i.handleBounds)||null,e=t&&(n==null?void 0:n.width)&&(n==null?void 0:n.height)&&typeof((s=n==null?void 0:n.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=n==null?void 0:n.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((r=n==null?void 0:n.positionAbsolute)==null?void 0:r.x)||0,y:((o=n==null?void 0:n.positionAbsolute)==null?void 0:o.y)||0,width:(n==null?void 0:n.width)||0,height:(n==null?void 0:n.height)||0},t,!!e]}const tz=[{level:0,isMaxLevel:!0,edges:[]}];function ez(n,t,e=!1){let i=-1;const s=n.reduce((r,o)=>{var h,d;const l=Ri(o.zIndex);let u=l?o.zIndex:0;if(e){const f=t.get(o.target),g=t.get(o.source),b=o.selected||(f==null?void 0:f.selected)||(g==null?void 0:g.selected),m=Math.max(((h=g==null?void 0:g[oe])==null?void 0:h.z)||0,((d=f==null?void 0:f[oe])==null?void 0:d.z)||0,1e3);u=(l?o.zIndex:0)+(b?m:0)}return r[u]?r[u].push(o):r[u]=[o],i=u>i?u:i,r},{}),a=Object.entries(s).map(([r,o])=>{const l=+r;return{edges:o,level:l,isMaxLevel:l===i}});return a.length===0?tz:a}function nz(n,t,e){const i=ie(D.useCallback(s=>n?s.edges.filter(a=>{const r=t.get(a.source),o=t.get(a.target);return(r==null?void 0:r.width)&&(r==null?void 0:r.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&J6({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[n,t]));return ez(i,t,e)}const iz=({color:n="none",strokeWidth:t=1})=>j.createElement("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),sz=({color:n="none",strokeWidth:t=1})=>j.createElement("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Z_={[u0.Arrow]:iz,[u0.ArrowClosed]:sz};function az(n){const t=Ue();return D.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(Z_,n)?Z_[n]:((a=(s=t.getState()).onError)==null||a.call(s,"009",Ia.error009(n)),null)},[n])}const rz=({id:n,type:t,color:e,width:i=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:r,orient:o="auto-start-reverse"})=>{const l=az(t);return l?j.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},j.createElement(l,{color:e,strokeWidth:r})):null},oz=({defaultColor:n,rfId:t})=>e=>{const i=[];return e.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(r=>{if(r&&typeof r=="object"){const o=Mv(r,t);i.includes(o)||(s.push({id:o,color:r.color||n,...r}),i.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},HC=({defaultColor:n,rfId:t})=>{const e=ie(D.useCallback(oz({defaultColor:n,rfId:t}),[n,t]),(i,s)=>!(i.length!==s.length||i.some((a,r)=>a.id!==s[r].id)));return j.createElement("defs",null,e.map(i=>j.createElement(rz,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};HC.displayName="MarkerDefinitions";var lz=D.memo(HC);const cz=n=>({nodesConnectable:n.nodesConnectable,edgesFocusable:n.edgesFocusable,edgesUpdatable:n.edgesUpdatable,elementsSelectable:n.elementsSelectable,width:n.width,height:n.height,connectionMode:n.connectionMode,nodeInternals:n.nodeInternals,onError:n.onError}),IC=({defaultMarkerColor:n,onlyRenderVisibleElements:t,elevateEdgesOnSelect:e,rfId:i,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:r,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:h,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:m,children:S,disableKeyboardA11y:p})=>{const{edgesFocusable:y,edgesUpdatable:A,elementsSelectable:w,width:T,height:C,connectionMode:M,nodeInternals:L,onError:k}=ie(cz,un),P=nz(t,L,e);return T?j.createElement(j.Fragment,null,P.map(({level:H,edges:$,isMaxLevel:G})=>j.createElement("svg",{key:H,style:{zIndex:H},width:T,height:C,className:"react-flow__edges react-flow__container"},G&&j.createElement(lz,{defaultColor:n,rfId:i}),j.createElement("g",null,$.map(R=>{const[B,E,N]=W_(L.get(R.source)),[z,O,I]=W_(L.get(R.target));if(!N||!I)return null;let V=R.type||"default";s[V]||(k==null||k("011",Ia.error011(V)),V="default");const F=s[V]||s.default,X=M===Yl.Strict?O.target:(O.target??[]).concat(O.source??[]),Y=K_(E.source,R.sourceHandle),tt=K_(X,R.targetHandle),ut=(Y==null?void 0:Y.position)||st.Bottom,it=(tt==null?void 0:tt.position)||st.Top,Nt=!!(R.focusable||y&&typeof R.focusable>"u"),qt=R.reconnectable||R.updatable,Et=typeof f<"u"&&(qt||A&&typeof qt>"u");if(!Y||!tt)return k==null||k("008",Ia.error008(Y,R)),null;const{sourceX:hn,sourceY:Ae,targetX:xn,targetY:En}=Q6(B,Y,ut,z,tt,it);return j.createElement(F,{key:R.id,id:R.id,className:_n([R.className,a]),type:V,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:hn,sourceY:Ae,targetX:xn,targetY:En,sourcePosition:ut,targetPosition:it,elementsSelectable:w,onContextMenu:r,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:h,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:m,rfId:i,ariaLabel:R.ariaLabel,isFocusable:Nt,isReconnectable:Et,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:p})})))),S):null};IC.displayName="EdgeRenderer";var uz=D.memo(IC);const hz=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function dz({children:n}){const t=ie(hz);return j.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},n)}function fz(n){const t=fw(),e=D.useRef(!1);D.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const gz={[st.Left]:st.Right,[st.Right]:st.Left,[st.Top]:st.Bottom,[st.Bottom]:st.Top},BC=({nodeId:n,handleType:t,style:e,type:i=er.Bezier,CustomComponent:s,connectionStatus:a})=>{var C,M,L;const{fromNode:r,handleId:o,toX:l,toY:u,connectionMode:h}=ie(D.useCallback(k=>({fromNode:k.nodeInternals.get(n),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[n]),un),d=(C=r==null?void 0:r[oe])==null?void 0:C.handleBounds;let f=d==null?void 0:d[t];if(h===Yl.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!r||!f)return null;const g=o?f.find(k=>k.id===o):f[0],b=g?g.x+g.width/2:(r.width??0)/2,m=g?g.y+g.height/2:r.height??0,S=(((M=r.positionAbsolute)==null?void 0:M.x)??0)+b,p=(((L=r.positionAbsolute)==null?void 0:L.y)??0)+m,y=g==null?void 0:g.position,A=y?gz[y]:null;if(!y||!A)return null;if(s)return j.createElement(s,{connectionLineType:i,connectionLineStyle:e,fromNode:r,fromHandle:g,fromX:S,fromY:p,toX:l,toY:u,fromPosition:y,toPosition:A,connectionStatus:a});let w="";const T={sourceX:S,sourceY:p,sourcePosition:y,targetX:l,targetY:u,targetPosition:A};return i===er.Bezier?[w]=uC(T):i===er.Step?[w]=Cv({...T,borderRadius:0}):i===er.SmoothStep?[w]=Cv(T):i===er.SimpleBezier?[w]=cC(T):w=`M${S},${p} ${l},${u}`,j.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};BC.displayName="ConnectionLine";const pz=n=>({nodeId:n.connectionNodeId,handleType:n.connectionHandleType,nodesConnectable:n.nodesConnectable,connectionStatus:n.connectionStatus,width:n.width,height:n.height});function mz({containerStyle:n,style:t,type:e,component:i}){const{nodeId:s,handleType:a,nodesConnectable:r,width:o,height:l,connectionStatus:u}=ie(pz,un);return!(s&&a&&o&&r)?null:j.createElement("svg",{style:n,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},j.createElement("g",{className:_n(["react-flow__connection",u])},j.createElement(BC,{nodeId:s,handleType:a,style:t,type:e,CustomComponent:i,connectionStatus:u})))}function Q_(n,t){return D.useRef(null),Ue(),D.useMemo(()=>t(n),[n])}const FC=({nodeTypes:n,edgeTypes:t,onMove:e,onMoveStart:i,onMoveEnd:s,onInit:a,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:m,onSelectionEnd:S,connectionLineType:p,connectionLineStyle:y,connectionLineComponent:A,connectionLineContainerStyle:w,selectionKeyCode:T,selectionOnDrag:C,selectionMode:M,multiSelectionKeyCode:L,panActivationKeyCode:k,zoomActivationKeyCode:P,deleteKeyCode:H,onlyRenderVisibleElements:$,elementsSelectable:G,selectNodesOnDrag:R,defaultViewport:B,translateExtent:E,minZoom:N,maxZoom:z,preventScrolling:O,defaultMarkerColor:I,zoomOnScroll:V,zoomOnPinch:F,panOnScroll:X,panOnScrollSpeed:Y,panOnScrollMode:tt,zoomOnDoubleClick:ut,panOnDrag:it,onPaneClick:Nt,onPaneMouseEnter:qt,onPaneMouseMove:Et,onPaneMouseLeave:hn,onPaneScroll:Ae,onPaneContextMenu:xn,onEdgeContextMenu:En,onEdgeMouseEnter:we,onEdgeMouseMove:is,onEdgeMouseLeave:Gt,onReconnect:at,onReconnectStart:In,onReconnectEnd:co,reconnectRadius:Nh,noDragClassName:sc,noWheelClassName:ac,noPanClassName:Ps,elevateEdgesOnSelect:rc,disableKeyboardA11y:uo,nodeOrigin:ho,nodeExtent:oc,rfId:lc})=>{const Dh=Q_(n,V6),tn=Q_(t,Z6);return fz(a),j.createElement(j6,{onPaneClick:Nt,onPaneMouseEnter:qt,onPaneMouseMove:Et,onPaneMouseLeave:hn,onPaneContextMenu:xn,onPaneScroll:Ae,deleteKeyCode:H,selectionKeyCode:T,selectionOnDrag:C,selectionMode:M,onSelectionStart:m,onSelectionEnd:S,multiSelectionKeyCode:L,panActivationKeyCode:k,zoomActivationKeyCode:P,elementsSelectable:G,onMove:e,onMoveStart:i,onMoveEnd:s,zoomOnScroll:V,zoomOnPinch:F,zoomOnDoubleClick:ut,panOnScroll:X,panOnScrollSpeed:Y,panOnScrollMode:tt,panOnDrag:it,defaultViewport:B,translateExtent:E,minZoom:N,maxZoom:z,onSelectionContextMenu:b,preventScrolling:O,noDragClassName:sc,noWheelClassName:ac,noPanClassName:Ps,disableKeyboardA11y:uo},j.createElement(dz,null,j.createElement(uz,{edgeTypes:tn,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:$,onEdgeContextMenu:En,onEdgeMouseEnter:we,onEdgeMouseMove:is,onEdgeMouseLeave:Gt,onReconnect:at,onReconnectStart:In,onReconnectEnd:co,reconnectRadius:Nh,defaultMarkerColor:I,noPanClassName:Ps,elevateEdgesOnSelect:!!rc,disableKeyboardA11y:uo,rfId:lc},j.createElement(mz,{style:y,type:p,component:A,containerStyle:w})),j.createElement("div",{className:"react-flow__edgelabel-renderer"}),j.createElement(X6,{nodeTypes:Dh,onNodeClick:r,onNodeDoubleClick:l,onNodeMouseEnter:h,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:g,selectNodesOnDrag:R,onlyRenderVisibleElements:$,noPanClassName:Ps,noDragClassName:sc,disableKeyboardA11y:uo,nodeOrigin:ho,nodeExtent:oc,rfId:lc})))};FC.displayName="GraphView";var yz=D.memo(FC);const Lv=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Va={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Lv,nodeExtent:Lv,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Yl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:V4,isValidConnection:void 0},bz=()=>ik((n,t)=>({...Va,setNodes:e=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:a}=t();n({nodeInternals:cb(e,i,s,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:e=>{const{defaultEdgeOptions:i={}}=t();n({edges:e.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(e,i)=>{const s=typeof e<"u",a=typeof i<"u",r=s?cb(e,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;n({nodeInternals:r,edges:a?i:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:e=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:r,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),h=l==null?void 0:l.querySelector(".react-flow__viewport");if(!h)return;const d=window.getComputedStyle(h),{m22:f}=new window.DOMMatrixReadOnly(d.transform),g=e.reduce((m,S)=>{const p=s.get(S.id);if(p!=null&&p.hidden)s.set(p.id,{...p,[oe]:{...p[oe],handleBounds:void 0}});else if(p){const y=iw(S.nodeElement);!!(y.width&&y.height&&(p.width!==y.width||p.height!==y.height||S.forceUpdate))&&(s.set(p.id,{...p,[oe]:{...p[oe],handleBounds:{source:$_(".source",S.nodeElement,f,u),target:$_(".target",S.nodeElement,f,u)}},...y}),m.push({id:p.id,type:"dimensions",dimensions:y}))}return m},[]);MC(s,u);const b=r||a&&!r&&RC(t,{initial:!0,...o});n({nodeInternals:new Map(s),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(i==null||i(g))},updateNodePositions:(e,i=!0,s=!1)=>{const{triggerNodeChanges:a}=t(),r=e.map(o=>{const l={id:o.id,type:"position",dragging:s};return i&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(r)},triggerNodeChanges:e=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:r,getNodes:o,elevateNodesOnSelect:l}=t();if(e!=null&&e.length){if(a){const u=k6(e,o()),h=cb(u,s,r,l);n({nodeInternals:h})}i==null||i(e)}},addSelectedNodes:e=>{const{multiSelectionActive:i,edges:s,getNodes:a}=t();let r,o=null;i?r=e.map(l=>Wa(l,!0)):(r=Bc(a(),e),o=Bc(s,[])),xp({changedNodes:r,changedEdges:o,get:t,set:n})},addSelectedEdges:e=>{const{multiSelectionActive:i,edges:s,getNodes:a}=t();let r,o=null;i?r=e.map(l=>Wa(l,!0)):(r=Bc(s,e),o=Bc(a(),[])),xp({changedNodes:o,changedEdges:r,get:t,set:n})},unselectNodesAndEdges:({nodes:e,edges:i}={})=>{const{edges:s,getNodes:a}=t(),r=e||a(),o=i||s,l=r.map(h=>(h.selected=!1,Wa(h.id,!1))),u=o.map(h=>Wa(h.id,!1));xp({changedNodes:l,changedEdges:u,get:t,set:n})},setMinZoom:e=>{const{d3Zoom:i,maxZoom:s}=t();i==null||i.scaleExtent([e,s]),n({minZoom:e})},setMaxZoom:e=>{const{d3Zoom:i,minZoom:s}=t();i==null||i.scaleExtent([s,e]),n({maxZoom:e})},setTranslateExtent:e=>{var i;(i=t().d3Zoom)==null||i.translateExtent(e),n({translateExtent:e})},resetSelectedElements:()=>{const{edges:e,getNodes:i}=t(),a=i().filter(o=>o.selected).map(o=>Wa(o.id,!1)),r=e.filter(o=>o.selected).map(o=>Wa(o.id,!1));xp({changedNodes:a,changedEdges:r,get:t,set:n})},setNodeExtent:e=>{const{nodeInternals:i}=t();i.forEach(s=>{s.positionAbsolute=sw(s.position,e)}),n({nodeExtent:e,nodeInternals:new Map(i)})},panBy:e=>{const{transform:i,width:s,height:a,d3Zoom:r,d3Selection:o,translateExtent:l}=t();if(!r||!o||!e.x&&!e.y)return!1;const u=Zr.translate(i[0]+e.x,i[1]+e.y).scale(i[2]),h=[[0,0],[s,a]],d=r==null?void 0:r.constrain()(u,h,l);return r.transform(o,d),i[0]!==d.x||i[1]!==d.y||i[2]!==d.k},cancelConnection:()=>n({connectionNodeId:Va.connectionNodeId,connectionHandleId:Va.connectionHandleId,connectionHandleType:Va.connectionHandleType,connectionStatus:Va.connectionStatus,connectionStartHandle:Va.connectionStartHandle,connectionEndHandle:Va.connectionEndHandle}),reset:()=>n({...Va})}),Object.is),pw=({children:n})=>{const t=D.useRef(null);return t.current||(t.current=bz()),j.createElement(P4,{value:t.current},n)};pw.displayName="ReactFlowProvider";const UC=({children:n})=>D.useContext(uy)?j.createElement(j.Fragment,null,n):j.createElement(pw,null,n);UC.displayName="ReactFlowWrapper";const vz={input:wC,default:Nv,output:_C,group:dw},Az={default:h0,straight:lw,step:ow,smoothstep:hy,simplebezier:rw},wz=[0,0],Sz=[15,15],_z={x:0,y:0,zoom:1},xz={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},jC=D.forwardRef(({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:s,nodeTypes:a=vz,edgeTypes:r=Az,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:h,onMoveStart:d,onMoveEnd:f,onConnect:g,onConnectStart:b,onConnectEnd:m,onClickConnectStart:S,onClickConnectEnd:p,onNodeMouseEnter:y,onNodeMouseMove:A,onNodeMouseLeave:w,onNodeContextMenu:T,onNodeDoubleClick:C,onNodeDragStart:M,onNodeDrag:L,onNodeDragStop:k,onNodesDelete:P,onEdgesDelete:H,onSelectionChange:$,onSelectionDragStart:G,onSelectionDrag:R,onSelectionDragStop:B,onSelectionContextMenu:E,onSelectionStart:N,onSelectionEnd:z,connectionMode:O=Yl.Strict,connectionLineType:I=er.Bezier,connectionLineStyle:V,connectionLineComponent:F,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:tt="Shift",selectionOnDrag:ut=!1,selectionMode:it=nf.Full,panActivationKeyCode:Nt="Space",multiSelectionKeyCode:qt=c0()?"Meta":"Control",zoomActivationKeyCode:Et=c0()?"Meta":"Control",snapToGrid:hn=!1,snapGrid:Ae=Sz,onlyRenderVisibleElements:xn=!1,selectNodesOnDrag:En=!0,nodesDraggable:we,nodesConnectable:is,nodesFocusable:Gt,nodeOrigin:at=wz,edgesFocusable:In,edgesUpdatable:co,elementsSelectable:Nh,defaultViewport:sc=_z,minZoom:ac=.5,maxZoom:Ps=2,translateExtent:rc=Lv,preventScrolling:uo=!0,nodeExtent:ho,defaultMarkerColor:oc="#b1b1b7",zoomOnScroll:lc=!0,zoomOnPinch:Dh=!0,panOnScroll:tn=!1,panOnScrollSpeed:ki=.5,panOnScrollMode:fo=Mo.Free,zoomOnDoubleClick:go=!0,panOnDrag:po=!0,onPaneClick:Hs,onPaneMouseEnter:ss,onPaneMouseMove:Lh,onPaneMouseLeave:by,onPaneScroll:kh,onPaneContextMenu:vy,children:Ow,onEdgeContextMenu:mo,onEdgeDoubleClick:tN,onEdgeMouseEnter:eN,onEdgeMouseMove:nN,onEdgeMouseLeave:iN,onEdgeUpdate:sN,onEdgeUpdateStart:aN,onEdgeUpdateEnd:rN,onReconnect:oN,onReconnectStart:lN,onReconnectEnd:cN,reconnectRadius:uN=10,edgeUpdaterRadius:hN=10,onNodesChange:dN,onEdgesChange:fN,noDragClassName:gN="nodrag",noWheelClassName:pN="nowheel",noPanClassName:zw="nopan",fitView:mN=!1,fitViewOptions:yN,connectOnClick:bN=!0,attributionPosition:vN,proOptions:AN,defaultEdgeOptions:wN,elevateNodesOnSelect:SN=!0,elevateEdgesOnSelect:_N=!1,disableKeyboardA11y:Pw=!1,autoPanOnConnect:xN=!0,autoPanOnNodeDrag:EN=!0,connectionRadius:TN=20,isValidConnection:CN,onError:MN,style:RN,id:Hw,nodeDragThreshold:NN,...DN},LN)=>{const Ay=Hw||"1";return j.createElement("div",{...DN,style:{...RN,...xz},ref:LN,className:_n(["react-flow",s]),"data-testid":"rf__wrapper",id:Hw},j.createElement(UC,null,j.createElement(yz,{onInit:u,onMove:h,onMoveStart:d,onMoveEnd:f,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:A,onNodeMouseLeave:w,onNodeContextMenu:T,onNodeDoubleClick:C,nodeTypes:a,edgeTypes:r,connectionLineType:I,connectionLineStyle:V,connectionLineComponent:F,connectionLineContainerStyle:X,selectionKeyCode:tt,selectionOnDrag:ut,selectionMode:it,deleteKeyCode:Y,multiSelectionKeyCode:qt,panActivationKeyCode:Nt,zoomActivationKeyCode:Et,onlyRenderVisibleElements:xn,selectNodesOnDrag:En,defaultViewport:sc,translateExtent:rc,minZoom:ac,maxZoom:Ps,preventScrolling:uo,zoomOnScroll:lc,zoomOnPinch:Dh,zoomOnDoubleClick:go,panOnScroll:tn,panOnScrollSpeed:ki,panOnScrollMode:fo,panOnDrag:po,onPaneClick:Hs,onPaneMouseEnter:ss,onPaneMouseMove:Lh,onPaneMouseLeave:by,onPaneScroll:kh,onPaneContextMenu:vy,onSelectionContextMenu:E,onSelectionStart:N,onSelectionEnd:z,onEdgeContextMenu:mo,onEdgeDoubleClick:tN,onEdgeMouseEnter:eN,onEdgeMouseMove:nN,onEdgeMouseLeave:iN,onReconnect:oN??sN,onReconnectStart:lN??aN,onReconnectEnd:cN??rN,reconnectRadius:uN??hN,defaultMarkerColor:oc,noDragClassName:gN,noWheelClassName:pN,noPanClassName:zw,elevateEdgesOnSelect:_N,rfId:Ay,disableKeyboardA11y:Pw,nodeOrigin:at,nodeExtent:ho}),j.createElement(f6,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:g,onConnectStart:b,onConnectEnd:m,onClickConnectStart:S,onClickConnectEnd:p,nodesDraggable:we,nodesConnectable:is,nodesFocusable:Gt,edgesFocusable:In,edgesUpdatable:co,elementsSelectable:Nh,elevateNodesOnSelect:SN,minZoom:ac,maxZoom:Ps,nodeExtent:ho,onNodesChange:dN,onEdgesChange:fN,snapToGrid:hn,snapGrid:Ae,connectionMode:O,translateExtent:rc,connectOnClick:bN,defaultEdgeOptions:wN,fitView:mN,fitViewOptions:yN,onNodesDelete:P,onEdgesDelete:H,onNodeDragStart:M,onNodeDrag:L,onNodeDragStop:k,onSelectionDrag:R,onSelectionDragStart:G,onSelectionDragStop:B,noPanClassName:zw,nodeOrigin:at,rfId:Ay,autoPanOnConnect:xN,autoPanOnNodeDrag:EN,onError:MN,connectionRadius:TN,isValidConnection:CN,nodeDragThreshold:NN}),j.createElement(h6,{onSelectionChange:$}),Ow,j.createElement(I4,{proOptions:AN,position:vN}),j.createElement(b6,{rfId:Ay,disableKeyboardA11y:Pw})))});jC.displayName="ReactFlow";function Ez(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},j.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Tz(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},j.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Cz(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},j.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Mz(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},j.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Rz(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},j.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const id=({children:n,className:t,...e})=>j.createElement("button",{type:"button",className:_n(["react-flow__controls-button",t]),...e},n);id.displayName="ControlButton";const Nz=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom}),GC=({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:r,onFitView:o,onInteractiveChange:l,className:u,children:h,position:d="bottom-left"})=>{const f=Ue(),[g,b]=D.useState(!1),{isInteractive:m,minZoomReached:S,maxZoomReached:p}=ie(Nz,un),{zoomIn:y,zoomOut:A,fitView:w}=fw();if(D.useEffect(()=>{b(!0)},[]),!g)return null;const T=()=>{y(),a==null||a()},C=()=>{A(),r==null||r()},M=()=>{w(s),o==null||o()},L=()=>{f.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)};return j.createElement(nC,{className:_n(["react-flow__controls",u]),position:d,style:n,"data-testid":"rf__controls"},t&&j.createElement(j.Fragment,null,j.createElement(id,{onClick:T,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:p},j.createElement(Ez,null)),j.createElement(id,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},j.createElement(Tz,null))),e&&j.createElement(id,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view"},j.createElement(Cz,null)),i&&j.createElement(id,{className:"react-flow__controls-interactive",onClick:L,title:"toggle interactivity","aria-label":"toggle interactivity"},m?j.createElement(Rz,null):j.createElement(Mz,null)),h)};GC.displayName="Controls";var Dz=D.memo(GC),Qi;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Qi||(Qi={}));function Lz({color:n,dimensions:t,lineWidth:e}){return j.createElement("path",{stroke:n,strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function kz({color:n,radius:t}){return j.createElement("circle",{cx:t,cy:t,r:t,fill:n})}const Oz={[Qi.Dots]:"#91919a",[Qi.Lines]:"#eee",[Qi.Cross]:"#e2e2e2"},zz={[Qi.Dots]:1,[Qi.Lines]:1,[Qi.Cross]:6},Pz=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function VC({id:n,variant:t=Qi.Dots,gap:e=20,size:i,lineWidth:s=1,offset:a=2,color:r,style:o,className:l}){const u=D.useRef(null),{transform:h,patternId:d}=ie(Pz,un),f=r||Oz[t],g=i||zz[t],b=t===Qi.Dots,m=t===Qi.Cross,S=Array.isArray(e)?e:[e,e],p=[S[0]*h[2]||1,S[1]*h[2]||1],y=g*h[2],A=m?[y,y]:p,w=b?[y/a,y/a]:[A[0]/a,A[1]/a];return j.createElement("svg",{className:_n(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},j.createElement("pattern",{id:d+n,x:h[0]%p[0],y:h[1]%p[1],width:p[0],height:p[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},b?j.createElement(kz,{color:f,radius:y/a}):j.createElement(Lz,{dimensions:A,color:f,lineWidth:s})),j.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+n})`}))}VC.displayName="Background";var Hz=D.memo(VC);function Iz({activeNodeId:n}){const t=(s,a,r,o)=>({background:n===s?r:a,padding:10,border:`2px solid ${o}`,boxShadow:n===s?"0 0 10px rgba(0, 0, 0, 0.3)":"0 0 0 rgba(0, 0, 0, 0)",transition:"all 0.3s ease-in-out"}),e=[{id:"1",data:{label:" S3 (Upload)"},position:{x:100,y:0},style:t("1","#ebf8ff","#bae6fd","#3182ce")},{id:"2",data:{label:" API Gateway"},position:{x:100,y:100},style:t("2","#ffffcc","#fef08a","#d69e2e")},{id:"3",data:{label:" Lambda (Anlisis)"},position:{x:100,y:200},style:t("3","#fee2e2","#fecaca","#e53e3e")},{id:"4",data:{label:" DynamoDB (Resultados)"},position:{x:100,y:300},style:t("4","#ccfbf1","#99f6e4","#2c7a7b")}],i=[{id:"e1-2",source:"1",target:"2"},{id:"e2-3",source:"2",target:"3"},{id:"e3-4",source:"3",target:"4"}];return U.jsx("div",{className:"w-full h-full rounded bg-white border shadow",children:U.jsx(pw,{children:U.jsxs(jC,{nodes:e,edges:i,fitView:!0,children:[U.jsx(Hz,{}),U.jsx(Dz,{})]})})})}function Bz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const Fz=D.forwardRef(Bz);function Uz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const J_=D.forwardRef(Uz);function jz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const Gz=D.forwardRef(jz);function Vz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const $z=D.forwardRef(Vz);function qz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const Xz=D.forwardRef(qz);function Yz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Kz=D.forwardRef(Yz);function Wz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const Zz=D.forwardRef(Wz);function Qz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const fb=D.forwardRef(Qz);function Jz({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const $C=D.forwardRef(Jz);function tP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const qC=D.forwardRef(tP);function eP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const nP=D.forwardRef(eP);function iP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"}))}const sP=D.forwardRef(iP);function aP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const rP=D.forwardRef(aP);function oP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const lP=D.forwardRef(oP);function cP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const tx=D.forwardRef(cP);function uP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const hP=D.forwardRef(uP);function dP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const fP=D.forwardRef(dP);function gP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const ex=D.forwardRef(gP);function pP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const mP=D.forwardRef(pP);function yP({title:n,titleId:t,...e},i){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},e),n?D.createElement("title",{id:t},n):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const bP=D.forwardRef(yP);function vP(n){switch(n){case"success":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200",Icon:$z};case"error":return{bg:"bg-red-100",text:"text-red-800",border:"border-red-200",Icon:$C};default:return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200",Icon:qC}}}const AP=({message:n,type:t="info",time:e})=>{const{bg:i,text:s,border:a,Icon:r}=vP(t);return U.jsx("div",{className:`relative max-w-[80%] p-4 mb-3 border rounded-lg shadow-sm ${i} ${s} ${a}`,children:U.jsxs("div",{className:"flex items-start space-x-2",children:[U.jsx(r,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),U.jsxs("div",{className:"flex flex-col",children:[U.jsx("p",{className:"text-sm leading-snug",children:n}),U.jsxs("div",{className:"flex items-center mt-1 text-xs text-slate-500",children:[U.jsx(Kz,{className:"w-3 h-3 mr-1"}),e]})]})]})})};var Pd={};Pd.d=(n,t)=>{for(var e in t)Pd.o(t,e)&&!Pd.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Pd.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var ot=globalThis.pdfjsLib={};Pd.d(ot,{AbortException:()=>no,AnnotationEditorLayer:()=>$1,AnnotationEditorParamsType:()=>wt,AnnotationEditorType:()=>ct,AnnotationEditorUIManager:()=>Wl,AnnotationLayer:()=>A1,AnnotationMode:()=>nr,AnnotationType:()=>ge,ColorPicker:()=>v0,DOMSVGFactory:()=>y0,DrawLayer:()=>Y1,FeatureTest:()=>Je,GlobalWorkerOptions:()=>wa,ImageKind:()=>Wp,InvalidPDFException:()=>Ov,MathClamp:()=>bn,OPS:()=>f0,OutputScale:()=>Ba,PDFDataRangeTransport:()=>KM,PDFDateString:()=>Aw,PDFWorker:()=>eu,PasswordResponses:()=>_P,PermissionFlag:()=>SP,PixelsPerInch:()=>io,RenderingCancelledException:()=>bw,ResponseException:()=>g0,SignatureExtractor:()=>Sa,SupportedImageMimeTypes:()=>Pv,TextLayer:()=>af,TouchManager:()=>m0,Util:()=>et,VerbosityLevel:()=>dy,XfaLayer:()=>ZM,build:()=>$8,createValidAbsoluteUrl:()=>CP,fetchData:()=>Wg,getDocument:()=>O8,getFilenameFromUrl:()=>PP,getPdfFilenameFromUrl:()=>HP,getUuid:()=>KC,getXfaPageViewport:()=>IP,isDataScheme:()=>py,isPdfFile:()=>vw,isValidExplicitDest:()=>I8,noContextMenu:()=>Ji,normalizeUnicode:()=>kP,setLayerDimensions:()=>Kl,shadow:()=>At,stopEvent:()=>me,version:()=>V8});const Xe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),XC=[1,0,0,1,0,0],kv=[.001,0,0,.001,0,0],gb=1.35,ei={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},nr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},wP="pdfjs_internal_editor_",ct={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},SP={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},en={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Wp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},vc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},dy={ERRORS:0,WARNINGS:1,INFOS:5},f0={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Tp={moveTo:0,lineTo:1,curveTo:2,closePath:3},_P={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let fy=dy.WARNINGS;function xP(n){Number.isInteger(n)&&(fy=n)}function EP(){return fy}function gy(n){fy>=dy.INFOS&&console.log(`Info: ${n}`)}function ht(n){fy>=dy.WARNINGS&&console.log(`Warning: ${n}`)}function It(n){throw new Error(n)}function ye(n,t){n||It(t)}function TP(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function CP(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=LP(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return TP(i)?i:null}function At(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const nc=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class nx extends nc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class pb extends nc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Ov extends nc{constructor(t){super(t,"InvalidPDFException")}}class g0 extends nc{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class MP extends nc{constructor(t){super(t,"FormatError")}}class no extends nc{constructor(t){super(t,"AbortException")}}function YC(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&It("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),r=n.subarray(s,a);i.push(String.fromCharCode.apply(null,r))}return i.join("")}function Kg(n){typeof n!="string"&&It("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function RP(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function mw(n){const t=Object.create(null);for(const[e,i]of n)t[e]=i;return t}function NP(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function DP(){try{return new Function(""),!0}catch{return!1}}class Je{static get isLittleEndian(){return At(this,"isLittleEndian",NP())}static get isEvalSupported(){return At(this,"isEvalSupported",DP())}static get isOffscreenCanvasSupported(){return At(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return At(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return At(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return At(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return At(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const mb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Da,Zp,zv;class et{static makeHexColor(t,e,i){return`#${mb[t]}${mb[e]}${mb[i]}`}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,a]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],a[0],r[0]),Math.min(i[1],s[1],a[1],r[1]),Math.max(i[0],s[0],a[0],r[0]),Math.max(i[1],s[1],a[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],o=(i+r)/2,l=Math.sqrt((i+r)**2-4*(i*r-a*s))/2,u=o+l||1,h=o-l||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>r?null:[i,a,s,r]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,a){a[0]=Math.min(a[0],t,i),a[1]=Math.min(a[1],e,s),a[2]=Math.max(a[2],t,i),a[3]=Math.max(a[3],e,s)}static bezierBoundingBox(t,e,i,s,a,r,o,l,u){u[0]=Math.min(u[0],t,o),u[1]=Math.min(u[1],e,l),u[2]=Math.max(u[2],t,o),u[3]=Math.max(u[3],e,l),x(this,Da,zv).call(this,t,i,a,o,e,s,r,l,3*(-t+3*(i-a)+o),6*(t-2*i+a),3*(i-t),u),x(this,Da,zv).call(this,t,i,a,o,e,s,r,l,3*(-e+3*(s-r)+l),6*(e-2*s+r),3*(s-e),u)}}Da=new WeakSet,Zp=function(t,e,i,s,a,r,o,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,b=d*(d*(d*t+3*u*e)+3*f*i)+g*s,m=d*(d*(d*a+3*u*r)+3*f*o)+g*l;h[0]=Math.min(h[0],b),h[1]=Math.min(h[1],m),h[2]=Math.max(h[2],b),h[3]=Math.max(h[3],m)},zv=function(t,e,i,s,a,r,o,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&x(this,Da,Zp).call(this,t,e,i,s,a,r,o,l,-d/h,f);return}const g=h**2-4*d*u;if(g<0)return;const b=Math.sqrt(g),m=2*u;x(this,Da,Zp).call(this,t,e,i,s,a,r,o,l,(-h+b)/m,f),x(this,Da,Zp).call(this,t,e,i,s,a,r,o,l,(-h-b)/m,f)},_(et,Da);function LP(n){return decodeURIComponent(escape(n))}let yb=null,ix=null;function kP(n){return yb||(yb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ix=new Map([["","t"]])),n.replaceAll(yb,(t,e,i)=>e?e.normalize("NFKC"):ix.get(i))}function KC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),YC(n)}const yw="pdfjs_internal_id_";function OP(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...a]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const r=a.length;let o=!0;switch(s.name){case"XYZ":if(r<2||r>3)return!1;break;case"Fit":case"FitB":return r===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(r>1)return!1;break;case"FitR":if(r!==4)return!1;o=!1;break;default:return!1}for(const l of a)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function bn(n,t,e){return Math.min(Math.max(n,t),e)}function WC(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(YC(n))}function zP(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Kg(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const js="http://www.w3.org/2000/svg",Eo=class Eo{};J(Eo,"CSS",96),J(Eo,"PDF",72),J(Eo,"PDF_TO_CSS_UNITS",Eo.CSS/Eo.PDF);let io=Eo;async function Wg(n,t="text"){if(Ac(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Zg{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:a=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=a,this.offsetY=r,i*=e;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,g;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,g=1;break;case 90:h=0,d=1,f=1,g=0;break;case 270:h=0,d=-1,f=-1,g=0;break;case 0:h=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,g=-g);let b,m,S,p;h===0?(b=Math.abs(u-t[1])*i+a,m=Math.abs(l-t[0])*i+r,S=(t[3]-t[1])*i,p=(t[2]-t[0])*i):(b=Math.abs(l-t[0])*i+a,m=Math.abs(u-t[1])*i+r,S=(t[2]-t[0])*i,p=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,g*i,b-h*i*l-f*i*u,m-d*i*l-g*i*u],this.width=S,this.height=p}get rawDims(){const t=this.viewBox;return At(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new Zg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){return et.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=et.applyTransform([t[0],t[1]],this.transform),i=et.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return et.applyInverseTransform([t,e],this.transform)}}class bw extends nc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function py(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function vw(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function PP(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function HP(n,t="document.pdf"){if(typeof n!="string")return t;if(py(n))return ht('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(n);let a=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||t}class sx{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(t){t in this.started&&ht(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ht(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-s}ms
`);return t.join("")}}function Ac(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ji(n){n.preventDefault()}function me(n){n.preventDefault(),n.stopPropagation()}var of;class Aw{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,of)||v(this,of,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,of).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(r+=h,o+=d):u==="+"&&(r-=h,o-=d),new Date(Date.UTC(i,s,a,r,o,l))}}of=new WeakMap,_(Aw,of);function IP(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,a=[0,0,parseInt(i),parseInt(s)];return new Zg({viewBox:a,userUnit:1,scale:t,rotation:e})}function ww(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ht(`Not a valid color format: "${n}"`),[0,0,0])}function BP(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,ww(i))}t.remove()}function Wt(n){const{a:t,b:e,c:i,d:s,e:a,f:r}=n.getTransform();return[t,e,i,s,a,r]}function rs(n){const{a:t,b:e,c:i,d:s,e:a,f:r}=n.getTransform().invertSelf();return[t,e,i,s,a,r]}function Kl(n,t,e=!1,i=!0){if(t instanceof Zg){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:r}=n,o=Je.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${a}px`,h=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(r.width=h,r.height=d):(r.width=d,r.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class Ba{constructor(){const{pixelRatio:t}=Ba;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s){let a=1/0,r=1/0,o=1/0;i>0&&(a=Math.sqrt(i/(t*e))),s!==-1&&(r=s/t,o=s/e);const l=Math.min(a,r,o);return this.sx>l||this.sy>l?(this.sx=l,this.sy=l,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const Pv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ir,Ro,fi,sr,lf,nu,cf,S0,ZC,Ze,QC,JC,sd,tM,Qp;const $s=class $s{constructor(t){_(this,Ze);_(this,ir,null);_(this,Ro,null);_(this,fi);_(this,sr,null);_(this,lf,null);_(this,nu,null);v(this,fi,t),c($s,cf)||v($s,cf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=v(this,ir,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,fi)._uiManager._signal;t.addEventListener("contextmenu",Ji,{signal:e}),t.addEventListener("pointerdown",x($s,S0,ZC),{signal:e});const i=v(this,sr,document.createElement("div"));i.className="buttons",t.append(i);const s=c(this,fi).toolbarPosition;if(s){const{style:a}=t,r=c(this,fi)._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,Ze,tM).call(this),t}get div(){return c(this,ir)}hide(){var t;c(this,ir).classList.add("hidden"),(t=c(this,Ro))==null||t.hideDropdown()}show(){var t;c(this,ir).classList.remove("hidden"),(t=c(this,lf))==null||t.shown()}async addAltText(t){const e=await t.render();x(this,Ze,sd).call(this,e),c(this,sr).prepend(e,c(this,Ze,Qp)),v(this,lf,t)}addColorPicker(t){v(this,Ro,t);const e=t.renderButton();x(this,Ze,sd).call(this,e),c(this,sr).prepend(e,c(this,Ze,Qp))}async addEditSignatureButton(t){const e=v(this,nu,await t.renderEditButton(c(this,fi)));x(this,Ze,sd).call(this,e),c(this,sr).prepend(e,c(this,Ze,Qp))}updateEditSignatureButton(t){c(this,nu)&&(c(this,nu).title=t)}remove(){var t;c(this,ir).remove(),(t=c(this,Ro))==null||t.destroy(),v(this,Ro,null)}};ir=new WeakMap,Ro=new WeakMap,fi=new WeakMap,sr=new WeakMap,lf=new WeakMap,nu=new WeakMap,cf=new WeakMap,S0=new WeakSet,ZC=function(t){t.stopPropagation()},Ze=new WeakSet,QC=function(t){c(this,fi)._focusEventsAllowed=!1,me(t)},JC=function(t){c(this,fi)._focusEventsAllowed=!0,me(t)},sd=function(t){const e=c(this,fi)._uiManager._signal;t.addEventListener("focusin",x(this,Ze,QC).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",x(this,Ze,JC).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ji,{signal:e})},tM=function(){const{editorType:t,_uiManager:e}=c(this,fi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",c($s,cf)[t]),x(this,Ze,sd).call(this,i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),c(this,sr).append(i)},Qp=function(){const t=document.createElement("div");return t.className="divider",t},_($s,S0),_($s,cf,null);let Hv=$s;var uf,No,Do,so,eM,nM,iM;class FP{constructor(t){_(this,so);_(this,uf,null);_(this,No,null);_(this,Do);v(this,Do,t)}show(t,e,i){const[s,a]=x(this,so,nM).call(this,e,i),{style:r}=c(this,No)||v(this,No,x(this,so,eM).call(this));t.append(c(this,No)),r.insetInlineEnd=`${100*s}%`,r.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,No).remove()}}uf=new WeakMap,No=new WeakMap,Do=new WeakMap,so=new WeakSet,eM=function(){const t=v(this,No,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ji,{signal:c(this,Do)._signal});const e=v(this,uf,document.createElement("div"));return e.className="buttons",t.append(e),x(this,so,iM).call(this),t},nM=function(t,e){let i=0,s=0;for(const a of t){const r=a.y+a.height;if(r<i)continue;const o=a.x+(e?a.width:0);if(r>i){s=o,i=r;continue}e?o>s&&(s=o):o<s&&(s=o)}return[e?1-s:s,i]},iM=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=c(this,Do)._signal;t.addEventListener("contextmenu",Ji,{signal:i}),t.addEventListener("click",()=>{c(this,Do).highlightSelection("floating_button")},{signal:i}),c(this,uf).append(t)};function Sw(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var _0;class UP{constructor(){_(this,_0,0)}get id(){return`${wP}${dn(this,_0)._++}`}}_0=new WeakMap;var iu,hf,sn,su,Jp;const Rw=class Rw{constructor(){_(this,su);_(this,iu,KC());_(this,hf,0);_(this,sn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return At(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:a}=t;return x(this,su,Jp).call(this,`${e}_${i}_${s}_${a}`,t)}async getFromUrl(t){return x(this,su,Jp).call(this,t,t)}async getFromBlob(t,e){const i=await e;return x(this,su,Jp).call(this,t,i)}async getFromId(t){c(this,sn)||v(this,sn,new Map);const e=c(this,sn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,sn)||v(this,sn,new Map);let i=c(this,sn).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${c(this,iu)}_${dn(this,hf)._++}`,refCounter:1,isSvg:!1},c(this,sn).set(t,i),c(this,sn).set(i.id,i),i}getSvgUrl(t){const e=c(this,sn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;c(this,sn)||v(this,sn,new Map);const e=c(this,sn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,iu)}_`)}};iu=new WeakMap,hf=new WeakMap,sn=new WeakMap,su=new WeakSet,Jp=async function(t,e){c(this,sn)||v(this,sn,new Map);let i=c(this,sn).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,iu)}_${dn(this,hf)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Wg(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=Rw._isSVGFittingCanvas,r=new FileReader,o=new Image,l=new Promise((u,h)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},r.onload=async()=>{const d=i.svgUrl=r.result;o.src=await a?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=r.onerror=h});r.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){ht(s),i=null}return c(this,sn).set(t,i),i&&c(this,sn).set(i.id,i),i};let Iv=Rw;var ce,ar,df,ne;class jP{constructor(t=128){_(this,ce,[]);_(this,ar,!1);_(this,df);_(this,ne,-1);v(this,df,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:a=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}){if(s&&t(),c(this,ar))return;const l={cmd:t,undo:e,post:i,type:a};if(c(this,ne)===-1){c(this,ce).length>0&&(c(this,ce).length=0),v(this,ne,0),c(this,ce).push(l);return}if(r&&c(this,ce)[c(this,ne)].type===a){o&&(l.undo=c(this,ce)[c(this,ne)].undo),c(this,ce)[c(this,ne)]=l;return}const u=c(this,ne)+1;u===c(this,df)?c(this,ce).splice(0,1):(v(this,ne,u),u<c(this,ce).length&&c(this,ce).splice(u)),c(this,ce).push(l)}undo(){if(c(this,ne)===-1)return;v(this,ar,!0);const{undo:t,post:e}=c(this,ce)[c(this,ne)];t(),e==null||e(),v(this,ar,!1),v(this,ne,c(this,ne)-1)}redo(){if(c(this,ne)<c(this,ce).length-1){v(this,ne,c(this,ne)+1),v(this,ar,!0);const{cmd:t,post:e}=c(this,ce)[c(this,ne)];t(),e==null||e(),v(this,ar,!1)}}hasSomethingToUndo(){return c(this,ne)!==-1}hasSomethingToRedo(){return c(this,ne)<c(this,ce).length-1}cleanType(t){if(c(this,ne)!==-1){for(let e=c(this,ne);e>=0;e--)if(c(this,ce)[e].type!==t){c(this,ce).splice(e+1,c(this,ne)-e),v(this,ne,e);return}c(this,ce).length=0,v(this,ne,-1)}}destroy(){v(this,ce,null)}}ce=new WeakMap,ar=new WeakMap,df=new WeakMap,ne=new WeakMap;var x0,sM;class Qg{constructor(t){_(this,x0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Je.platform;for(const[i,s,a={}]of t)for(const r of i){const o=r.startsWith("mac+");e&&o?(this.callbacks.set(r.slice(4),{callback:s,options:a}),this.allKeys.add(r.split("+").at(-1))):!e&&!o&&(this.callbacks.set(r,{callback:s,options:a}),this.allKeys.add(r.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(x(this,x0,sM).call(this,e));if(!i)return;const{callback:s,options:{bubbles:a=!1,args:r=[],checker:o=null}}=i;o&&!o(t,e)||(s.bind(t,...r,e)(),a||me(e))}}x0=new WeakSet,sM=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const E0=class E0{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return BP(t),At(this,"_colors",t)}convert(t){const e=ww(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((a,r)=>a===e[r]))return E0._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?et.makeHexColor(...e):t}};J(E0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Bv=E0;var au,jn,xe,je,ru,Xs,ou,gi,rr,Lo,lu,ko,us,zi,Oo,ff,gf,cu,pf,hs,or,uu,lr,ds,T0,cr,mf,ur,zo,Po,hr,yf,Ne,Dt,Ys,dr,Ho,bf,vf,fr,fs,Ks,Af,pi,K,tm,Fv,aM,rM,em,oM,lM,cM,Uv,uM,jv,Gv,hM,fn,Gs,dM,fM,Vv,gM,ad,$v;const Fc=class Fc{constructor(t,e,i,s,a,r,o,l,u,h,d,f,g,b){_(this,K);_(this,au,new AbortController);_(this,jn,null);_(this,xe,new Map);_(this,je,new Map);_(this,ru,null);_(this,Xs,null);_(this,ou,null);_(this,gi,new jP);_(this,rr,null);_(this,Lo,null);_(this,lu,0);_(this,ko,new Set);_(this,us,null);_(this,zi,null);_(this,Oo,new Set);J(this,"_editorUndoBar",null);_(this,ff,!1);_(this,gf,!1);_(this,cu,!1);_(this,pf,null);_(this,hs,null);_(this,or,null);_(this,uu,null);_(this,lr,!1);_(this,ds,null);_(this,T0,new UP);_(this,cr,!1);_(this,mf,!1);_(this,ur,null);_(this,zo,null);_(this,Po,null);_(this,hr,null);_(this,yf,null);_(this,Ne,ct.NONE);_(this,Dt,new Set);_(this,Ys,null);_(this,dr,null);_(this,Ho,null);_(this,bf,null);_(this,vf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,fr,[0,0]);_(this,fs,null);_(this,Ks,null);_(this,Af,null);_(this,pi,null);const m=this._signal=c(this,au).signal;v(this,Ks,t),v(this,Af,e),v(this,ru,i),v(this,dr,s),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:m}),x(this,K,oM).call(this),x(this,K,hM).call(this),x(this,K,Uv).call(this),v(this,Xs,r.annotationStorage),v(this,pf,r.filterFactory),v(this,Ho,o),v(this,uu,l||null),v(this,ff,u),v(this,gf,h),v(this,cu,d),v(this,yf,f||null),this.viewParameters={realScale:io.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=b!==!1}static get _keyboardManager(){const t=Fc.prototype,e=r=>c(r,Ks).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),i=(r,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return At(this,"_keyboardManager",new Qg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:o})=>!(o instanceof HTMLButtonElement)&&c(r,Ks).contains(o)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:o})=>!(o instanceof HTMLButtonElement)&&c(r,Ks).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,i,s,a,r,o,l;(t=c(this,pi))==null||t.resolve(),v(this,pi,null),(e=c(this,au))==null||e.abort(),v(this,au,null),this._signal=null;for(const u of c(this,je).values())u.destroy();c(this,je).clear(),c(this,xe).clear(),c(this,Oo).clear(),(i=c(this,hr))==null||i.clear(),v(this,jn,null),c(this,Dt).clear(),c(this,gi).destroy(),(s=c(this,ru))==null||s.destroy(),(a=c(this,dr))==null||a.destroy(),(r=c(this,ds))==null||r.hide(),v(this,ds,null),(o=c(this,Po))==null||o.destroy(),v(this,Po,null),c(this,hs)&&(clearTimeout(c(this,hs)),v(this,hs,null)),c(this,fs)&&(clearTimeout(c(this,fs)),v(this,fs,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,yf)}get useNewAltTextFlow(){return c(this,gf)}get useNewAltTextWhenAddingImage(){return c(this,cu)}get hcmFilter(){return At(this,"hcmFilter",c(this,Ho)?c(this,pf).addHCMFilter(c(this,Ho).foreground,c(this,Ho).background):"none")}get direction(){return At(this,"direction",getComputedStyle(c(this,Ks)).direction)}get highlightColors(){return At(this,"highlightColors",c(this,uu)?new Map(c(this,uu).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return At(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),v(this,Lo,t)}setMainHighlightColorPicker(t){v(this,Po,t)}editAltText(t,e=!1){var i;(i=c(this,ru))==null||i.editAltText(this,t,e)}getSignature(t){var e;(e=c(this,dr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,dr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":v(this,cu,e);break}}onPageChanging({pageNumber:t}){v(this,lu,t-1)}focusMainContainer(){c(this,Ks).focus()}findParent(t,e){for(const i of c(this,je).values()){const{x:s,y:a,width:r,height:o}=i.div.getBoundingClientRect();if(t>=s&&t<=s+r&&e>=a&&e<=a+o)return i}return null}disableUserSelect(t=!1){c(this,Af).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Oo).add(t)}removeShouldRescale(t){c(this,Oo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*io.PDF_TO_CSS_UNITS;for(const i of c(this,Oo))i.onScaleChanging();(e=c(this,Lo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:r}=e,o=e.toString(),u=x(this,K,tm).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=x(this,K,Fv).call(this,u),f=c(this,Ne)===ct.NONE,g=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:r,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ct.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Xs)&&!c(this,Xs).has(t.id)&&c(this,Xs).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,lr)&&(v(this,lr,!1),x(this,K,em).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,Dt))if(e.div.contains(t)){v(this,zo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,zo))return;const[t,e]=c(this,zo);v(this,zo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){x(this,K,Uv).call(this),x(this,K,jv).call(this)}removeEditListeners(){x(this,K,uM).call(this),x(this,K,Gv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of c(this,zi))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of c(this,zi))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=c(this,jn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of c(this,Dt)){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const r of c(this,zi))if(r.isHandlingMimeForPasting(a.type)){r.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){ht(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const l of i){const u=await s.deserialize(l);if(!u)return;a.push(u)}const r=()=>{for(const l of a)x(this,K,Vv).call(this,l);x(this,K,$v).call(this,a)},o=()=>{for(const l of a)l.remove()};this.addCommands({cmd:r,undo:o,mustExec:!0})}catch(a){ht(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Ne)!==ct.NONE&&!this.isEditorHandlingKeyboard&&Fc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,lr)&&(v(this,lr,!1),x(this,K,em).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(x(this,K,lM).call(this),x(this,K,jv).call(this),x(this,K,fn).call(this,{isEditing:c(this,Ne)!==ct.NONE,isEmpty:x(this,K,ad).call(this),hasSomethingToUndo:c(this,gi).hasSomethingToUndo(),hasSomethingToRedo:c(this,gi).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,K,cM).call(this),x(this,K,Gv).call(this),x(this,K,fn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,zi)){v(this,zi,t);for(const e of c(this,zi))x(this,K,Gs).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,T0).id}get currentLayer(){return c(this,je).get(c(this,lu))}getLayer(t){return c(this,je).get(t)}get currentPageIndex(){return c(this,lu)}addLayer(t){c(this,je).set(t.pageIndex,t),c(this,cr)?t.enable():t.disable()}removeLayer(t){c(this,je).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var s,a;if(c(this,Ne)!==t&&!(c(this,pi)&&(await c(this,pi).promise,!c(this,pi)))){if(v(this,pi,Promise.withResolvers()),v(this,Ne,t),t===ct.NONE){this.setEditingState(!1),x(this,K,fM).call(this),(s=this._editorUndoBar)==null||s.hide(),c(this,pi).resolve();return}t===ct.SIGNATURE&&await((a=c(this,dr))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await x(this,K,dM).call(this),this.unselectAll();for(const r of c(this,je).values())r.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),c(this,pi).resolve();return}for(const r of c(this,xe).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();c(this,pi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,Ne)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(c(this,zi)){switch(t){case wt.CREATE:this.currentLayer.addNewEditor(e);return;case wt.HIGHLIGHT_DEFAULT_COLOR:(i=c(this,Po))==null||i.updateColor(e);break;case wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,bf)||v(this,bf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of c(this,Dt))s.updateParams(t,e);for(const s of c(this,zi))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var a;for(const r of c(this,xe).values())r.editorType===t&&r.show(e);(((a=c(this,bf))==null?void 0:a.get(wt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&x(this,K,Gs).call(this,[[wt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,mf)!==t){v(this,mf,t);for(const e of c(this,je).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of c(this,xe).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return c(this,xe).get(t)}addEditor(t){c(this,xe).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(c(this,hs)&&clearTimeout(c(this,hs)),v(this,hs,setTimeout(()=>{this.focusMainContainer(),v(this,hs,null)},0))),c(this,xe).delete(t.id),t.annotationElementId&&((e=c(this,hr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,ko).has(t.annotationElementId))&&((i=c(this,Xs))==null||i.remove(t.id))}addDeletedAnnotationElement(t){c(this,ko).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,ko).has(t)}removeDeletedAnnotationElement(t){c(this,ko).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,jn)!==t&&(v(this,jn,t),t&&x(this,K,Gs).call(this,t.propertiesToUpdate))}updateUI(t){c(this,K,gM)===t&&x(this,K,Gs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){x(this,K,Gs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,Dt).has(t)){c(this,Dt).delete(t),t.unselect(),x(this,K,fn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Dt).add(t),t.select(),x(this,K,Gs).call(this,t.propertiesToUpdate),x(this,K,fn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=c(this,Lo))==null||e.commitOrRemove();for(const i of c(this,Dt))i!==t&&i.unselect();c(this,Dt).clear(),c(this,Dt).add(t),t.select(),x(this,K,Gs).call(this,t.propertiesToUpdate),x(this,K,fn).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,Dt).has(t)}get firstSelectedEditor(){return c(this,Dt).values().next().value}unselect(t){t.unselect(),c(this,Dt).delete(t),x(this,K,fn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Dt).size!==0}get isEnterHandled(){return c(this,Dt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,gi).undo(),x(this,K,fn).call(this,{hasSomethingToUndo:c(this,gi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,K,ad).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,gi).redo(),x(this,K,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,gi).hasSomethingToRedo(),isEmpty:x(this,K,ad).call(this)})}addCommands(t){c(this,gi).add(t),x(this,K,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,K,ad).call(this)})}cleanUndoStack(t){c(this,gi).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,Dt)],i=()=>{var r;(r=this._editorUndoBar)==null||r.show(s,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},s=()=>{for(const r of e)x(this,K,Vv).call(this,r)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=c(this,jn))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,jn)||this.hasSelection}selectAll(){for(const t of c(this,Dt))t.commit();x(this,K,$v).call(this,c(this,xe).values())}unselectAll(){var t;if(!(c(this,jn)&&(c(this,jn).commitOrRemove(),c(this,Ne)!==ct.NONE))&&!((t=c(this,Lo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,Dt))e.unselect();c(this,Dt).clear(),x(this,K,fn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,fr)[0]+=t,c(this,fr)[1]+=e;const[s,a]=c(this,fr),r=[...c(this,Dt)],o=1e3;c(this,fs)&&clearTimeout(c(this,fs)),v(this,fs,setTimeout(()=>{v(this,fs,null),c(this,fr)[0]=c(this,fr)[1]=0,this.addCommands({cmd:()=>{for(const l of r)c(this,xe).has(l.id)&&(l.translateInPage(s,a),l.translationDone())},undo:()=>{for(const l of r)c(this,xe).has(l.id)&&(l.translateInPage(-s,-a),l.translationDone())},mustExec:!1})},o));for(const l of r)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,us,new Map);for(const t of c(this,Dt))c(this,us).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,us))return!1;this.disableUserSelect(!1);const t=c(this,us);v(this,us,null);let e=!1;for(const[{x:s,y:a,pageIndex:r},o]of t)o.newX=s,o.newY=a,o.newPageIndex=r,e||(e=s!==o.savedX||a!==o.savedY||r!==o.savedPageIndex);if(!e)return!1;const i=(s,a,r,o)=>{if(c(this,xe).has(s.id)){const l=c(this,je).get(o);l?s._setParentAndPosition(l,a,r):(s.pageIndex=o,s.x=a,s.y=r)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:r,newPageIndex:o}]of t)i(s,a,r,o)},undo:()=>{for(const[s,{savedX:a,savedY:r,savedPageIndex:o}]of t)i(s,a,r,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,us))for(const i of c(this,us).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,Dt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,jn)===t}getActive(){return c(this,jn)}getMode(){return c(this,Ne)}get imageManager(){return At(this,"imageManager",new Iv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:a,height:r}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-s)/r,y:1-(u+d-i)/a,width:f/r,height:d/a});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-i)/a,y:1-(h+f-s)/r,width:d/a,height:f/r});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-s)/r,y:(u-i)/a,width:f/r,height:d/a});break;default:o=(u,h,d,f)=>({x:(u-i)/a,y:(h-s)/r,width:d/a,height:f/r});break}const l=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:b,height:m}of d.getClientRects())b===0||m===0||l.push(o(f,g,b,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,ou)||v(this,ou,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,ou))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=c(this,ou))==null?void 0:s.get(t.data.id);if(!e)return;const i=c(this,Xs).getRawValue(e);i&&(c(this,Ne)===ct.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var a;const s=(a=c(this,hr))==null?void 0:a.get(t);s&&(s.setCanvas(e,i),c(this,hr).delete(t))}addMissingCanvas(t,e){(c(this,hr)||v(this,hr,new Map)).set(t,e)}};au=new WeakMap,jn=new WeakMap,xe=new WeakMap,je=new WeakMap,ru=new WeakMap,Xs=new WeakMap,ou=new WeakMap,gi=new WeakMap,rr=new WeakMap,Lo=new WeakMap,lu=new WeakMap,ko=new WeakMap,us=new WeakMap,zi=new WeakMap,Oo=new WeakMap,ff=new WeakMap,gf=new WeakMap,cu=new WeakMap,pf=new WeakMap,hs=new WeakMap,or=new WeakMap,uu=new WeakMap,lr=new WeakMap,ds=new WeakMap,T0=new WeakMap,cr=new WeakMap,mf=new WeakMap,ur=new WeakMap,zo=new WeakMap,Po=new WeakMap,hr=new WeakMap,yf=new WeakMap,Ne=new WeakMap,Dt=new WeakMap,Ys=new WeakMap,dr=new WeakMap,Ho=new WeakMap,bf=new WeakMap,vf=new WeakMap,fr=new WeakMap,fs=new WeakMap,Ks=new WeakMap,Af=new WeakMap,pi=new WeakMap,K=new WeakSet,tm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Fv=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of c(this,je).values())if(i.hasTextLayer(t))return i;return null},aM=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=x(this,K,tm).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(c(this,ds)||v(this,ds,new FP(this)),c(this,ds).show(i,s,this.direction==="ltr"))},rM=function(){var a,r,o;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Ys)&&((a=c(this,ds))==null||a.hide(),v(this,Ys,null),x(this,K,fn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Ys))return;const s=x(this,K,tm).call(this,t).closest(".textLayer");if(!s){c(this,Ys)&&((r=c(this,ds))==null||r.hide(),v(this,Ys,null),x(this,K,fn).call(this,{hasSelectedText:!1}));return}if((o=c(this,ds))==null||o.hide(),v(this,Ys,e),x(this,K,fn).call(this,{hasSelectedText:!0}),!(c(this,Ne)!==ct.HIGHLIGHT&&c(this,Ne)!==ct.NONE)&&(c(this,Ne)===ct.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,lr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,Ne)===ct.HIGHLIGHT?x(this,K,Fv).call(this,s):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&x(this,K,em).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},em=function(t=""){c(this,Ne)===ct.HIGHLIGHT?this.highlightSelection(t):c(this,ff)&&x(this,K,aM).call(this)},oM=function(){document.addEventListener("selectionchange",x(this,K,rM).bind(this),{signal:this._signal})},lM=function(){if(c(this,or))return;v(this,or,new AbortController);const t=this.combinedSignal(c(this,or));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},cM=function(){var t;(t=c(this,or))==null||t.abort(),v(this,or,null)},Uv=function(){if(c(this,ur))return;v(this,ur,new AbortController);const t=this.combinedSignal(c(this,ur));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},uM=function(){var t;(t=c(this,ur))==null||t.abort(),v(this,ur,null)},jv=function(){if(c(this,rr))return;v(this,rr,new AbortController);const t=this.combinedSignal(c(this,rr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Gv=function(){var t;(t=c(this,rr))==null||t.abort(),v(this,rr,null)},hM=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},fn=function(t){Object.entries(t).some(([i,s])=>c(this,vf)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,vf),t)}),c(this,Ne)===ct.HIGHLIGHT&&t.hasSelectedEditor===!1&&x(this,K,Gs).call(this,[[wt.HIGHLIGHT_FREE,!0]]))},Gs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},dM=async function(){if(!c(this,cr)){v(this,cr,!0);const t=[];for(const e of c(this,je).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,xe).values())e.enable()}},fM=function(){if(this.unselectAll(),c(this,cr)){v(this,cr,!1);for(const t of c(this,je).values())t.disable();for(const t of c(this,xe).values())t.disable()}},Vv=function(t){const e=c(this,je).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},gM=function(){let t=null;for(t of c(this,Dt));return t},ad=function(){if(c(this,xe).size===0)return!0;if(c(this,xe).size===1)for(const t of c(this,xe).values())return t.isEmpty();return!1},$v=function(t){for(const e of c(this,Dt))e.unselect();c(this,Dt).clear();for(const e of t)e.isEmpty()||(c(this,Dt).add(e),e.select());x(this,K,fn).call(this,{hasSelectedEditor:this.hasSelection})},J(Fc,"TRANSLATE_SMALL",1),J(Fc,"TRANSLATE_BIG",10);let Wl=Fc;var De,gs,Pi,hu,ps,Gn,du,ms,Mn,Ws,Io,ys,gr,Wi,rd,nm;const gn=class gn{constructor(t){_(this,Wi);_(this,De,null);_(this,gs,!1);_(this,Pi,null);_(this,hu,null);_(this,ps,null);_(this,Gn,null);_(this,du,!1);_(this,ms,null);_(this,Mn,null);_(this,Ws,null);_(this,Io,null);_(this,ys,!1);v(this,Mn,t),v(this,ys,t._uiManager.useNewAltTextFlow),c(gn,gr)||v(gn,gr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){gn._l10n??(gn._l10n=t)}async render(){const t=v(this,Pi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=v(this,hu,document.createElement("span"));t.append(e),c(this,ys)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(gn,gr).missing),e.setAttribute("data-l10n-id",c(gn,gr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=c(this,Mn)._uiManager._signal;t.addEventListener("contextmenu",Ji,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const s=a=>{a.preventDefault(),c(this,Mn)._uiManager.editAltText(c(this,Mn)),c(this,ys)&&c(this,Mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Wi,rd)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(v(this,du,!0),s(a))},{signal:i}),await x(this,Wi,nm).call(this),t}finish(){c(this,Pi)&&(c(this,Pi).focus({focusVisible:c(this,du)}),v(this,du,!1))}isEmpty(){return c(this,ys)?c(this,De)===null:!c(this,De)&&!c(this,gs)}hasData(){return c(this,ys)?c(this,De)!==null||!!c(this,Ws):this.isEmpty()}get guessedText(){return c(this,Ws)}async setGuessedText(t){c(this,De)===null&&(v(this,Ws,t),v(this,Io,await gn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),x(this,Wi,nm).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,ys)||c(this,De)){(e=c(this,ms))==null||e.remove(),v(this,ms,null);return}if(!c(this,ms)){const i=v(this,ms,document.createElement("div"));i.className="noAltTextBadge",c(this,Mn).div.append(i)}c(this,ms).classList.toggle("hidden",!t)}serialize(t){let e=c(this,De);return!t&&c(this,Ws)===e&&(e=c(this,Io)),{altText:e,decorative:c(this,gs),guessedText:c(this,Ws),textWithDisclaimer:c(this,Io)}}get data(){return{altText:c(this,De),decorative:c(this,gs)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:a=!1}){i&&(v(this,Ws,i),v(this,Io,s)),!(c(this,De)===t&&c(this,gs)===e)&&(a||(v(this,De,t),v(this,gs,e)),x(this,Wi,nm).call(this))}toggle(t=!1){c(this,Pi)&&(!t&&c(this,Gn)&&(clearTimeout(c(this,Gn)),v(this,Gn,null)),c(this,Pi).disabled=!t)}shown(){c(this,Mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Wi,rd)}})}destroy(){var t,e;(t=c(this,Pi))==null||t.remove(),v(this,Pi,null),v(this,hu,null),v(this,ps,null),(e=c(this,ms))==null||e.remove(),v(this,ms,null)}};De=new WeakMap,gs=new WeakMap,Pi=new WeakMap,hu=new WeakMap,ps=new WeakMap,Gn=new WeakMap,du=new WeakMap,ms=new WeakMap,Mn=new WeakMap,Ws=new WeakMap,Io=new WeakMap,ys=new WeakMap,gr=new WeakMap,Wi=new WeakSet,rd=function(){return c(this,De)&&"added"||c(this,De)===null&&this.guessedText&&"review"||"missing"},nm=async function(){var s,a,r;const t=c(this,Pi);if(!t)return;if(c(this,ys)){if(t.classList.toggle("done",!!c(this,De)),t.setAttribute("data-l10n-id",c(gn,gr)[c(this,Wi,rd)]),(s=c(this,hu))==null||s.setAttribute("data-l10n-id",c(gn,gr)[`${c(this,Wi,rd)}-label`]),!c(this,De)){(a=c(this,ps))==null||a.remove();return}}else{if(!c(this,De)&&!c(this,gs)){t.classList.remove("done"),(r=c(this,ps))==null||r.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,ps);if(!e){v(this,ps,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Mn).id}`;const o=100,l=c(this,Mn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Gn)),v(this,Gn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{v(this,Gn,setTimeout(()=>{v(this,Gn,null),c(this,ps).classList.add("show"),c(this,Mn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),t.addEventListener("mouseleave",()=>{var u;c(this,Gn)&&(clearTimeout(c(this,Gn)),v(this,Gn,null)),(u=c(this,ps))==null||u.classList.remove("show")},{signal:l})}c(this,gs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,De)),e.parentNode||t.append(e);const i=c(this,Mn).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},_(gn,gr,null),J(gn,"_l10n",null);let p0=gn;var fu,Bo,wf,Sf,_f,xf,Ef,Zs,Fo,Qs,Uo,pr,ao,pM,mM,yM;const Nw=class Nw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:r=null,signal:o}){_(this,ao);_(this,fu);_(this,Bo,!1);_(this,wf,null);_(this,Sf);_(this,_f);_(this,xf);_(this,Ef);_(this,Zs,null);_(this,Fo);_(this,Qs,null);_(this,Uo);_(this,pr,null);v(this,fu,t),v(this,wf,i),v(this,Sf,e),v(this,_f,s),v(this,xf,a),v(this,Ef,r),v(this,Uo,new AbortController),v(this,Fo,AbortSignal.any([o,c(this,Uo).signal])),t.addEventListener("touchstart",x(this,ao,pM).bind(this),{passive:!1,signal:c(this,Fo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ba.pixelRatio}destroy(){var t,e;(t=c(this,Uo))==null||t.abort(),v(this,Uo,null),(e=c(this,Zs))==null||e.abort(),v(this,Zs,null)}};fu=new WeakMap,Bo=new WeakMap,wf=new WeakMap,Sf=new WeakMap,_f=new WeakMap,xf=new WeakMap,Ef=new WeakMap,Zs=new WeakMap,Fo=new WeakMap,Qs=new WeakMap,Uo=new WeakMap,pr=new WeakMap,ao=new WeakSet,pM=function(t){var s,a,r;if((s=c(this,Sf))!=null&&s.call(this))return;if(t.touches.length===1){if(c(this,Zs))return;const o=v(this,Zs,new AbortController),l=AbortSignal.any([c(this,Fo),o.signal]),u=c(this,fu),h={capture:!0,signal:l,passive:!1},d=f=>{var g;f.pointerType==="touch"&&((g=c(this,Zs))==null||g.abort(),v(this,Zs,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(me(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!c(this,pr)){v(this,pr,new AbortController);const o=AbortSignal.any([c(this,Fo),c(this,pr).signal]),l=c(this,fu),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",x(this,ao,mM).bind(this),u);const h=x(this,ao,yM).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",me,u),l.addEventListener("pointermove",me,u),l.addEventListener("pointercancel",me,u),l.addEventListener("pointerup",me,u),(a=c(this,_f))==null||a.call(this)}if(me(t),t.touches.length!==2||(r=c(this,wf))!=null&&r.call(this)){v(this,Qs,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),v(this,Qs,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},mM=function(t){var w;if(!c(this,Qs)||t.touches.length!==2)return;me(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:a}=e,{screenX:r,screenY:o}=i,l=c(this,Qs),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=l,g=d-u,b=f-h,m=r-s,S=o-a,p=Math.hypot(m,S)||1,y=Math.hypot(g,b)||1;if(!c(this,Bo)&&Math.abs(y-p)<=Nw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=a,l.touch1X=r,l.touch1Y=o,!c(this,Bo)){v(this,Bo,!0);return}const A=[(s+r)/2,(a+o)/2];(w=c(this,xf))==null||w.call(this,A,y,p)},yM=function(t){var e;t.touches.length>=2||(c(this,pr).abort(),v(this,pr,null),(e=c(this,Ef))==null||e.call(this),c(this,Qs)&&(me(t),v(this,Qs,null),v(this,Bo,!1)))};let m0=Nw;var jo,Hi,Vt,gu,mr,Tf,Go,Ge,Vo,Js,yr,Cf,$o,Vn,Mf,qo,ta,bs,pu,mu,mi,Xo,Rf,C0,rt,qv,Nf,Xv,im,bM,vM,Yv,sm,Kv,AM,wM,SM,Wv,_M,Zv,xM,EM,TM,Qv,od;const ft=class ft{constructor(t){_(this,rt);_(this,jo,null);_(this,Hi,null);_(this,Vt,null);_(this,gu,!1);_(this,mr,null);_(this,Tf,"");_(this,Go,!1);_(this,Ge,null);_(this,Vo,null);_(this,Js,null);_(this,yr,null);_(this,Cf,"");_(this,$o,!1);_(this,Vn,null);_(this,Mf,!1);_(this,qo,!1);_(this,ta,!1);_(this,bs,null);_(this,pu,0);_(this,mu,0);_(this,mi,null);_(this,Xo,null);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);_(this,Rf,!1);_(this,C0,ft._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[a,r];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=ft.prototype._resizeWithKeyboard,e=Wl.TRANSLATE_SMALL,i=Wl.TRANSLATE_BIG;return At(this,"_resizerKeyboardManager",new Qg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ft.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return At(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new GP({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ft._l10n??(ft._l10n=t),ft._l10nResizer||(ft._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ft._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ft._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){It("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Rf)}set _isDraggable(t){var e;v(this,Rf,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,C0)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):x(this,rt,od).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,$o)?v(this,$o,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[a,r]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/a,this.y=(e+s)/r,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){x(this,rt,qv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Vn)||v(this,Vn,[this.x,this.y,this.width,this.height]),x(this,rt,qv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,Vn)||v(this,Vn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[l,u]=this.getBaseTranslation();r+=l,o+=u;const{style:h}=i;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(r,o),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,Vn)&&(c(this,Vn)[0]!==this.x||c(this,Vn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Vn)&&(c(this,Vn)[2]!==this.width||c(this,Vn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ft,s=i/t,a=i/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:a,y:r,width:o,height:l}=this;if(o*=i,l*=s,a*=i,r*=s,this._mustFixPosition)switch(t){case 0:a=bn(a,0,i-o),r=bn(r,0,s-l);break;case 90:a=bn(a,0,i-l),r=bn(r,o,s);break;case 180:a=bn(a,o,i),r=bn(r,l,s);break;case 270:a=bn(a,l,i),r=bn(r,0,s-o);break}this.x=a/=i,this.y=r/=s;const[u,h]=this.getBaseTranslation();a+=u,r+=h,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return x(i=ft,Nf,Xv).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return x(i=ft,Nf,Xv).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/i).toFixed(2)}%`,c(this,Go)||(a.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),a=!c(this,Go)&&e.endsWith("%");if(s&&a)return;const[r,o]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),!c(this,Go)&&!a&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Vt))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,qo)?this._editToolbar:(this._editToolbar=new Hv(this),this.div.append(this._editToolbar.render()),c(this,Vt)&&await this._editToolbar.addAltText(c(this,Vt)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,Vt))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Vt)||(p0.initialize(ft._l10n),v(this,Vt,new p0(this)),c(this,jo)&&(c(this,Vt).data=c(this,jo),v(this,jo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,Vt))==null?void 0:t.data}set altTextData(t){c(this,Vt)&&(c(this,Vt).data=t)}get guessedAltText(){var t;return(t=c(this,Vt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Vt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Vt))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Vt)&&!c(this,Vt).isEmpty()}hasAltTextData(){var t;return((t=c(this,Vt))==null?void 0:t.hasData())??!1}render(){var r;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,gu)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),x(this,rt,Zv).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),Sw(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Xo)||v(this,Xo,new m0({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,rt,AM).bind(this),onPinching:x(this,rt,wM).bind(this),onPinchEnd:x(this,rt,SM).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),t}pointerdown(t){const{isMac:e}=Je.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(v(this,$o,!0),this._isDraggable){x(this,rt,_M).call(this,t);return}x(this,rt,Wv).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,bs)&&clearTimeout(c(this,bs)),v(this,bs,setTimeout(()=>{var t;v(this,bs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[a,r]=this.pageDimensions,[o,l]=this.pageTranslation,u=t/s,h=e/s,d=this.x*a,f=this.y*r,g=this.width*a,b=this.height*r;switch(i){case 0:return[d+u+o,r-f-h-b+l,d+u+g+o,r-f-h+l];case 90:return[d+h+o,r-f+u+l,d+h+b+o,r-f+u+g+l];case 180:return[d-u-g+o,r-f+h+l,d-u+o,r-f+h+b+l];case 270:return[d-h-b+o,r-f-u-g+l,d-h+o,r-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,a,r]=t,o=a-i,l=r-s;switch(this.rotation){case 0:return[i,e-r,o,l];case 90:return[i,e-s,l,o];case 180:return[a,e-s,o,l];case 270:return[a,e-r,l,o];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){v(this,qo,!0)}disableEditMode(){v(this,qo,!1)}isInEditMode(){return c(this,qo)}shouldGetKeyboardEvents(){return c(this,ta)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:r}=window;return e<r&&s>0&&t<a&&i>0}rebuild(){x(this,rt,Zv).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){It("An editor must be serializable")}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,v(s,jo,t.accessibilityData),s._isCopy=t.isCopy||!1;const[a,r]=s.pageDimensions,[o,l,u,h]=s.getRectInCurrentCoords(t.rect,r);return s.x=o/a,s.y=l/r,s.width=u/a,s.height=h/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,yr))==null||t.abort(),v(this,yr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,bs)&&(clearTimeout(c(this,bs)),v(this,bs,null)),x(this,rt,od).call(this),this.removeEditToolbar(),c(this,mi)){for(const i of c(this,mi).values())clearTimeout(i);v(this,mi,null)}this.parent=null,(e=c(this,Xo))==null||e.destroy(),v(this,Xo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,rt,bM).call(this),c(this,Ge).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),v(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Ge).children;if(!c(this,Hi)){v(this,Hi,Array.from(e));const r=x(this,rt,xM).bind(this),o=x(this,rt,EM).bind(this),l=this._uiManager._signal;for(const u of c(this,Hi)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",r,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",x(this,rt,TM).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",ft._l10nResizer[h])}}const i=c(this,Hi)[0];let s=0;for(const r of e){if(r===i)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(c(this,Hi).length/4);if(a!==s){if(a<s)for(let o=0;o<s-a;o++)c(this,Ge).append(c(this,Ge).firstChild);else if(a>s)for(let o=0;o<a-s;o++)c(this,Ge).firstChild.before(c(this,Ge).lastChild);let r=0;for(const o of e){const u=c(this,Hi)[r++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ft._l10nResizer[u])}}x(this,rt,Qv).call(this,0),v(this,ta,!0),c(this,Ge).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,ta)&&x(this,rt,Kv).call(this,c(this,Cf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,rt,od).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,a;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(i=c(this,Vt))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,s,a;(t=c(this,Ge))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(a=c(this,Vt))==null||a.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Mf)}set isEditing(t){v(this,Mf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){v(this,Go,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,mi)||v(this,mi,new Map);const{action:i}=t;let s=c(this,mi).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),c(this,mi).delete(i),c(this,mi).size===0&&v(this,mi,null)},ft._telemetryTimeout),c(this,mi).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),v(this,gu,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,gu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};jo=new WeakMap,Hi=new WeakMap,Vt=new WeakMap,gu=new WeakMap,mr=new WeakMap,Tf=new WeakMap,Go=new WeakMap,Ge=new WeakMap,Vo=new WeakMap,Js=new WeakMap,yr=new WeakMap,Cf=new WeakMap,$o=new WeakMap,Vn=new WeakMap,Mf=new WeakMap,qo=new WeakMap,ta=new WeakMap,bs=new WeakMap,pu=new WeakMap,mu=new WeakMap,mi=new WeakMap,Xo=new WeakMap,Rf=new WeakMap,C0=new WeakMap,rt=new WeakSet,qv=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Nf=new WeakSet,Xv=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},im=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},bM=function(){if(c(this,Ge))return;v(this,Ge,document.createElement("div")),c(this,Ge).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");c(this,Ge).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",x(this,rt,vM).bind(this,i),{signal:e}),s.addEventListener("contextmenu",Ji,{signal:e}),s.tabIndex=-1}this.div.prepend(c(this,Ge))},vM=function(t,e){var h;e.preventDefault();const{isMac:i}=Je.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=c(this,Vt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,v(this,Vo,[e.screenX,e.screenY]);const a=new AbortController,r=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,rt,Kv).bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",me,{passive:!1,signal:r}),window.addEventListener("contextmenu",Ji,{signal:r}),v(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;a.abort(),this.parent.togglePointerEvents(!0),(d=c(this,Vt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,x(this,rt,sm).call(this)};window.addEventListener("pointerup",u,{signal:r}),window.addEventListener("blur",u,{signal:r})},Yv=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e;const[a,r]=this.parentDimensions;this.setDims(a*i,r*s),this.fixAndSetPosition(),this._onResized()},sm=function(){if(!c(this,Js))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=c(this,Js);v(this,Js,null);const a=this.x,r=this.y,o=this.width,l=this.height;a===t&&r===e&&o===i&&l===s||this.addCommands({cmd:x(this,rt,Yv).bind(this,a,r,o,l),undo:x(this,rt,Yv).bind(this,t,e,i,s),mustExec:!0})},Kv=function(t,e){const[i,s]=this.parentDimensions,a=this.x,r=this.y,o=this.width,l=this.height,u=ft.MIN_SIZE/i,h=ft.MIN_SIZE/s,d=x(this,rt,im).call(this,this.rotation),f=(E,N)=>[d[0]*E+d[2]*N,d[1]*E+d[3]*N],g=x(this,rt,im).call(this,360-this.rotation),b=(E,N)=>[g[0]*E+g[2]*N,g[1]*E+g[3]*N];let m,S,p=!1,y=!1;switch(t){case"topLeft":p=!0,m=(E,N)=>[0,0],S=(E,N)=>[E,N];break;case"topMiddle":m=(E,N)=>[E/2,0],S=(E,N)=>[E/2,N];break;case"topRight":p=!0,m=(E,N)=>[E,0],S=(E,N)=>[0,N];break;case"middleRight":y=!0,m=(E,N)=>[E,N/2],S=(E,N)=>[0,N/2];break;case"bottomRight":p=!0,m=(E,N)=>[E,N],S=(E,N)=>[0,0];break;case"bottomMiddle":m=(E,N)=>[E/2,N],S=(E,N)=>[E/2,0];break;case"bottomLeft":p=!0,m=(E,N)=>[0,N],S=(E,N)=>[E,0];break;case"middleLeft":y=!0,m=(E,N)=>[0,N/2],S=(E,N)=>[E,N/2];break}const A=m(o,l),w=S(o,l);let T=f(...w);const C=ft._round(a+T[0]),M=ft._round(r+T[1]);let L=1,k=1,P,H;if(e.fromKeyboard)({deltaX:P,deltaY:H}=e);else{const{screenX:E,screenY:N}=e,[z,O]=c(this,Vo);[P,H]=this.screenToPageTranslation(E-z,N-O),c(this,Vo)[0]=E,c(this,Vo)[1]=N}if([P,H]=b(P/i,H/s),p){const E=Math.hypot(o,l);L=k=Math.max(Math.min(Math.hypot(w[0]-A[0]-P,w[1]-A[1]-H)/E,1/o,1/l),u/o,h/l)}else y?L=bn(Math.abs(w[0]-A[0]-P),u,1)/o:k=bn(Math.abs(w[1]-A[1]-H),h,1)/l;const $=ft._round(o*L),G=ft._round(l*k);T=f(...S($,G));const R=C-T[0],B=M-T[1];c(this,Vn)||v(this,Vn,[this.x,this.y,this.width,this.height]),this.width=$,this.height=G,this.x=R,this.y=B,this.setDims(i*$,s*G),this.fixAndSetPosition(),this._onResizing()},AM=function(){var t;v(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Vt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},wM=function(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;const r=x(this,rt,im).call(this,this.rotation),o=(C,M)=>[r[0]*C+r[2]*M,r[1]*C+r[3]*M],[l,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,g=this.height,b=ft.MIN_SIZE/l,m=ft.MIN_SIZE/u;a=Math.max(Math.min(a,1/f,1/g),b/f,m/g);const S=ft._round(f*a),p=ft._round(g*a);if(S===f&&p===g)return;c(this,Vn)||v(this,Vn,[h,d,f,g]);const y=o(f/2,g/2),A=ft._round(h+y[0]),w=ft._round(d+y[1]),T=o(S/2,p/2);this.x=A-T[0],this.y=w-T[1],this.width=S,this.height=p,this.setDims(l*S,u*p),this.fixAndSetPosition(),this._onResizing()},SM=function(){var t;(t=c(this,Vt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),x(this,rt,sm).call(this)},Wv=function(t){const{isMac:e}=Je.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},_M=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),r={capture:!0,passive:!1,signal:a},o=u=>{s.abort(),v(this,mr,null),v(this,$o,!1),this._uiManager.endDragSession()||x(this,rt,Wv).call(this,u),i&&this._onStopDragging()};e&&(v(this,pu,t.clientX),v(this,mu,t.clientY),v(this,mr,t.pointerId),v(this,Tf,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==c(this,mr)){me(u);return}const[g,b]=this.screenToPageTranslation(h-c(this,pu),d-c(this,mu));v(this,pu,h),v(this,mu,d),this._uiManager.dragSelectedEditors(g,b)},r),window.addEventListener("touchmove",me,r),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,Tf)&&(c(this,Xo)||u.isPrimary)&&o(u),me(u)},r));const l=u=>{if(!c(this,mr)||c(this,mr)===u.pointerId){o(u);return}me(u)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})},Zv=function(){if(c(this,yr)||!this.div)return;v(this,yr,new AbortController);const t=this._uiManager.combinedSignal(c(this,yr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},xM=function(t){ft._resizerKeyboardManager.exec(this,t)},EM=function(t){var e;c(this,ta)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Ge)&&x(this,rt,od).call(this)},TM=function(t){v(this,Cf,c(this,ta)?t:"")},Qv=function(t){if(c(this,Hi))for(const e of c(this,Hi))e.tabIndex=t},od=function(){v(this,ta,!1),x(this,rt,Qv).call(this,-1),x(this,rt,sm).call(this)},_(ft,Nf),J(ft,"_l10n",null),J(ft,"_l10nResizer",null),J(ft,"_borderLineWidth",-1),J(ft,"_colorManager",new Bv),J(ft,"_zIndex",1),J(ft,"_telemetryTimeout",1e3);let Qt=ft;class GP extends Qt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ax=3285377520,di=4294901760,os=65535;class CM{constructor(t){this.h1=t?t&4294967295:ax,this.h2=t?t&4294967295:ax}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let m=0,S=t.length;m<S;m++){const p=t.charCodeAt(m);p<=255?e[i++]=p:(e[i++]=p>>>8,e[i++]=p&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,a=i-s*4,r=new Uint32Array(e.buffer,0,s);let o=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,g=d&os,b=f&os;for(let m=0;m<s;m++)m&1?(o=r[m],o=o*d&di|o*g&os,o=o<<15|o>>>17,o=o*f&di|o*b&os,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=r[m],l=l*d&di|l*g&os,l=l<<15|l>>>17,l=l*f&di|l*b&os,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,a){case 3:o^=e[s*4+2]<<16;case 2:o^=e[s*4+1]<<8;case 1:o^=e[s*4],o=o*d&di|o*g&os,o=o<<15|o>>>17,o=o*f&di|o*b&os,s&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&di|t*36045&os,e=e*4283543511&di|((e<<16|t>>>16)*2950163797&di)>>>16,t^=e>>>1,t=t*444984403&di|t*60499&os,e=e*3301882366&di|((e<<16|t>>>16)*3120437893&di)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Jv=Object.freeze({map:null,hash:"",transfer:void 0});var Yo,Ko,Le,M0,MM;class _w{constructor(){_(this,M0);_(this,Yo,!1);_(this,Ko,null);_(this,Le,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=c(this,Le).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return c(this,Le).get(t)}remove(t){if(c(this,Le).delete(t),c(this,Le).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,Le).values())if(e instanceof Qt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=c(this,Le).get(t);let s=!1;if(i!==void 0)for(const[a,r]of Object.entries(e))i[a]!==r&&(s=!0,i[a]=r);else s=!0,c(this,Le).set(t,e);s&&x(this,M0,MM).call(this),e instanceof Qt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,Le).has(t)}getAll(){return c(this,Le).size>0?mw(c(this,Le)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return c(this,Le).size}resetModified(){c(this,Yo)&&(v(this,Yo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new RM(this)}get serializable(){if(c(this,Le).size===0)return Jv;const t=new Map,e=new CM,i=[],s=Object.create(null);let a=!1;for(const[r,o]of c(this,Le)){const l=o instanceof Qt?o.serialize(!1,s):o;l&&(t.set(r,l),e.update(`${r}:${JSON.stringify(l)}`),a||(a=!!l.bitmap))}if(a)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Jv}get editorStats(){let t=null;const e=new Map;for(const i of c(this,Le).values()){if(!(i instanceof Qt))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const r=t[a]||(t[a]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let u=r.get(o);u||(u=new Map,r.set(o,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){v(this,Ko,null)}get modifiedIds(){if(c(this,Ko))return c(this,Ko);const t=[];for(const e of c(this,Le).values())!(e instanceof Qt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return v(this,Ko,{ids:new Set(t),hash:t.join(",")})}}Yo=new WeakMap,Ko=new WeakMap,Le=new WeakMap,M0=new WeakSet,MM=function(){c(this,Yo)||(v(this,Yo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Df;class RM extends _w{constructor(e){super();_(this,Df);const{map:i,hash:s,transfer:a}=e.serializable,r=structuredClone(i,a?{transfer:a}:null);v(this,Df,{map:r,hash:s,transfer:a})}get print(){It("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Df)}get modifiedIds(){return At(this,"modifiedIds",{ids:new Set,hash:""})}}Df=new WeakMap;var yu;class VP{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,yu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,yu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||c(this,yu).has(t.loadedName))){if(ye(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:r}=t,o=new FontFace(s,a,r);this.addNativeFontFace(o);try{await o.load(),c(this,yu).add(s),i==null||i(t)}catch{ht(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}It("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ht(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return At(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return At(this,"isSyncFontLoadingSupported",Xe||Je.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ye(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return At(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(w,T){return w.charCodeAt(T)<<24|w.charCodeAt(T+1)<<16|w.charCodeAt(T+2)<<8|w.charCodeAt(T+3)&255}function s(w,T,C,M){const L=w.substring(0,T),k=w.substring(T+C);return L+M+k}let a,r;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function h(w,T){if(++u>30){ht("Load test font never loaded."),T();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,w,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const b=16,m=1482184792;let S=i(f,b);for(a=0,r=d.length-3;a<r;a+=4)S=S-m+i(d,a)|0;a<d.length&&(S=S-m+i(d+"XXX",a)|0),f=s(f,b,4,RP(S));const p=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${p}}`;this.insertRule(y);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const w of[t.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=w,A.append(T)}this._document.body.append(A),h(d,()=>{A.remove(),e.complete()})}}yu=new WeakMap;class $P{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${WC(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(r){ht(`getPathGenerator - ignoring character: "${r}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}}const Cp={DATA:1,ERROR:2},fe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function rx(){}function Tn(n){if(n instanceof no||n instanceof Ov||n instanceof nx||n instanceof g0||n instanceof pb)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||It('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new no(n.message);case"InvalidPDFException":return new Ov(n.message);case"PasswordException":return new nx(n.message,n.code);case"ResponseException":return new g0(n.message,n.status,n.missing);case"UnknownErrorException":return new pb(n.message,n.details)}return new pb(n.message,n.toString())}var bu,Ni,NM,DM,LM,am;class ld{constructor(t,e,i){_(this,Ni);_(this,bu,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",x(this,Ni,NM).bind(this),{signal:c(this,bu).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(r){a.reject(r)}return a.promise}sendWithStream(t,e,i,s){const a=this.streamId++,r=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:r,targetName:o,action:t,streamId:a,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[a].pullCall=h,l.postMessage({sourceName:r,targetName:o,stream:fe.PULL,streamId:a,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ye(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[a].cancelCall=h,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:r,targetName:o,stream:fe.CANCEL,streamId:a,reason:Tn(u)}),h.promise}},i)}destroy(){var t;(t=c(this,bu))==null||t.abort(),v(this,bu,null)}}bu=new WeakMap,Ni=new WeakSet,NM=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){x(this,Ni,LM).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Cp.DATA)s.resolve(t.data);else if(t.callback===Cp.ERROR)s.reject(Tn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(r){a.postMessage({sourceName:i,targetName:s,callback:Cp.DATA,callbackId:t.callbackId,data:r})},function(r){a.postMessage({sourceName:i,targetName:s,callback:Cp.ERROR,callbackId:t.callbackId,reason:Tn(r)})});return}if(t.streamId){x(this,Ni,DM).call(this,t);return}e(t.data)},DM=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,a=this.comObj,r=this,o=this.actionHandler[t.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:s,stream:fe.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:s,stream:fe.CLOSE,streamId:e}),delete r.streamSinks[e])},error(u){ye(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:s,stream:fe.ERROR,streamId:e,reason:Tn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(o,t.data,l).then(function(){a.postMessage({sourceName:i,targetName:s,stream:fe.START_COMPLETE,streamId:e,success:!0})},function(u){a.postMessage({sourceName:i,targetName:s,stream:fe.START_COMPLETE,streamId:e,reason:Tn(u)})})},LM=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,a=this.comObj,r=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case fe.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(Tn(t.reason));break;case fe.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(Tn(t.reason));break;case fe.PULL:if(!o){a.postMessage({sourceName:i,targetName:s,stream:fe.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||rx).then(function(){a.postMessage({sourceName:i,targetName:s,stream:fe.PULL_COMPLETE,streamId:e,success:!0})},function(u){a.postMessage({sourceName:i,targetName:s,stream:fe.PULL_COMPLETE,streamId:e,reason:Tn(u)})});break;case fe.ENQUEUE:if(ye(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case fe.CLOSE:if(ye(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),x(this,Ni,am).call(this,r,e);break;case fe.ERROR:ye(r,"error should have stream controller"),r.controller.error(Tn(t.reason)),x(this,Ni,am).call(this,r,e);break;case fe.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(Tn(t.reason)),x(this,Ni,am).call(this,r,e);break;case fe.CANCEL:if(!o)break;const l=Tn(t.reason);Promise.try(o.onCancel||rx,l).then(function(){a.postMessage({sourceName:i,targetName:s,stream:fe.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){a.postMessage({sourceName:i,targetName:s,stream:fe.CANCEL_COMPLETE,streamId:e,reason:Tn(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},am=async function(t,e){var i,s,a;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var Lf;class kM{constructor({enableHWA:t=!1}){_(this,Lf,!1);v(this,Lf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,Lf)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){It("Abstract method `_createCanvas` called.")}}Lf=new WeakMap;class qP extends kM{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class OM{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class ox extends OM{async _fetch(t){const e=await Wg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Kg(e)}}class zM{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,a){return"none"}destroy(t=!1){}}var Wo,vu,ea,na,an,Zo,Qo,W,nn,cd,wc,rm,Sc,PM,t1,_c,ud,hd,e1,dd;class XP extends zM{constructor({docId:e,ownerDocument:i=globalThis.document}){super();_(this,W);_(this,Wo);_(this,vu);_(this,ea);_(this,na);_(this,an);_(this,Zo);_(this,Qo,0);v(this,na,e),v(this,an,i)}addFilter(e){if(!e)return"none";let i=c(this,W,nn).get(e);if(i)return i;const[s,a,r]=x(this,W,rm).call(this,e),o=e.length===1?s:`${s}${a}${r}`;if(i=c(this,W,nn).get(o),i)return c(this,W,nn).set(e,i),i;const l=`g_${c(this,na)}_transfer_map_${dn(this,Qo)._++}`,u=x(this,W,Sc).call(this,l);c(this,W,nn).set(e,u),c(this,W,nn).set(o,u);const h=x(this,W,_c).call(this,l);return x(this,W,hd).call(this,s,a,r,h),u}addHCMFilter(e,i){var b;const s=`${e}-${i}`,a="base";let r=c(this,W,cd).get(a);if((r==null?void 0:r.key)===s||(r?((b=r.filter)==null||b.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},c(this,W,cd).set(a,r)),!e||!i))return r.url;const o=x(this,W,dd).call(this,e);e=et.makeHexColor(...o);const l=x(this,W,dd).call(this,i);if(i=et.makeHexColor(...l),c(this,W,wc).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return r.url;const u=new Array(256);for(let m=0;m<=255;m++){const S=m/255;u[m]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,na)}_hcm_filter`,f=r.filter=x(this,W,_c).call(this,d);x(this,W,hd).call(this,h,h,h,f),x(this,W,t1).call(this,f);const g=(m,S)=>{const p=o[m]/255,y=l[m]/255,A=new Array(S+1);for(let w=0;w<=S;w++)A[w]=p+w/S*(y-p);return A.join(",")};return x(this,W,hd).call(this,g(0,5),g(1,5),g(2,5),f),r.url=x(this,W,Sc).call(this,d),r.url}addAlphaFilter(e){let i=c(this,W,nn).get(e);if(i)return i;const[s]=x(this,W,rm).call(this,[e]),a=`alpha_${s}`;if(i=c(this,W,nn).get(a),i)return c(this,W,nn).set(e,i),i;const r=`g_${c(this,na)}_alpha_map_${dn(this,Qo)._++}`,o=x(this,W,Sc).call(this,r);c(this,W,nn).set(e,o),c(this,W,nn).set(a,o);const l=x(this,W,_c).call(this,r);return x(this,W,e1).call(this,s,l),o}addLuminosityFilter(e){let i=c(this,W,nn).get(e||"luminosity");if(i)return i;let s,a;if(e?([s]=x(this,W,rm).call(this,[e]),a=`luminosity_${s}`):a="luminosity",i=c(this,W,nn).get(a),i)return c(this,W,nn).set(e,i),i;const r=`g_${c(this,na)}_luminosity_map_${dn(this,Qo)._++}`,o=x(this,W,Sc).call(this,r);c(this,W,nn).set(e,o),c(this,W,nn).set(a,o);const l=x(this,W,_c).call(this,r);return x(this,W,PM).call(this,l),e&&x(this,W,e1).call(this,s,l),o}addHighlightHCMFilter(e,i,s,a,r){var y;const o=`${i}-${s}-${a}-${r}`;let l=c(this,W,cd).get(e);if((l==null?void 0:l.key)===o||(l?((y=l.filter)==null||y.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,W,cd).set(e,l)),!i||!s))return l.url;const[u,h]=[i,s].map(x(this,W,dd).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,b]=[a,r].map(x(this,W,dd).bind(this));f<d&&([d,f,g,b]=[f,d,b,g]),c(this,W,wc).style.color="";const m=(A,w,T)=>{const C=new Array(256),M=(f-d)/T,L=A/255,k=(w-A)/(255*T);let P=0;for(let H=0;H<=T;H++){const $=Math.round(d+H*M),G=L+H*k;for(let R=P;R<=$;R++)C[R]=G;P=$+1}for(let H=P;H<256;H++)C[H]=C[P-1];return C.join(",")},S=`g_${c(this,na)}_hcm_${e}_filter`,p=l.filter=x(this,W,_c).call(this,S);return x(this,W,t1).call(this,p),x(this,W,hd).call(this,m(g[0],b[0],5),m(g[1],b[1],5),m(g[2],b[2],5),p),l.url=x(this,W,Sc).call(this,S),l.url}destroy(e=!1){var i,s,a,r;e&&((i=c(this,Zo))!=null&&i.size)||((s=c(this,ea))==null||s.parentNode.parentNode.remove(),v(this,ea,null),(a=c(this,vu))==null||a.clear(),v(this,vu,null),(r=c(this,Zo))==null||r.clear(),v(this,Zo,null),v(this,Qo,0))}}Wo=new WeakMap,vu=new WeakMap,ea=new WeakMap,na=new WeakMap,an=new WeakMap,Zo=new WeakMap,Qo=new WeakMap,W=new WeakSet,nn=function(){return c(this,vu)||v(this,vu,new Map)},cd=function(){return c(this,Zo)||v(this,Zo,new Map)},wc=function(){if(!c(this,ea)){const e=c(this,an).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=c(this,an).createElementNS(js,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,ea,c(this,an).createElementNS(js,"defs")),e.append(s),s.append(c(this,ea)),c(this,an).body.append(e)}return c(this,ea)},rm=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,a]=e,r=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)r[u]=i[u]/255,o[u]=s[u]/255,l[u]=a[u]/255;return[r.join(","),o.join(","),l.join(",")]},Sc=function(e){if(c(this,Wo)===void 0){v(this,Wo,"");const i=c(this,an).URL;i!==c(this,an).baseURI&&(py(i)?ht('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,Wo,i.split("#",1)[0]))}return`url(${c(this,Wo)}#${e})`},PM=function(e){const i=c(this,an).createElementNS(js,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},t1=function(e){const i=c(this,an).createElementNS(js,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},_c=function(e){const i=c(this,an).createElementNS(js,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),c(this,W,wc).append(i),i},ud=function(e,i,s){const a=c(this,an).createElementNS(js,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),e.append(a)},hd=function(e,i,s,a){const r=c(this,an).createElementNS(js,"feComponentTransfer");a.append(r),x(this,W,ud).call(this,r,"feFuncR",e),x(this,W,ud).call(this,r,"feFuncG",i),x(this,W,ud).call(this,r,"feFuncB",s)},e1=function(e,i){const s=c(this,an).createElementNS(js,"feComponentTransfer");i.append(s),x(this,W,ud).call(this,s,"feFuncA",e)},dd=function(e){return c(this,W,wc).style.color=e,ww(getComputedStyle(c(this,W,wc)).getPropertyValue("color"))};class HM{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class lx extends HM{async _fetch(t){const e=await Wg(t,"arraybuffer");return new Uint8Array(e)}}class IM{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class cx extends IM{async _fetch(t){const e=await Wg(t,"arraybuffer");return new Uint8Array(e)}}Xe&&ht("Please use the `legacy` build in Node.js environments.");async function xw(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class YP extends zM{}class KP extends kM{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class WP extends OM{async _fetch(t){return xw(t)}}class ZP extends HM{async _fetch(t){return xw(t)}}class QP extends IM{async _fetch(t){return xw(t)}}const Ye={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function n1(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class Ew{isModifyingCurrentTransform(){return!1}getPattern(){It("Abstract method `getPattern` called.")}}class JP extends Ew{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let a;if(s===Ye.STROKE||s===Ye.FILL){const r=e.current.getClippedPathBoundingBox(s,Wt(t))||[0,0,0,0],o=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,u=e.cachedCanvases.getCanvas("pattern",o,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=et.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),n1(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),a=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);a.setTransform(d)}else n1(t,this._bbox),a=this._createGradient(t);return a}}function bb(n,t,e,i,s,a,r,o){const l=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;l[e+1]>l[i+1]&&(f=e,e=i,i=f,f=a,a=r,r=f),l[i+1]>l[s+1]&&(f=i,i=s,s=f,f=r,r=o,o=f),l[e+1]>l[i+1]&&(f=e,e=i,i=f,f=a,a=r,r=f);const g=(l[e]+t.offsetX)*t.scaleX,b=(l[e+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,S=(l[i+1]+t.offsetY)*t.scaleY,p=(l[s]+t.offsetX)*t.scaleX,y=(l[s+1]+t.offsetY)*t.scaleY;if(b>=y)return;const A=u[a],w=u[a+1],T=u[a+2],C=u[r],M=u[r+1],L=u[r+2],k=u[o],P=u[o+1],H=u[o+2],$=Math.round(b),G=Math.round(y);let R,B,E,N,z,O,I,V;for(let F=$;F<=G;F++){if(F<S){const it=F<b?0:(b-F)/(b-S);R=g-(g-m)*it,B=A-(A-C)*it,E=w-(w-M)*it,N=T-(T-L)*it}else{let it;F>y?it=1:S===y?it=0:it=(S-F)/(S-y),R=m-(m-p)*it,B=C-(C-k)*it,E=M-(M-P)*it,N=L-(L-H)*it}let X;F<b?X=0:F>y?X=1:X=(b-F)/(b-y),z=g-(g-p)*X,O=A-(A-k)*X,I=w-(w-P)*X,V=T-(T-H)*X;const Y=Math.round(Math.min(R,z)),tt=Math.round(Math.max(R,z));let ut=d*F+Y*4;for(let it=Y;it<=tt;it++)X=(R-it)/(R-z),X<0?X=0:X>1&&(X=1),h[ut++]=B-(B-O)*X|0,h[ut++]=E-(E-I)*X|0,h[ut++]=N-(N-V)*X|0,h[ut++]=255}}function t8(n,t,e){const i=t.coords,s=t.colors;let a,r;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,u=o-1;for(a=0;a<l;a++){let h=a*o;for(let d=0;d<u;d++,h++)bb(n,e,i[h],i[h+1],i[h+o],s[h],s[h+1],s[h+o]),bb(n,e,i[h+o+1],i[h+1],i[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(a=0,r=i.length;a<r;a+=3)bb(n,e,i[a],i[a+1],i[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class e8 extends Ew{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),g=u/d,b=h/f,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/g,scaleY:1/b},S=d+2*2,p=f+2*2,y=i.getCanvas("mesh",S,p),A=y.context,w=A.createImageData(d,f);if(e){const C=w.data;for(let M=0,L=C.length;M<L;M+=4)C[M]=e[0],C[M+1]=e[1],C[M+2]=e[2],C[M+3]=255}for(const C of this._figures)t8(w,C,m);return A.putImageData(w,2,2),{canvas:y.canvas,offsetX:o-2*g,offsetY:l-2*b,scaleX:g,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){n1(t,this._bbox);let a;if(s===Ye.SHADING)a=et.singularValueDecompose2dScale(Wt(t));else if(a=et.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=et.singularValueDecompose2dScale(this.matrix);a=[a[0]*o[0],a[1]*o[1]]}const r=this._createMeshCanvas(a,s===Ye.SHADING?null:this._background,e.cachedCanvases);return s!==Ye.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class n8 extends Ew{getPattern(){return"hotpink"}}function i8(n){switch(n[0]){case"RadialAxial":return new JP(n);case"Mesh":return new e8(n);case"Dummy":return new n8}throw new Error(`Unknown IR type: ${n[0]}`)}const ux={COLORED:1,UNCOLORED:2},R0=class R0{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:s,tilingType:a,color:r,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),gy("TilingType: "+a);const h=e[0],d=e[1],f=e[2],g=e[3],b=f-h,m=g-d,S=et.singularValueDecompose2dScale(this.matrix),p=et.singularValueDecompose2dScale(this.baseTransform),y=S[0]*p[0],A=S[1]*p[1];let w=b,T=m,C=!1,M=!1;const L=Math.ceil(l*y),k=Math.ceil(u*A),P=Math.ceil(b*y),H=Math.ceil(m*A);L>=P?w=l:C=!0,k>=H?T=u:M=!0;const $=this.getSizeAndScale(w,this.ctx.canvas.width,y),G=this.getSizeAndScale(T,this.ctx.canvas.height,A),R=t.cachedCanvases.getCanvas("pattern",$.size,G.size),B=R.context,E=o.createCanvasGraphics(B);if(E.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(E,s,r),B.translate(-$.scale*h,-G.scale*d),E.transform($.scale,0,0,G.scale,0,0),B.save(),this.clipBbox(E,h,d,f,g),E.baseTransform=Wt(E.ctx),E.executeOperatorList(i),E.endDrawing(),B.restore(),C||M){const N=R.canvas;C&&(w=l),M&&(T=u);const z=this.getSizeAndScale(w,this.ctx.canvas.width,y),O=this.getSizeAndScale(T,this.ctx.canvas.height,A),I=z.size,V=O.size,F=t.cachedCanvases.getCanvas("pattern-workaround",I,V),X=F.context,Y=C?Math.floor(b/l):0,tt=M?Math.floor(m/u):0;for(let ut=0;ut<=Y;ut++)for(let it=0;it<=tt;it++)X.drawImage(N,I*ut,V*it,I,V,0,0,I,V);return{canvas:F.canvas,scaleX:z.scale,scaleY:O.scale,offsetX:h,offsetY:d}}return{canvas:R.canvas,scaleX:$.scale,scaleY:G.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,i){const s=Math.max(R0.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*i);return a>=s?a=s:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,s,a){const r=s-e,o=a-i;t.ctx.rect(e,i,r,o),t.current.updateRectMinMax(Wt(t.ctx),[e,i,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,a=t.current;switch(e){case ux.COLORED:const r=this.ctx;s.fillStyle=r.fillStyle,s.strokeStyle=r.strokeStyle,a.fillColor=r.fillStyle,a.strokeColor=r.strokeStyle;break;case ux.UNCOLORED:const o=et.makeHexColor(i[0],i[1],i[2]);s.fillStyle=o,s.strokeStyle=o,a.fillColor=o,a.strokeColor=o;break;default:throw new MP(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s){let a=i;s!==Ye.SHADING&&(a=et.transform(a,e.baseTransform),this.matrix&&(a=et.transform(a,this.matrix)));const r=this.createPatternCanvas(e);let o=new DOMMatrix(a);o=o.translate(r.offsetX,r.offsetY),o=o.scale(1/r.scaleX,1/r.scaleY);const l=t.createPattern(r.canvas,"repeat");return l.setTransform(o),l}};J(R0,"MAX_PATTERN_SIZE",3e3);let i1=R0;function s8({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:a=4294967295,inverseDecode:r=!1}){const o=Je.isLittleEndian?4278190080:255,[l,u]=r?[a,o]:[o,a],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let g=0;for(let b=0;b<s;b++){for(const S=t+h;t<S;t++){const p=t<f?n[t]:255;e[g++]=p&128?u:l,e[g++]=p&64?u:l,e[g++]=p&32?u:l,e[g++]=p&16?u:l,e[g++]=p&8?u:l,e[g++]=p&4?u:l,e[g++]=p&2?u:l,e[g++]=p&1?u:l}if(d===0)continue;const m=t<f?n[t++]:255;for(let S=0;S<d;S++)e[g++]=m&1<<7-S?u:l}return{srcPos:t,destPos:g}}const hx=16,dx=100,a8=15,fx=10,gx=1e3,On=16,vb=new DOMMatrix;function r8(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,a,r,o,l){t.transform(i,s,a,r,o,l),this.__originalTransform(i,s,a,r,o,l)},n.setTransform=function(i,s,a,r,o,l){t.setTransform(i,s,a,r,o,l),this.__originalSetTransform(i,s,a,r,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){t.rotate(i),this.__originalRotate(i)},n.clip=function(i){t.clip(i),this.__originalClip(i)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,a,r,o){t.bezierCurveTo(e,i,s,a,r,o),this.__originalBezierCurveTo(e,i,s,a,r,o)},n.rect=function(e,i,s,a){t.rect(e,i,s,a),this.__originalRect(e,i,s,a)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class o8{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Mp(n,t,e,i,s,a,r,o,l,u){const[h,d,f,g,b,m]=Wt(n);if(d===0&&f===0){const y=r*h+b,A=Math.round(y),w=o*g+m,T=Math.round(w),C=(r+l)*h+b,M=Math.abs(Math.round(C)-A)||1,L=(o+u)*g+m,k=Math.abs(Math.round(L)-T)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),A,T),n.drawImage(t,e,i,s,a,0,0,M,k),n.setTransform(h,d,f,g,b,m),[M,k]}if(h===0&&g===0){const y=o*f+b,A=Math.round(y),w=r*d+m,T=Math.round(w),C=(o+u)*f+b,M=Math.abs(Math.round(C)-A)||1,L=(r+l)*d+m,k=Math.abs(Math.round(L)-T)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,A,T),n.drawImage(t,e,i,s,a,0,0,k,M),n.setTransform(h,d,f,g,b,m),[k,M]}n.drawImage(t,e,i,s,a,r,o,l,u);const S=Math.hypot(h,d),p=Math.hypot(f,g);return[S*l,p*u]}function l8(n){const{width:t,height:e}=n;if(t>gx||e>gx)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1,r=new Uint8Array(a*(e+1));let o,l,u;const h=t+7&-8,d=new Uint8Array(h*e);let f=0;for(const C of n.data){let M=128;for(;M>0;)d[f++]=C&M?0:255,M>>=1}let g=0;for(f=0,d[f]!==0&&(r[0]=1,++g),l=1;l<t;l++)d[f]!==d[f+1]&&(r[l]=d[f]?2:1,++g),f++;for(d[f]!==0&&(r[l]=2,++g),o=1;o<e;o++){f=o*h,u=o*a,d[f-h]!==d[f]&&(r[u]=d[f]?1:8,++g);let C=(d[f]?4:0)+(d[f-h]?8:0);for(l=1;l<t;l++)C=(C>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[C]&&(r[u+l]=s[C],++g),f++;if(d[f-h]!==d[f]&&(r[u+l]=d[f]?2:4,++g),g>i)return null}for(f=h*(e-1),u=o*a,d[f]!==0&&(r[u]=8,++g),l=1;l<t;l++)d[f]!==d[f+1]&&(r[u+l]=d[f]?4:8,++g),f++;if(d[f]!==0&&(r[u+l]=4,++g),g>i)return null;const b=new Int32Array([0,a,-1,0,-a,0,0,0,1]),m=new Path2D,{a:S,b:p,c:y,d:A,e:w,f:T}=new DOMMatrix().scaleSelf(1/t,-1/e).translateSelf(0,-e);for(o=0;g&&o<=e;o++){let C=o*a;const M=C+t;for(;C<M&&!r[C];)C++;if(C===M)continue;let L=C%a,k=o;m.moveTo(S*L+y*k+w,p*L+A*k+T);const P=C;let H=r[C];do{const $=b[H];do C+=$;while(!r[C]);const G=r[C];G!==5&&G!==10?(H=G,r[C]=0):(H=G&51*H>>4,r[C]&=H>>2|H<<2),L=C%a,k=C/a|0,m.lineTo(S*L+y*k+w,p*L+A*k+T),r[C]||--g}while(P!==C);--o}return m}class px{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=XC,this.textMatrixScale=1,this.fontMatrix=kv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=en.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}updateRectMinMax(t,e){const i=et.applyTransform(e,t),s=et.applyTransform(e.slice(2),t),a=et.applyTransform([e[0],e[3]],t),r=et.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],a[0],r[0]),this.minY=Math.min(this.minY,i[1],s[1],a[1],r[1]),this.maxX=Math.max(this.maxX,i[0],s[0],a[0],r[0]),this.maxY=Math.max(this.maxY,i[1],s[1],a[1],r[1])}getPathBoundingBox(t=Ye.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ye.STROKE){e||It("Stroke bounding box must include transform.");const s=et.singularValueDecompose2dScale(e),a=s[0]*this.lineWidth/2,r=s[1]*this.lineWidth/2;i[0]-=a,i[1]-=r,i[2]+=a,i[3]+=r}return i}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ye.FILL,e=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function mx(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%On,a=(e-s)/On,r=s===0?a:a+1,o=n.createImageData(i,On);let l=0,u;const h=t.data,d=o.data;let f,g,b,m;if(t.kind===Wp.GRAYSCALE_1BPP){const S=h.byteLength,p=new Uint32Array(d.buffer,0,d.byteLength>>2),y=p.length,A=i+7>>3,w=4294967295,T=Je.isLittleEndian?4278190080:255;for(f=0;f<r;f++){for(b=f<a?On:s,u=0,g=0;g<b;g++){const C=S-l;let M=0;const L=C>A?i:C*8-7,k=L&-8;let P=0,H=0;for(;M<k;M+=8)H=h[l++],p[u++]=H&128?w:T,p[u++]=H&64?w:T,p[u++]=H&32?w:T,p[u++]=H&16?w:T,p[u++]=H&8?w:T,p[u++]=H&4?w:T,p[u++]=H&2?w:T,p[u++]=H&1?w:T;for(;M<L;M++)P===0&&(H=h[l++],P=128),p[u++]=H&P?w:T,P>>=1}for(;u<y;)p[u++]=0;n.putImageData(o,0,f*On)}}else if(t.kind===Wp.RGBA_32BPP){for(g=0,m=i*On*4,f=0;f<a;f++)d.set(h.subarray(l,l+m)),l+=m,n.putImageData(o,0,g),g+=On;f<r&&(m=i*s*4,d.set(h.subarray(l,l+m)),n.putImageData(o,0,g))}else if(t.kind===Wp.RGB_24BPP)for(b=On,m=i*b,f=0;f<r;f++){for(f>=a&&(b=s,m=i*b),u=0,g=m;g--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;n.putImageData(o,0,f*On)}else throw new Error(`bad image kind: ${t.kind}`)}function yx(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%On,a=(e-s)/On,r=s===0?a:a+1,o=n.createImageData(i,On);let l=0;const u=t.data,h=o.data;for(let d=0;d<r;d++){const f=d<a?On:s;({srcPos:l}=s8({src:u,srcPos:l,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(o,0,d*On)}}function Xh(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Rp(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Xe){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function bx(n,t){if(t)return!0;const e=et.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround(Ba.pixelRatio*io.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const c8=["butt","round","square"],u8=["miter","round","bevel"],h8={},vx={};var ts,s1,a1,r1;const Dw=class Dw{constructor(t,e,i,s,a,{optionalContentConfig:r,markedContentStack:o=null},l,u){_(this,ts);this.ctx=t,this.current=new px(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=r,this.cachedCanvases=new o8(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const a=this.ctx.canvas.width,r=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,r),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",a,r);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Wt(this.compositeCtx))}this.ctx.save(),Rp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wt(this.ctx)}executeOperatorList(t,e,i,s){const a=t.argsArray,r=t.fnArray;let o=e||0;const l=a.length;if(l===o)return o;const u=l-o>fx&&typeof i=="function",h=u?Date.now()+a8:0;let d=0;const f=this.commonObjs,g=this.objs;let b;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(b=r[o],b!==f0.dependency)this[b].apply(this,a[o]);else for(const m of a[o]){const S=m.startsWith("g_")?f:g;if(!S.has(m))return S.get(m,i),o}if(o++,o===l)return o;if(u&&++d>fx){if(Date.now()>h)return i(),o;d=0}}}endDrawing(){x(this,ts,s1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),x(this,ts,a1).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),r=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=s,u="prescale1",h,d;for(;a>2&&o>1||r>2&&l>1;){let f=o,g=l;a>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/f),r>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,r/=l/g),h=this.cachedCanvases.getCanvas(u,f,g),d=h.context,d.clearRect(0,0,f,g),d.drawImage(t,0,0,o,l,0,0,f,g),t=h.canvas,o=f,l=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,a=this.current.fillColor,r=this.current.patternFill,o=Wt(e);let l,u,h,d;if((t.bitmap||t.data)&&t.count>1){const L=t.bitmap||t.data.buffer;u=JSON.stringify(r?o:[o.slice(0,4),a]),l=this._cachedBitmapsMap.get(L),l||(l=new Map,this._cachedBitmapsMap.set(L,l));const k=l.get(u);if(k&&!r){const P=Math.round(Math.min(o[0],o[2])+o[4]),H=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:k,offsetX:P,offsetY:H}}h=k}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),yx(d.context,t));let f=et.transform(o,[1/i,0,0,-1/s,0,0]);f=et.transform(f,[1,0,0,1,0,-s]);const[g,b,m,S]=et.getAxialAlignedBoundingBox([0,0,i,s],f),p=Math.round(m-g)||1,y=Math.round(S-b)||1,A=this.cachedCanvases.getCanvas("fillCanvas",p,y),w=A.context,T=g,C=b;w.translate(-T,-C),w.transform(...f),h||(h=this._scaleImage(d.canvas,rs(w)),h=h.img,l&&r&&l.set(u,h)),w.imageSmoothingEnabled=bx(Wt(w),t.interpolate),Mp(w,h,0,0,h.width,h.height,0,0,i,s),w.globalCompositeOperation="source-in";const M=et.transform(rs(w),[1,0,0,1,-T,-C]);return w.fillStyle=r?a.getPattern(e,this,M,Ye.FILL):a,w.fillRect(0,0,i,s),l&&!r&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,A.canvas)),{canvas:A.canvas,offsetX:Math.round(T),offsetY:Math.round(C)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=c8[t]}setLineJoin(t){this.ctx.lineJoin=u8[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Xh(this.suspendedCtx,a),r8(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const a=s[0],r=s[1],o=s[2]-a,l=s[3]-r;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,a,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,a,r,o,l,u,h,d){let f=t.canvas,g=l-h,b=u-d;if(r){const S=et.makeHexColor(...r);if(g<0||b<0||g+i>f.width||b+s>f.height){const p=this.cachedCanvases.getCanvas("maskExtension",i,s),y=p.context;y.drawImage(f,-g,-b),y.globalCompositeOperation="destination-atop",y.fillStyle=S,y.fillRect(0,0,i,s),y.globalCompositeOperation="source-over",f=p.canvas,g=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const p=new Path2D;p.rect(g,b,i,s),t.clip(p),t.globalCompositeOperation="destination-atop",t.fillStyle=S,t.fillRect(g,b,i,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,u,i,s),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(f,g,b,i,s,l,u,i,s),e.restore()}save(){this.inSMaskMode&&Xh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Xh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,a,r){this.ctx.transform(t,e,i,s,a,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let[s]=e;if(!i){s||(s=e[0]=new Path2D),this[t](s);return}if(!(s instanceof Path2D)){const a=e[0]=new Path2D;for(let r=0,o=s.length;r<o;)switch(s[r++]){case Tp.moveTo:a.moveTo(s[r++],s[r++]);break;case Tp.lineTo:a.lineTo(s[r++],s[r++]);break;case Tp.curveTo:a.bezierCurveTo(s[r++],s[r++],s[r++],s[r++],s[r++],s[r++]);break;case Tp.closePath:a.closePath();break;default:ht(`Unrecognized drawing path operator: ${s[r-1]}`);break}s=a}this.current.updateRectMinMax(Wt(this.ctx),i),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const a=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,rs(i),Ye.STROKE),a){const r=new Path2D;r.addPath(t,i.getTransform().invertSelf().multiplySelf(a)),t=r}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ye.STROKE,Wt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let r=!1;if(a){const l=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=s.getPattern(i,this,rs(i),Ye.FILL),l){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=u}r=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),r&&i.restore(),e&&this.consumePath(t,o)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}clip(){this.pendingClip=h8}eoClip(){this.pendingClip=vx}beginText(){this.current.textMatrix=XC,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,s=e.getTransform().invertSelf();for(const{transform:a,x:r,y:o,fontSize:l,path:u}of t)i.addPath(u,new DOMMatrix(a).preMultiplySelf(s).translate(r,o).scale(l,-l));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||kv,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ht("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const a=i.loadedName||"sans-serif",r=((h=i.systemFontInfo)==null?void 0:h.css)||`"${a}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let u=e;e<hx?u=hx:e>dx&&(u=dx),this.current.fontSizeScale=e/u,this.ctx.font=`${l} ${o} ${u}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,a,r){this.current.textMatrix=[t,e,i,s,a,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s,a){const r=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=u&en.FILL_STROKE_MASK,f=!!(u&en.ADD_TO_PATH_FLAG),g=o.patternFill&&!l.missingFile,b=o.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||f||g||b)&&(m=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||g||b){r.save(),r.translate(e,i),r.scale(h,-h);let S;if((d===en.FILL||d===en.FILL_STROKE)&&(s?(S=r.getTransform(),r.setTransform(...s),r.fill(x(this,ts,r1).call(this,m,S,s))):r.fill(m)),d===en.STROKE||d===en.FILL_STROKE)if(a){S||(S=r.getTransform()),r.setTransform(...a);const{a:p,b:y,c:A,d:w}=S,T=et.inverseTransform(a),C=et.transform([p,y,A,w,0,0],T),[M,L]=et.singularValueDecompose2dScale(C);r.lineWidth*=Math.max(M,L)/h,r.stroke(x(this,ts,r1).call(this,m,S,a))}else r.lineWidth/=h,r.stroke(m);r.restore()}else(d===en.FILL||d===en.FILL_STROKE)&&r.fillText(t,e,i),(d===en.STROKE||d===en.FILL_STROKE)&&r.strokeText(t,e,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Wt(r),x:e,y:i,fontSize:h,path:m})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return At(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const a=this.ctx,r=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=i.vertical,g=f?1:-1,b=i.defaultVMetrics,m=s*e.fontMatrix[0],S=e.textRenderingMode===en.FILL&&!i.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),u>0?a.scale(h,-1):a.scale(h,1);let p,y;if(e.patternFill){a.save();const M=e.fillColor.getPattern(a,this,rs(a),Ye.FILL);p=Wt(a),a.restore(),a.fillStyle=M}if(e.patternStroke){a.save();const M=e.strokeColor.getPattern(a,this,rs(a),Ye.STROKE);y=Wt(a),a.restore(),a.strokeStyle=M}let A=e.lineWidth;const w=e.textMatrixScale;if(w===0||A===0){const M=e.textRenderingMode&en.FILL_STROKE_MASK;(M===en.STROKE||M===en.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=w;if(r!==1&&(a.scale(r,r),A/=r),a.lineWidth=A,i.isInvalidPDFjsFont){const M=[];let L=0;for(const k of t)M.push(k.unicode),L+=k.width;a.fillText(M.join(""),0,0),e.x+=L*m*h,a.restore(),this.compose();return}let T=0,C;for(C=0;C<d;++C){const M=t[C];if(typeof M=="number"){T+=g*M*s/1e3;continue}let L=!1;const k=(M.isSpace?l:0)+o,P=M.fontChar,H=M.accent;let $,G,R=M.width;if(f){const E=M.vmetric||b,N=-(M.vmetric?E[1]:R*.5)*m,z=E[2]*m;R=E?-E[0]:R,$=N/r,G=(T+z)/r}else $=T/r,G=0;if(i.remeasure&&R>0){const E=a.measureText(P).width*1e3/s*r;if(R<E&&this.isFontSubpixelAAEnabled){const N=R/E;L=!0,a.save(),a.scale(N,1),$/=N}else R!==E&&($+=(R-E)/2e3*s/r)}if(this.contentVisible&&(M.isInFont||i.missingFile)){if(S&&!H)a.fillText(P,$,G);else if(this.paintChar(P,$,G,p,y),H){const E=$+s*H.offset.x/r,N=G-s*H.offset.y/r;this.paintChar(H.fontChar,E,N,p,y)}}const B=f?R*m-k*u:R*m+k*u;T+=B,L&&a.restore()}f?e.y-=T:e.x+=T*h,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,a=i.fontSize,r=i.fontDirection,o=s.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,h=i.textHScale*r,d=i.fontMatrix||kv,f=t.length,g=i.textRenderingMode===en.INVISIBLE;let b,m,S,p;if(!(g||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y+i.textRise),e.scale(h,r),b=0;b<f;++b){if(m=t[b],typeof m=="number"){p=o*m*a/1e3,this.ctx.translate(p,0),i.x+=p*h;continue}const y=(m.isSpace?u:0)+l,A=s.charProcOperatorList[m.operatorListId];A?this.contentVisible&&(this.processingType3=m,this.save(),e.scale(a,a),e.transform(...d),this.executeOperatorList(A),this.restore()):ht(`Type3 character "${m.operatorListId}" is not available.`),S=et.applyTransform([m.width,0],d)[0]*a+y,e.translate(S,0),i.x+=S*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,a,r){this.ctx.rect(i,s,a-i,r-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=this.baseTransform||Wt(this.ctx),s={createCanvasGraphics:a=>new Dw(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new i1(t,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=et.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=et.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=i8(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,rs(e),Ye.SHADING);const s=rs(e);if(s){const{width:a,height:r}=e.canvas,[o,l,u,h]=et.getAxialAlignedBoundingBox([0,0,a,r],s);this.ctx.fillRect(o,l,u-o,h-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){It("Should not call beginInlineImage")}beginImageData(){It("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wt(this.ctx),e)){const i=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],i,s),this.current.updateRectMinMax(Wt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||gy("TODO: Support non-isolated groups."),t.knockout&&ht("Knockout groups not supported.");const i=Wt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=et.getAxialAlignedBoundingBox(t.bbox,Wt(e));const a=[0,0,e.canvas.width,e.canvas.height];s=et.intersect(s,a)||[0,0,0,0];const r=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-r,1),u=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,u),f=d.context;f.translate(-r,-o),f.transform(...i);let g=new Path2D;const[b,m,S,p]=t.bbox;if(g.rect(b,m,S-b,p-m),t.matrix){const y=new Path2D;y.addPath(g,new DOMMatrix(t.matrix)),g=y}f.clip(g),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:r,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,o),e.save()),Xh(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Wt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=et.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,s,a){if(x(this,ts,s1).call(this),Rp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const r=e[2]-e[0],o=e[3]-e[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=r,e[3]=o;const[l,u]=et.singularValueDecompose2dScale(Wt(this.ctx)),{viewportScale:h}=this,d=Math.ceil(r*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:g,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,o*u),Rp(this.ctx)}else Rp(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],r,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new px(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,ts,a1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=l8(t)),s.compiled)){i.fill(s.compiled);return}const a=this._createMaskCanvas(t),r=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,a,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=Wt(o);o.transform(e,i,s,a,0,0);const u=this._createMaskCanvas(t);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,d=r.length;h<d;h+=2){const f=et.transform(l,[e,i,s,a,r[h],r[h+1]]),[g,b]=et.applyTransform([0,0],f);o.drawImage(u.canvas,g,b)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const a of t){const{data:r,width:o,height:l,transform:u}=a,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=h.context;d.save();const f=this.getObject(r,a);yx(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,rs(e),Ye.FILL):i,d.fillRect(0,0,o,l),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),Mp(e,h.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){ht("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){ht("Dependent image isn't ready yet");return}const r=a.width,o=a.height,l=[];for(let u=0,h=s.length;u<h;u+=2)l.push({transform:[e,0,0,i,s[u],s[u+1]],x:0,y:0,w:r,h:o});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,s),r=a.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!Xe){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/e,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;mx(l,t),a=this.applyTransferMapsToCanvas(l)}const r=this._scaleImage(a,rs(s));s.imageSmoothingEnabled=bx(Wt(s),t.interpolate),Mp(s,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const a=t.width,r=t.height,l=this.cachedCanvases.getCanvas("inlineImage",a,r).context;mx(l,t),s=this.applyTransferMapsToCanvas(l)}for(const a of e)i.save(),i.transform(...a.transform),i.scale(1,-1),Mp(i,s,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(i||(this.pendingClip===vx?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:a}=this.ctx.getTransform();let r,o;if(i===0&&s===0){const l=Math.abs(e),u=Math.abs(a);if(l===u)if(t===0)r=o=1/l;else{const h=l*t;r=o=h<1?1/h:1}else if(t===0)r=1/l,o=1/u;else{const h=l*t,d=u*t;r=h<1?1/h:1,o=d<1?1/d:1}}else{const l=Math.abs(e*a-i*s),u=Math.hypot(e,i),h=Math.hypot(s,a);if(t===0)r=h/l,o=u/l;else{const d=t*l;r=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[a,r]=this.getScaleForStroking();if(a===r){i.lineWidth=(s||1)*a,i.stroke(t);return}const o=i.getLineDash();e&&i.save(),i.scale(a,r),vb.a=1/a,vb.d=1/r;const l=new Path2D;if(l.addPath(t,vb),o.length>0){const u=Math.max(a,r);i.setLineDash(o.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(l),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ts=new WeakSet,s1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},a1=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},r1=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let tu=Dw;for(const n in f0)tu.prototype[n]!==void 0&&(tu.prototype[f0[n]]=tu.prototype[n]);var kf,Of;class wa{static get workerPort(){return c(this,kf)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");v(this,kf,t)}static get workerSrc(){return c(this,Of)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");v(this,Of,t)}}kf=new WeakMap,Of=new WeakMap,_(wa,kf,null),_(wa,Of,"");var Jo,zf;class d8{constructor({parsedData:t,rawData:e}){_(this,Jo);_(this,zf);v(this,Jo,t),v(this,zf,e)}getRaw(){return c(this,zf)}get(t){return c(this,Jo).get(t)??null}getAll(){return mw(c(this,Jo))}has(t){return c(this,Jo).has(t)}}Jo=new WeakMap,zf=new WeakMap;const xc=Symbol("INTERNAL");var Pf,Hf,If,Au;class f8{constructor(t,{name:e,intent:i,usage:s,rbGroups:a}){_(this,Pf,!1);_(this,Hf,!1);_(this,If,!1);_(this,Au,!0);v(this,Pf,!!(t&ei.DISPLAY)),v(this,Hf,!!(t&ei.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=a}get visible(){if(c(this,If))return c(this,Au);if(!c(this,Au))return!1;const{print:t,view:e}=this.usage;return c(this,Pf)?(e==null?void 0:e.viewState)!=="OFF":c(this,Hf)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==xc&&It("Internal method `_setVisible` called."),v(this,If,i),v(this,Au,e)}}Pf=new WeakMap,Hf=new WeakMap,If=new WeakMap,Au=new WeakMap;var br,Lt,wu,Su,Bf,o1;class g8{constructor(t,e=ei.DISPLAY){_(this,Bf);_(this,br,null);_(this,Lt,new Map);_(this,wu,null);_(this,Su,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,v(this,Su,t.order);for(const i of t.groups)c(this,Lt).set(i.id,new f8(e,i));if(t.baseState==="OFF")for(const i of c(this,Lt).values())i._setVisible(xc,!1);for(const i of t.on)c(this,Lt).get(i)._setVisible(xc,!0);for(const i of t.off)c(this,Lt).get(i)._setVisible(xc,!1);v(this,wu,this.getHash())}}isVisible(t){if(c(this,Lt).size===0)return!0;if(!t)return gy("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Lt).has(t.id)?c(this,Lt).get(t.id).visible:(ht(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return x(this,Bf,o1).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,Lt).has(e))return ht(`Optional content group not found: ${e}`),!0;if(c(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,Lt).has(e))return ht(`Optional content group not found: ${e}`),!0;if(!c(this,Lt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,Lt).has(e))return ht(`Optional content group not found: ${e}`),!0;if(!c(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,Lt).has(e))return ht(`Optional content group not found: ${e}`),!0;if(c(this,Lt).get(e).visible)return!1}return!0}return ht(`Unknown optional content policy ${t.policy}.`),!0}return ht(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var a;const s=c(this,Lt).get(t);if(!s){ht(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const r of s.rbGroups)for(const o of r)o!==t&&((a=c(this,Lt).get(o))==null||a._setVisible(xc,!1,!0));s._setVisible(xc,!!e,!0),v(this,br,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const a=c(this,Lt).get(s);if(a)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}v(this,br,null)}get hasInitialVisibility(){return c(this,wu)===null||this.getHash()===c(this,wu)}getOrder(){return c(this,Lt).size?c(this,Su)?c(this,Su).slice():[...c(this,Lt).keys()]:null}getGroups(){return c(this,Lt).size>0?mw(c(this,Lt)):null}getGroup(t){return c(this,Lt).get(t)||null}getHash(){if(c(this,br)!==null)return c(this,br);const t=new CM;for(const[e,i]of c(this,Lt))t.update(`${e}:${i.visible}`);return v(this,br,t.hexdigest())}}br=new WeakMap,Lt=new WeakMap,wu=new WeakMap,Su=new WeakMap,Bf=new WeakSet,o1=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const a=t[s];let r;if(Array.isArray(a))r=x(this,Bf,o1).call(this,a);else if(c(this,Lt).has(a))r=c(this,Lt).get(a).visible;else return ht(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return i==="And"};class p8{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ye(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:r,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,(a==null?void 0:a.length)>0){const l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),t.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});ye(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,a;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(a=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||a.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ye(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new m8(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new y8(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class m8{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=vw(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class y8{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function b8(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=o(e);return h=unescape(h),h=l(h),h=u(h),a(h)}if(e=r(n),e){const h=u(e);return a(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=o(e);return h=u(h),a(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),g=Kg(d);d=f.decode(g),t=!1}catch{}}return d}function a(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function r(h){const d=[];let f;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(h))!==null;){let[,m,S,p]=f;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[S,p]}const b=[];for(let m=0;m<d.length&&m in d;++m){let[S,p]=d[m];p=o(p),S&&(p=unescape(p),m===0&&(p=l(p))),b.push(p)}return b.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),b=h.slice(d+1).replace(/^[^']*'/,"");return s(f,b)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,b){if(g==="q"||g==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,S){return String.fromCharCode(parseInt(S,16))}),s(f,b);try{b=atob(b)}catch{}return s(f,b)})}return""}function BM(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function my(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function FM({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function UM(n){const t=n.get("Content-Disposition");if(t){let e=b8(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(vw(e))return e}return null}function Jg(n,t){return new g0(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function jM(n){return n===200||n===206}function GM(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function VM(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ht(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Ax{constructor(t){J(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=BM(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ye(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new v8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new A8(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class v8{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,GM(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=my(a.url),!jM(a.status))throw Jg(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const r=a.headers,{allowRangeRequests:o,suggestedLength:l}=FM({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=UM(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new no("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:VM(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class A8{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);const r=s.url;fetch(r,GM(a,this._withCredentials,this._abortController)).then(o=>{const l=my(o.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!jM(o.status))throw Jg(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:VM(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Ab=200,wb=206;function w8(n){const t=n.response;return typeof t!="string"?t:Kg(t).buffer}class S8{constructor({url:t,httpHeaders:e,withCredentials:i}){J(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=BM(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,r]of this.headers)e.setRequestHeader(a,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=wb):s.expectedStatus=Ab,e.responseType="arraybuffer",ye(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const a=s.status||Ab;if(!(a===Ab&&i.expectedStatus===wb)&&a!==i.expectedStatus){i.onError(s.status);return}const o=w8(s);if(a===wb){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?i.onDone({begin:parseInt(u[1],10),chunk:o}):(ht('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class _8{constructor(t){this._source=t,this._manager=new S8(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ye(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new x8(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new E8(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class x8{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=my(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:r}=FM({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=UM(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Jg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E8{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=my((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Jg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const T8=/^[a-z][a-z0-9\-+.]+:/i;function C8(n){if(T8.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class M8{constructor(t){this.source=t,this.url=C8(t.url),ye(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ye(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new R8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new N8(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class R8{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Jg(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new no("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class N8{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const D8=1e5,wx=30;var Tx,vr,Rn,Ff,Uf,tl,ia,jf,Gf,el,_u,xu,Ar,Eu,Vf,Tu,nl,$f,qf,Cu,il,Xf,wr,Mu,Fa,$M,qM,l1,ci,om,c1,XM,YM;const Se=class Se{constructor({textContentSource:t,container:e,viewport:i}){_(this,Fa);_(this,vr,Promise.withResolvers());_(this,Rn,null);_(this,Ff,!1);_(this,Uf,!!((Tx=globalThis.FontInspector)!=null&&Tx.enabled));_(this,tl,null);_(this,ia,null);_(this,jf,0);_(this,Gf,0);_(this,el,null);_(this,_u,null);_(this,xu,0);_(this,Ar,0);_(this,Eu,Object.create(null));_(this,Vf,[]);_(this,Tu,null);_(this,nl,[]);_(this,$f,new WeakMap);_(this,qf,null);var l;if(t instanceof ReadableStream)v(this,Tu,t);else if(typeof t=="object")v(this,Tu,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,Rn,v(this,_u,e)),v(this,Ar,i.scale*Ba.pixelRatio),v(this,xu,i.rotation),v(this,ia,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:r,pageY:o}=i.rawDims;v(this,qf,[1,0,0,-1,-r,o+a]),v(this,Gf,s),v(this,jf,a),x(l=Se,ci,XM).call(l),Kl(e,i),c(this,vr).promise.finally(()=>{c(Se,Mu).delete(this),v(this,ia,null),v(this,Eu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Je.platform;return At(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,el).read().then(({value:e,done:i})=>{if(i){c(this,vr).resolve();return}c(this,tl)??v(this,tl,e.lang),Object.assign(c(this,Eu),e.styles),x(this,Fa,$M).call(this,e.items),t()},c(this,vr).reject)};return v(this,el,c(this,Tu).getReader()),c(Se,Mu).add(this),t(),c(this,vr).promise}update({viewport:t,onBefore:e=null}){var a;const i=t.scale*Ba.pixelRatio,s=t.rotation;if(s!==c(this,xu)&&(e==null||e(),v(this,xu,s),Kl(c(this,_u),{rotation:s})),i!==c(this,Ar)){e==null||e(),v(this,Ar,i);const r={div:null,properties:null,ctx:x(a=Se,ci,om).call(a,c(this,tl))};for(const o of c(this,nl))r.properties=c(this,$f).get(o),r.div=o,x(this,Fa,l1).call(this,r)}}cancel(){var e;const t=new no("TextLayer task cancelled.");(e=c(this,el))==null||e.cancel(t).catch(()=>{}),v(this,el,null),c(this,vr).reject(t)}get textDivs(){return c(this,nl)}get textContentItemsStr(){return c(this,Vf)}static cleanup(){if(!(c(this,Mu).size>0)){c(this,Cu).clear();for(const{canvas:t}of c(this,il).values())t.remove();c(this,il).clear()}}};vr=new WeakMap,Rn=new WeakMap,Ff=new WeakMap,Uf=new WeakMap,tl=new WeakMap,ia=new WeakMap,jf=new WeakMap,Gf=new WeakMap,el=new WeakMap,_u=new WeakMap,xu=new WeakMap,Ar=new WeakMap,Eu=new WeakMap,Vf=new WeakMap,Tu=new WeakMap,nl=new WeakMap,$f=new WeakMap,qf=new WeakMap,Cu=new WeakMap,il=new WeakMap,Xf=new WeakMap,wr=new WeakMap,Mu=new WeakMap,Fa=new WeakSet,$M=function(t){var s,a;if(c(this,Ff))return;(a=c(this,ia)).ctx??(a.ctx=x(s=Se,ci,om).call(s,c(this,tl)));const e=c(this,nl),i=c(this,Vf);for(const r of t){if(e.length>D8){ht("Ignoring additional textDivs for performance reasons."),v(this,Ff,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=c(this,Rn);v(this,Rn,document.createElement("span")),c(this,Rn).classList.add("markedContent"),r.id!==null&&c(this,Rn).setAttribute("id",`${r.id}`),o.append(c(this,Rn))}else r.type==="endMarkedContent"&&v(this,Rn,c(this,Rn).parentNode);continue}i.push(r.str),x(this,Fa,qM).call(this,r)}},qM=function(t){var m;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,nl).push(e);const s=et.transform(c(this,qf),t.transform);let a=Math.atan2(s[1],s[0]);const r=c(this,Eu)[t.fontName];r.vertical&&(a+=Math.PI/2);let o=c(this,Uf)&&r.fontSubstitution||r.fontFamily;o=Se.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),u=l*x(m=Se,ci,YM).call(m,o,r,c(this,tl));let h,d;a===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(a),d=s[5]-u*Math.cos(a));const f="calc(var(--total-scale-factor) *",g=e.style;c(this,Rn)===c(this,_u)?(g.left=`${(100*h/c(this,Gf)).toFixed(2)}%`,g.top=`${(100*d/c(this,jf)).toFixed(2)}%`):(g.left=`${f}${h.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(c(Se,wr)*l).toFixed(2)}px)`,g.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Uf)&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),p=Math.abs(t.transform[3]);S!==p&&Math.max(S,p)/Math.min(S,p)>1.5&&(b=!0)}if(b&&(i.canvasWidth=r.vertical?t.height:t.width),c(this,$f).set(e,i),c(this,ia).div=e,c(this,ia).properties=i,x(this,Fa,l1).call(this,c(this,ia)),i.hasText&&c(this,Rn).append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,Rn).append(S)}},l1=function(t){var o;const{div:e,properties:i,ctx:s}=t,{style:a}=e;let r="";if(c(Se,wr)>1&&(r=`scale(${1/c(Se,wr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=a,{canvasWidth:u,fontSize:h}=i;x(o=Se,ci,c1).call(o,s,h*c(this,Ar),l);const{width:d}=s.measureText(e.textContent);d>0&&(r=`scaleX(${u*c(this,Ar)/d}) ${r}`)}i.angle!==0&&(r=`rotate(${i.angle}deg) ${r}`),r.length>0&&(a.transform=r)},ci=new WeakSet,om=function(t=null){let e=c(this,il).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,il).set(t,e),c(this,Xf).set(e,{size:0,family:""})}return e},c1=function(t,e,i){const s=c(this,Xf).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},XM=function(){if(c(this,wr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),v(this,wr,t.getBoundingClientRect().height),t.remove()},YM=function(t,e,i){const s=c(this,Cu).get(t);if(s)return s;const a=x(this,ci,om).call(this,i);a.canvas.width=a.canvas.height=wx,x(this,ci,c1).call(this,a,wx,t);const r=a.measureText(""),o=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return o?u=o/(o+l):(Je.platform.isFirefox&&ht("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),c(this,Cu).set(t,u),u},_(Se,ci),_(Se,Cu,new Map),_(Se,il,new Map),_(Se,Xf,new WeakMap),_(Se,wr,null),_(Se,Mu,new Set);let af=Se;class rf{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(a){var l;if(!a)return;let r=null;const o=a.name;if(o==="#text")r=a.value;else if(rf.shouldBuildText(o))(l=a==null?void 0:a.attributes)!=null&&l.textContent?r=a.attributes.textContent:a.value&&(r=a.value);else return;if(r!==null&&e.push({str:r}),!!a.children)for(const u of a.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const L8=65536,k8=100;function O8(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new h1,{docId:e}=t,i=n.url?z8(n.url):null,s=n.data?P8(n.data):null,a=n.httpHeaders||null,r=n.withCredentials===!0,o=n.password??null,l=n.range instanceof KM?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:L8;let h=n.worker instanceof eu?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!py(n.docBaseUrl)?n.docBaseUrl:null,g=Np(n.cMapUrl),b=n.cMapPacked!==!1,m=n.CMapReaderFactory||(Xe?WP:ox),S=Np(n.iccUrl),p=Np(n.standardFontDataUrl),y=n.StandardFontDataFactory||(Xe?ZP:lx),A=Np(n.wasmUrl),w=n.WasmFactory||(Xe?QP:cx),T=n.stopAtErrors!==!0,C=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,M=n.isEvalSupported!==!1,L=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Xe,k=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Xe&&(Je.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,H=typeof n.disableFontFace=="boolean"?n.disableFontFace:Xe,$=n.fontExtraProperties===!0,G=n.enableXfa===!0,R=n.ownerDocument||globalThis.document,B=n.disableRange===!0,E=n.disableStream===!0,N=n.disableAutoFetch===!0,z=n.pdfBug===!0,O=n.CanvasFactory||(Xe?KP:qP),I=n.FilterFactory||(Xe?YP:XP),V=n.enableHWA===!0,F=n.useWasm!==!1,X=l?l.length:n.length??NaN,Y=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Xe&&!H,tt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===ox&&y===lx&&w===cx&&g&&p&&A&&Ac(g,document.baseURI)&&Ac(p,document.baseURI)&&Ac(A,document.baseURI)),ut=null;xP(d);const it={canvasFactory:new O({ownerDocument:R,enableHWA:V}),filterFactory:new I({docId:e,ownerDocument:R}),cMapReaderFactory:tt?null:new m({baseUrl:g,isCompressed:b}),standardFontDataFactory:tt?null:new y({baseUrl:p}),wasmFactory:tt?null:new w({baseUrl:A})};if(!h){const Et={verbosity:d,port:wa.workerPort};h=Et.port?eu.fromPort(Et):new eu(Et),t._worker=h}const Nt={docId:e,apiVersion:"5.1.91",data:s,password:o,disableAutoFetch:N,rangeChunkSize:u,length:X,docBaseUrl:f,enableXfa:G,evaluatorOptions:{maxImageSize:C,disableFontFace:H,ignoreErrors:T,isEvalSupported:M,isOffscreenCanvasSupported:L,isImageDecoderSupported:k,canvasMaxAreaInBytes:P,fontExtraProperties:$,useSystemFonts:Y,useWasm:F,useWorkerFetch:tt,cMapUrl:g,iccUrl:S,standardFontDataUrl:p,wasmUrl:A}},qt={ownerDocument:R,pdfBug:z,styleElement:ut,loadingParams:{disableAutoFetch:N,enableXfa:G}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Et=h.messageHandler.sendWithPromise("GetDocRequest",Nt,s?[s.buffer]:null);let hn;if(l)hn=new p8(l,{disableRange:B,disableStream:E});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Ae;if(Xe)if(Ac(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ae=Ax}else Ae=M8;else Ae=Ac(i)?Ax:_8;hn=new Ae({url:i,length:X,httpHeaders:a,withCredentials:r,rangeChunkSize:u,disableRange:B,disableStream:E})}return Et.then(Ae=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const xn=new ld(e,Ae,h.port),En=new j8(xn,t,hn,qt,it);t._transport=En,xn.send("Ready",null)})}).catch(t._capability.reject),t}function z8(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Xe)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function P8(n){if(Xe&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Kg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Np(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const u1=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,H8=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",I8=OP.bind(null,u1,H8);var N0;const D0=class D0{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${dn(D0,N0)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,a}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};N0=new WeakMap,_(D0,N0,0);let h1=D0;class KM{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){It("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class B8{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return At(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var sa,sl,fd;class F8{constructor(t,e,i,s=!1){_(this,sl);_(this,sa,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new sx:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new WM,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:a=!1}={}){return new Zg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return At(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=nr.ENABLE,transform:a=null,background:r=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var w,T;(w=this._stats)==null||w.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:g,cacheKey:b}=f;v(this,sa,!1),o||(o=this._transport.getOptionalContentConfig(g));let m=this._intentStates.get(b);m||(m=Object.create(null),this._intentStates.set(b,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const S=!!(g&ei.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(f));const p=C=>{var M;m.renderTasks.delete(y),S&&v(this,sa,!0),x(this,sl,fd).call(this),C?(y.capability.reject(C),this._abortOperatorList({intentState:m,reason:C instanceof Error?C:new Error(C)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(M=globalThis.Stats)!=null&&M.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new f1({callback:p,params:{canvasContext:t,viewport:e,transform:a,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(m.renderTasks||(m.renderTasks=new Set)).add(y);const A=y.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([C,M])=>{var L;if(this.destroyed){p();return}if((L=this._stats)==null||L.time("Rendering"),!(M.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:C,optionalContentConfig:M}),y.operatorListChanged()}).catch(p),A}getOperatorList({intent:t="display",annotationMode:e=nr.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,e,i,s,!0);let o=this._intentStates.get(r.cacheKey);o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(r)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>rf.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function a(){r.read().then(function({value:l,done:u}){if(u){i(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},s)}const r=e.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),v(this,sa,!1),Promise.all(t)}cleanup(t=!1){v(this,sa,!0);const e=x(this,sl,fd).call(this);return t&&e&&this._stats&&(this._stats=new sx),e}_startRenderPage(t,e){var s,a;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&x(this,sl,fd).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:a,transfer:r}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},r).getReader(),u=this._intentStates.get(e);u.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();x(this,sl,fd).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof bw){let s=k8;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new no(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}sa=new WeakMap,sl=new WeakSet,fd=function(){if(!c(this,sa)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,sa,!1),!0};var aa,L0;class U8{constructor(){_(this,aa,new Map);_(this,L0,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};c(this,L0).then(()=>{for(const[s]of c(this,aa))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){ht("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",r),a.addEventListener("abort",r)}c(this,aa).set(e,s)}removeEventListener(t,e){const i=c(this,aa).get(e);i==null||i(),c(this,aa).delete(e)}terminate(){for(const[,t]of c(this,aa))t==null||t();c(this,aa).clear()}}aa=new WeakMap,L0=new WeakMap;var k0,al,rl,Ru,lm,Nu,cm;const Xt=class Xt{constructor({name:t=null,port:e=null,verbosity:i=EP()}={}){_(this,Ru);var s;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=c(Xt,rl))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(Xt,rl)||v(Xt,rl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new ld("main","worker",t),this._messageHandler.on("ready",function(){}),x(this,Ru,lm).call(this)}_initialize(){if(c(Xt,al)||c(Xt,Nu,cm)){this._setupFakeWorker();return}let{workerSrc:t}=Xt;try{Xt._isSameOrigin(window.location,t)||(t=Xt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new ld("main","worker",e),s=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),i.on("test",o=>{if(a.abort(),this.destroyed||!o){s();return}this._messageHandler=i,this._port=e,this._webWorker=e,x(this,Ru,lm).call(this)}),i.on("ready",o=>{if(a.abort(),this.destroyed){s();return}try{r()}catch{this._setupFakeWorker()}});const r=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};r();return}catch{gy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Xt,al)||(ht("Setting up fake worker."),v(Xt,al,!0)),Xt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new U8;this._port=e;const i=`fake${dn(Xt,k0)._++}`,s=new ld(i+"_worker",i,e);t.setup(s,e),this._messageHandler=new ld(i,i+"_worker",e),x(this,Ru,lm).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=c(Xt,rl))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=c(this,rl))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Xt(t)}static get workerSrc(){if(wa.workerSrc)return wa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return At(this,"_setupFakeWorkerGlobal",(async()=>c(this,Nu,cm)?c(this,Nu,cm):(await import(this.workerSrc)).WorkerMessageHandler)())}};k0=new WeakMap,al=new WeakMap,rl=new WeakMap,Ru=new WeakSet,lm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Nu=new WeakSet,cm=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(Xt,Nu),_(Xt,k0,0),_(Xt,al,!1),_(Xt,rl),Xe&&(v(Xt,al,!0),wa.workerSrc||(wa.workerSrc="./pdf.worker.mjs")),Xt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Xt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let eu=Xt;var ra,vs,Du,Lu,oa,ol,gd;class j8{constructor(t,e,i,s,a){_(this,ol);_(this,ra,new Map);_(this,vs,new Map);_(this,Du,new Map);_(this,Lu,new Map);_(this,oa,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new WM,this.fontLoader=new VP({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return At(this,"annotationStorage",new _w)}getRenderingIntent(t,e=nr.ENABLE,i=null,s=!1,a=!1){let r=ei.DISPLAY,o=Jv;switch(t){case"any":r=ei.ANY;break;case"display":break;case"print":r=ei.PRINT;break;default:ht(`getRenderingIntent - invalid intent: ${t}`)}const l=r&ei.PRINT&&i instanceof RM?i:this.annotationStorage;switch(e){case nr.DISABLE:r+=ei.ANNOTATIONS_DISABLE;break;case nr.ENABLE:break;case nr.ENABLE_FORMS:r+=ei.ANNOTATIONS_FORMS;break;case nr.ENABLE_STORAGE:r+=ei.ANNOTATIONS_STORAGE,o=l.serializable;break;default:ht(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(r+=ei.IS_EDITING),a&&(r+=ei.OPLIST);const{ids:u,hash:h}=l.modifiedIds,d=[r,o.hash,h];return{renderingIntent:r,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,oa))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of c(this,vs).values())t.push(s._destroy());c(this,vs).clear(),c(this,Du).clear(),c(this,Lu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,a;this.commonObjs.clear(),this.fontLoader.clear(),c(this,ra).clear(),this.filterFactory.destroy(),af.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new no("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{ye(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:r}){if(r){s.close();return}ye(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:r}=this._fullReader;return(!s||!a)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:r}}),t.on("GetRangeReader",(i,s)=>{ye(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:r,done:o}){if(o){s.close();return}ye(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{a.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new B8(i,this))}),t.on("DocException",i=>{e._capability.reject(Tn(i))}),t.on("PasswordRequest",i=>{v(this,oa,Promise.withResolvers());try{if(!e.onPassword)throw Tn(i);const s=a=>{a instanceof Error?c(this,oa).reject(a):c(this,oa).resolve({password:a})};e.onPassword(s,i.code)}catch(s){c(this,oa).reject(s)}return c(this,oa).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,vs).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,a])=>{var r;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in a){const h=a.error;ht(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const o=this._params.pdfBug&&((r=globalThis.FontInspector)!=null&&r.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,l=new $P(a,o);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:u}=a;ye(u,"The imageRef must be defined.");for(const h of c(this,vs).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===u)return d.dataLen?(this.commonObjs.resolve(i,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,a,r])=>{var l;if(this.destroyed)return;const o=c(this,vs).get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){(l=r==null?void 0:r.bitmap)==null||l.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(i,r);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ht("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=c(this,Du).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&c(this,Lu).set(a.refStr,t);const r=new F8(e,a,this,this._params.pdfBug);return c(this,vs).set(e,r),r});return c(this,Du).set(e,s),s}getPageIndex(t){return u1(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return x(this,ol,gd).call(this,"GetFieldObjects")}hasJSActions(){return x(this,ol,gd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,ol,gd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return x(this,ol,gd).call(this,"GetOptionalContentConfig").then(e=>new g8(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,ra).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var a,r;return{info:s[0],metadata:s[1]?new d8(s[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((r=this._fullReader)==null?void 0:r.contentLength)??null}});return c(this,ra).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,vs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,ra).clear(),this.filterFactory.destroy(!0),af.cleanup()}}cachedPageNumber(t){if(!u1(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,Lu).get(e)??null}}ra=new WeakMap,vs=new WeakMap,Du=new WeakMap,Lu=new WeakMap,oa=new WeakMap,ol=new WeakSet,gd=function(t,e=null){const i=c(this,ra).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return c(this,ra).set(t,s),s};const Yh=Symbol("INITIAL_DATA");var $n,Yf,d1;class WM{constructor(){_(this,Yf);_(this,$n,Object.create(null))}get(t,e=null){if(e){const s=x(this,Yf,d1).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=c(this,$n)[t];if(!i||i.data===Yh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=c(this,$n)[t];return!!e&&e.data!==Yh}delete(t){const e=c(this,$n)[t];return!e||e.data===Yh?!1:(delete c(this,$n)[t],!0)}resolve(t,e=null){const i=x(this,Yf,d1).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in c(this,$n)){const{data:i}=c(this,$n)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}v(this,$n,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,$n)){const{data:e}=c(this,$n)[t];e!==Yh&&(yield[t,e])}}}$n=new WeakMap,Yf=new WeakSet,d1=function(t){var e;return(e=c(this,$n))[t]||(e[t]={...Promise.withResolvers(),data:Yh})};var Sr;class G8{constructor(t){_(this,Sr,null);J(this,"onContinue",null);J(this,"onError",null);v(this,Sr,t)}get promise(){return c(this,Sr).capability.promise}cancel(t=0){c(this,Sr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,Sr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,Sr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Sr=new WeakMap;var _r,ll;const To=class To{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:a,operatorList:r,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){_(this,_r,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new G8(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var o,l;if(this.cancelled)return;if(this._canvas){if(c(To,ll).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(To,ll).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:a,background:r}=this.params;this.gfx=new tu(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var i,s,a;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,_r)&&(window.cancelAnimationFrame(c(this,_r)),v(this,_r,null)),c(To,ll).delete(this._canvas),t||(t=new bw(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(a=(s=this.task).onError)==null||a.call(s,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,_r,window.requestAnimationFrame(()=>{v(this,_r,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(To,ll).delete(this._canvas),this.callback())))}};_r=new WeakMap,ll=new WeakMap,_(To,ll,new WeakSet);let f1=To;const V8="5.1.91",$8="45cbe8bb0";function Sx(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Kh(n){return Math.max(0,Math.min(255,255*n))}class _x{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Kh(t),[t,t,t]}static G_HTML([t]){const e=Sx(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Kh)}static RGB_HTML(t){return`#${t.map(Sx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Kh(1-Math.min(1,t+s)),Kh(1-Math.min(1,i+s)),Kh(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,a=1-e,r=1-i,o=Math.min(s,a,r);return["CMYK",s,a,r,o]}}class q8{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){It("Abstract method `_createSVG` called.")}}class y0 extends q8{_createSVG(t){return document.createElementNS(js,t)}}class ZM{static setupStorage(t,e,i,s,a){const r=s.getValue(e,{value:null});switch(i.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),a==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",o=>{s.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),a==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(const o of i.children)o.attributes.value===r.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:a}){const{attributes:r}=e,o=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${s}`);for(const[l,u]of Object.entries(r))if(u!=null)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,u)}o&&a.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,a=t.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:a,linkService:i});const o=a!=="richText",l=t.div;if(l.append(r),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=g}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);r.append(g),o&&rf.shouldBuildText(s.name)&&u.push(g)}return{textDivs:u}}const h=[[s,-1,r]];for(;h.length>0;){const[g,b,m]=h.at(-1);if(b+1===g.children.length){h.pop();continue}const S=g.children[++h.at(-1)[1]];if(S===null)continue;const{name:p}=S;if(p==="#text"){const A=document.createTextNode(S.value);u.push(A),m.append(A);continue}const y=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,p):document.createElement(p);if(m.append(y),S.attributes&&this.setAttributes({html:y,element:S,storage:e,intent:a,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,y]);else if(S.value){const A=document.createTextNode(S.value);o&&rf.shouldBuildText(p)&&u.push(A),y.append(A)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const tp=1e3,X8=9,Zl=new WeakSet;class xx{static create(t){switch(t.data.annotationType){case ge.LINK:return new QM(t);case ge.TEXT:return new Y8(t);case ge.WIDGET:switch(t.data.fieldType){case"Tx":return new K8(t);case"Btn":return t.data.radioButton?new eR(t):t.data.checkBox?new Z8(t):new Q8(t);case"Ch":return new J8(t);case"Sig":return new W8(t)}return new ic(t);case ge.POPUP:return new p1(t);case ge.FREETEXT:return new rR(t);case ge.LINE:return new eH(t);case ge.SQUARE:return new nH(t);case ge.CIRCLE:return new iH(t);case ge.POLYLINE:return new oR(t);case ge.CARET:return new aH(t);case ge.INK:return new Tw(t);case ge.POLYGON:return new sH(t);case ge.HIGHLIGHT:return new lR(t);case ge.UNDERLINE:return new rH(t);case ge.SQUIGGLY:return new oH(t);case ge.STRIKEOUT:return new lH(t);case ge.STAMP:return new cR(t);case ge.FILEATTACHMENT:return new cH(t);default:return new de(t)}}}var cl,ku,Ou,Kf,g1;const Lw=class Lw{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){_(this,Kf);_(this,cl,null);_(this,ku,!1);_(this,Ou,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Lw._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;c(this,cl)||v(this,cl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&x(this,Kf,g1).call(this,e),(i=c(this,Ou))==null||i.popup.updateEdited(t)}resetEdited(){var t;c(this,cl)&&(x(this,Kf,g1).call(this,c(this,cl).rect),(t=c(this,Ou))==null||t.popup.resetEdited(),v(this,cl,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof ic||(a.tabIndex=tp);const{style:r}=a;if(r.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof p1){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,a),a}const{width:o,height:l}=this;if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(m>0||S>0){const y=`calc(${m}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;r.borderRadius=y}else if(this instanceof eR){const y=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;r.borderRadius=y}switch(e.borderStyle.style){case vc.SOLID:r.borderStyle="solid";break;case vc.DASHED:r.borderStyle="dashed";break;case vc.BEVELED:ht("Unimplemented border style: beveled");break;case vc.INSET:ht("Unimplemented border style: inset");break;case vc.UNDERLINE:r.borderBottomStyle="solid";break}const p=e.borderColor||null;p?(v(this,ku,!0),r.borderColor=et.makeHexColor(p[0]|0,p[1]|0,p[2]|0)):r.borderWidth=0}const u=et.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:g}=s.rawDims;r.left=`${100*(u[0]-f)/h}%`,r.top=`${100*(u[1]-g)/d}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(r.width=`${100*o/h}%`,r.height=`${100*l/d}%`):this.setRotation(b,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:r}=this;t%180!==0&&([a,r]=[r,a]),e.style.width=`${100*a/i}%`,e.style.height=`${100*r/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const a=s.detail[e],r=a[0],o=a.slice(1);s.target.style[i]=_x[`${r}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:_x[`${r}_rgb`](o)})};return At(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const a=t[s]||i[s];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,a]of Object.entries(e)){const r=i[s];if(r){const o={detail:{[s]:a},target:t};r(o),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,a]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,S,p,y]=t.subarray(2,6);if(s===m&&a===S&&e===p&&i===y)return}const{style:r}=this.container;let o;if(c(this,ku)){const{borderColor:m,borderWidth:S}=r;r.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=s-e,u=a-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const g=h.createElement("clipPath"),b=`clippath_${this.data.id}`;g.setAttribute("id",b),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let m=2,S=t.length;m<S;m+=8){const p=t[m],y=t[m+1],A=t[m+2],w=t[m+3],T=h.createElement("rect"),C=(A-e)/l,M=(a-y)/u,L=(p-A)/l,k=(y-w)/u;T.setAttribute("x",C),T.setAttribute("y",M),T.setAttribute("width",L),T.setAttribute("height",k),g.append(T),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${M}" width="${L}" height="${k}"/>`)}c(this,ku)&&(o.push("</g></svg>')"),r.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=v(this,Ou,new p1({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){It("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:r,exportValues:o}of s){if(a===-1||r===e)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${r}"]`);if(u&&!Zl.has(u)){ht(`_getElementsByName - element not allowed: ${r}`);continue}i.push({id:r,exportValue:l,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,r=s.getAttribute("data-element-id");r!==e&&Zl.has(s)&&i.push({id:r,exportValue:a,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};cl=new WeakMap,ku=new WeakMap,Ou=new WeakMap,Kf=new WeakSet,g1=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:r,pageX:o,pageY:l}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-o)/a}%`,e.top=`${100*(r-t[3]+l)/r}%`,s===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/r}%`):this.setRotation(s)};let de=Lw;var ii,So,JM,tR;class QM extends de{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});_(this,ii);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let a=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(s,e.action),a=!0):e.attachment?(x(this,ii,JM).call(this,s,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(x(this,ii,tR).call(this,s,e.setOCGState),a=!0):e.dest?(this._bindLink(s,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),a=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&x(this,ii,So).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),x(this,ii,So).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const r=s.get(a);r&&(e[r]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}e.onclick||(e.onclick=()=>!1),x(this,ii,So).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),x(this,ii,So).call(this),!this._fieldObjects){ht('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:a,refs:r,include:o}=i,l=[];if(a.length!==0||r.length!==0){const f=new Set(r);for(const g of a){const b=this._fieldObjects[g]||[];for(const{id:m}of b)f.add(m)}for(const g of Object.values(this._fieldObjects))for(const b of g)f.has(b.id)===o&&l.push(b)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:g}=f;switch(h.push(g),f.type){case"text":{const m=f.defaultValue||"";u.setValue(g,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;u.setValue(g,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";u.setValue(g,{value:m});break}default:continue}const b=document.querySelector(`[data-element-id="${g}"]`);if(b){if(!Zl.has(b)){ht(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}ii=new WeakSet,So=function(){this.container.setAttribute("data-internal-link","")},JM=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,s),!1},x(this,ii,So).call(this)},tR=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),x(this,ii,So).call(this)};class Y8 extends de{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ic extends de{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Je.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,a){i.includes("mouse")?t.addEventListener(i,r=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(i,r=>{var o;if(i==="blur"){if(!e.focused||!r.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(r)}}))})}_setEventListeners(t,e,i,s){var a,r,o;for(const[l,u]of i)(u==="Action"||(a=this.data.actions)!=null&&a[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,u,s),u==="Focus"&&!((r=this.data.actions)!=null&&r.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":et.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||X8,a=t.style;let r;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(gb*s))||1,d=u/h;r=Math.min(s,l(d/gb))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);r=Math.min(s,l(u/gb))}a.fontSize=`calc(${r}px * var(--total-scale-factor))`,a.color=et.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class K8 extends ic{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const a=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),a.setValue(r.id,{[s]:i})}render(){var s,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Zl.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=tp,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";i.value=h.userValue=g,h.formattedValue=null});let d=f=>{const{formattedValue:g}=h;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{var m;if(h.focused)return;const{target:b}=g;h.userValue&&(b.value=h.userValue),h.lastCommittedValue=b.value,h.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const b={value(m){h.userValue=m.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),m.target.value=h.userValue},formattedValue(m){const{formattedValue:S}=m.detail;h.formattedValue=S,S!=null&&m.target!==document.activeElement&&(m.target.value=S),t.setValue(e,{formattedValue:S})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var A;const{charLimit:S}=m.detail,{target:p}=m;if(S===0){p.removeAttribute("maxLength");return}p.setAttribute("maxLength",S);let y=h.userValue;!y||y.length<=S||(y=y.slice(0,S),p.value=h.userValue=y,t.setValue(e,{value:y}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:p.selectionStart,selEnd:p.selectionEnd}}))}};this._dispatchEventFromSandbox(b,g)}),i.addEventListener("keydown",g=>{var S;h.commitKey=1;let b=-1;if(g.key==="Escape"?b=0:g.key==="Enter"&&!this.data.multiLine?b=2:g.key==="Tab"&&(h.commitKey=3),b===-1)return;const{value:m}=g.target;h.lastCommittedValue!==m&&(h.lastCommittedValue=m,h.userValue=m,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:b,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",g=>{var m,S;if(!h.focused||!g.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(h.focused=!1);const{value:b}=g.target;h.userValue=b,h.lastCommittedValue!==b&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",g=>{var T;h.lastCommittedValue=null;const{data:b,target:m}=g,{value:S,selectionStart:p,selectionEnd:y}=m;let A=p,w=y;switch(g.inputType){case"deleteWordBackward":{const C=S.substring(0,p).match(/\w*[^\w]*$/);C&&(A-=C[0].length);break}case"deleteWordForward":{const C=S.substring(p).match(/^[^\w]*\w*/);C&&(w+=C[0].length);break}case"deleteContentBackward":p===y&&(A-=1);break;case"deleteContentForward":p===y&&(w+=1);break}g.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:b||"",willCommit:!1,selStart:A,selEnd:w}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class W8 extends ic{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Z8 extends ic{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Zl.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=tp,a.addEventListener("change",r=>{const{name:o,checked:l}=r.target;for(const u of this._getElementsByName(o,i)){const h=l&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:l})}),a.addEventListener("resetform",r=>{const o=e.defaultFieldValue||"Off";r.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",r=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,r)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class eR extends ic{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const a=document.createElement("input");if(Zl.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=tp,a.addEventListener("change",r=>{const{name:o,checked:l}=r.target;for(const u of this._getElementsByName(o,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:l})}),a.addEventListener("resetform",r=>{const o=e.defaultFieldValue;r.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const r=e.buttonValue;a.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const h=r===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Q8 extends QM{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class J8 extends ic{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Zl.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=tp;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),a=!1),s.append(d)}let r=null;if(a){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),r=()=>{h.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:g}=s;return g?Array.prototype.filter.call(f,b=>b.selected).map(b=>b[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){r==null||r();const g=f.detail.value,b=new Set(Array.isArray(g)?g:[g]);for(const m of s.options)m.selected=b.has(m.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const g=s.options,b=f.detail.remove;g[b].selected=!1,s.remove(b),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:o(!0),items:u(f)}),l=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(f){const{index:g,displayValue:b,exportValue:m}=f.detail.insert,S=s.children[g],p=document.createElement("option");p.textContent=b,p.value=m,S?S.before(p):s.append(p),t.setValue(e,{value:o(!0),items:u(f)}),l=o(!1)},items(f){const{items:g}=f.detail;for(;s.length!==0;)s.remove(0);for(const b of g){const{displayValue:m,exportValue:S}=b,p=document.createElement("option");p.textContent=m,p.value=S,s.append(p)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:u(f)}),l=o(!1)},indices(f){const g=new Set(f.detail.indices);for(const b of f.target.options)b.selected=g.has(b.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var g;const d=o(!0),f=o(!1);t.setValue(e,{value:d}),h.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class p1 extends de{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:de._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new tH({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${yw}${i}`).join(",")),this.container}}var zu,O0,z0,Pu,Hu,se,la,Iu,Wf,Zf,Bu,ca,Ii,ua,Qf,ha,Jf,ul,hl,Bt,um,m1,nR,iR,sR,aR,hm,dm,y1;class tH{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:a,contentsObj:r,richText:o,parent:l,rect:u,parentRect:h,open:d}){_(this,Bt);_(this,zu,x(this,Bt,sR).bind(this));_(this,O0,x(this,Bt,y1).bind(this));_(this,z0,x(this,Bt,dm).bind(this));_(this,Pu,x(this,Bt,hm).bind(this));_(this,Hu,null);_(this,se,null);_(this,la,null);_(this,Iu,null);_(this,Wf,null);_(this,Zf,null);_(this,Bu,null);_(this,ca,!1);_(this,Ii,null);_(this,ua,null);_(this,Qf,null);_(this,ha,null);_(this,Jf,null);_(this,ul,null);_(this,hl,!1);var f;v(this,se,t),v(this,Jf,s),v(this,la,r),v(this,ha,o),v(this,Zf,l),v(this,Hu,e),v(this,Qf,u),v(this,Bu,h),v(this,Wf,i),v(this,Iu,Aw.toDateObject(a)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",c(this,Pu)),g.addEventListener("mouseenter",c(this,z0)),g.addEventListener("mouseleave",c(this,O0)),g.classList.add("popupTriggerArea");for(const g of i)(f=g.container)==null||f.addEventListener("keydown",c(this,zu));c(this,se).hidden=!0,d&&x(this,Bt,hm).call(this)}render(){if(c(this,Ii))return;const t=v(this,Ii,document.createElement("div"));if(t.className="popup",c(this,Hu)){const a=t.style.outlineColor=et.makeHexColor(...c(this,Hu));t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=c(this,Jf),t.append(e),c(this,Iu)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Iu).valueOf()})),e.append(a)}const s=c(this,Bt,um);if(s)ZM.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(c(this,la));t.append(a)}c(this,se).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,r=s.length;a<r;++a){const o=s[a];i.append(document.createTextNode(o)),a<r-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;c(this,ul)||v(this,ul,{contentsObj:c(this,la),richText:c(this,ha)}),t&&v(this,ua,null),e&&(v(this,ha,x(this,Bt,iR).call(this,e)),v(this,la,null)),(i=c(this,Ii))==null||i.remove(),v(this,Ii,null)}resetEdited(){var t;c(this,ul)&&({contentsObj:dn(this,la)._,richText:dn(this,ha)._}=c(this,ul),v(this,ul,null),(t=c(this,Ii))==null||t.remove(),v(this,Ii,null),v(this,ua,null))}forceHide(){v(this,hl,this.isVisible),c(this,hl)&&(c(this,se).hidden=!0)}maybeShow(){c(this,hl)&&(c(this,Ii)||x(this,Bt,dm).call(this),v(this,hl,!1),c(this,se).hidden=!1)}get isVisible(){return c(this,se).hidden===!1}}zu=new WeakMap,O0=new WeakMap,z0=new WeakMap,Pu=new WeakMap,Hu=new WeakMap,se=new WeakMap,la=new WeakMap,Iu=new WeakMap,Wf=new WeakMap,Zf=new WeakMap,Bu=new WeakMap,ca=new WeakMap,Ii=new WeakMap,ua=new WeakMap,Qf=new WeakMap,ha=new WeakMap,Jf=new WeakMap,ul=new WeakMap,hl=new WeakMap,Bt=new WeakSet,um=function(){const t=c(this,ha),e=c(this,la);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,ha).html||null},m1=function(){var t,e,i;return((i=(e=(t=c(this,Bt,um))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},nR=function(){var t,e,i;return((i=(e=(t=c(this,Bt,um))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},iR=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:c(this,Bt,nR),fontSize:c(this,Bt,m1)?`calc(${c(this,Bt,m1)}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return i},sR=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,ca))&&x(this,Bt,hm).call(this)},aR=function(){if(c(this,ua)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:a}}}=c(this,Zf);let r=!!c(this,Bu),o=r?c(this,Bu):c(this,Qf);for(const b of c(this,Wf))if(!o||et.intersect(b.data.rect,o)!==null){o=b.data.rect,r=!0;break}const l=et.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),h=r?o[2]-o[0]+5:0,d=l[0]+h,f=l[1];v(this,ua,[100*(d-s)/e,100*(f-a)/i]);const{style:g}=c(this,se);g.left=`${c(this,ua)[0]}%`,g.top=`${c(this,ua)[1]}%`},hm=function(){v(this,ca,!c(this,ca)),c(this,ca)?(x(this,Bt,dm).call(this),c(this,se).addEventListener("click",c(this,Pu)),c(this,se).addEventListener("keydown",c(this,zu))):(x(this,Bt,y1).call(this),c(this,se).removeEventListener("click",c(this,Pu)),c(this,se).removeEventListener("keydown",c(this,zu)))},dm=function(){c(this,Ii)||this.render(),this.isVisible?c(this,ca)&&c(this,se).classList.add("focused"):(x(this,Bt,aR).call(this),c(this,se).hidden=!1,c(this,se).style.zIndex=parseInt(c(this,se).style.zIndex)+1e3)},y1=function(){c(this,se).classList.remove("focused"),!(c(this,ca)||!this.isVisible)&&(c(this,se).hidden=!0,c(this,se).style.zIndex=parseInt(c(this,se).style.zIndex)-1e3)};class rR extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ct.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var tg;class eH extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,tg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),r=v(this,tg,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;var eg;class nH extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,eg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),r=e.borderStyle.width,o=v(this,eg,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",i-r),o.setAttribute("height",s-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,eg)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap;var ng;class iH extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,ng,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),r=e.borderStyle.width,o=v(this,ng,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",s/2),o.setAttribute("rx",i/2-r/2),o.setAttribute("ry",s/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}ng=new WeakMap;var ig;class oR extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,ig,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:a},width:r,height:o}=this;if(!i)return this.container;const l=this.svgFactory.create(r,o,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const g=i[d]-e[0],b=e[3]-i[d+1];u.push(`${g},${b}`)}u=u.join(" ");const h=v(this,ig,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}ig=new WeakMap;class sH extends oR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aH extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var sg,dl,ag,b1;class Tw extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,ag);_(this,sg,null);_(this,dl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ct.HIGHLIGHT:ct.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:a,popupRef:r}}=this,{transform:o,width:l,height:u}=x(this,ag,b1).call(this,i,e),h=this.svgFactory.create(l,u,!0),d=v(this,sg,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",a.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,g=s.length;f<g;f++){const b=this.svgFactory.createElement(this.svgElementName);c(this,dl).push(b),b.setAttribute("points",s[f].join(",")),d.append(b)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:a}=e,r=c(this,sg);if(i>=0&&r.setAttribute("stroke-width",i||1),s)for(let o=0,l=c(this,dl).length;o<l;o++)c(this,dl)[o].setAttribute("points",s[o].join(","));if(a){const{transform:o,width:l,height:u}=x(this,ag,b1).call(this,this.data.rotation,a);r.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return c(this,dl)}addHighlightArea(){this.container.classList.add("highlightArea")}}sg=new WeakMap,dl=new WeakMap,ag=new WeakSet,b1=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class lR extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ct.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class rH extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class oH extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class lH extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class cR extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ct.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var rg,og,v1;class cH extends de{constructor(e){var s;super(e,{isRenderable:!0});_(this,og);_(this,rg,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",x(this,og,v1).bind(this)),v(this,rg,s);const{isMac:a}=Je.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(a?r.metaKey:r.ctrlKey)&&x(this,og,v1).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return c(this,rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}rg=new WeakMap,og=new WeakSet,v1=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var lg,fl,xr,cg,ro,w1,S1;const kw=class kw{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:a,viewport:r,structTreeLayer:o}){_(this,ro);_(this,lg,null);_(this,fl,null);_(this,xr,new Map);_(this,cg,null);this.div=t,v(this,lg,e),v(this,fl,i),v(this,cg,o||null),this.page=a,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(this,xr).size>0}async render(t){var r;const{annotations:e}=t,i=this.div;Kl(i,this.viewport);const s=new Map,a={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new y0,annotationStorage:t.annotationStorage||new _w,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const l=o.annotationType===ge.POPUP;if(l){const d=s.get(o.id);if(!d)continue;a.elements=d}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const u=xx.create(a);if(!u.isRenderable)continue;if(!l&&o.popupRef){const d=s.get(o.popupRef);d?d.push(u):s.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await x(this,ro,w1).call(this,h,o.id),u._isEditable&&(c(this,xr).set(u.data.id,u),(r=this._annotationEditorUIManager)==null||r.renderAnnotationElement(u))}x(this,ro,S1).call(this)}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new y0,parent:this};for(const s of t){s.borderStyle||(s.borderStyle=kw._defaultBorderStyle),i.data=s;const a=xx.create(i);if(!a.isRenderable)continue;const r=a.render();await x(this,ro,w1).call(this,r,s.id)}}update({viewport:t}){const e=this.div;this.viewport=t,Kl(e,{rotation:t.rotation}),x(this,ro,S1).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,xr).values())}getEditableAnnotation(t){return c(this,xr).get(t)}static get _defaultBorderStyle(){return At(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:vc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};lg=new WeakMap,fl=new WeakMap,xr=new WeakMap,cg=new WeakMap,ro=new WeakSet,w1=async function(t,e){var r,o;const i=t.firstChild||t,s=i.id=`${yw}${e}`,a=await((r=c(this,cg))==null?void 0:r.getAriaAttributes(s));if(a)for(const[l,u]of a)i.setAttribute(l,u);this.div.append(t),(o=c(this,lg))==null||o.moveElementInDOM(this.div,t,i,!1)},S1=function(){var e;if(!c(this,fl))return;const t=this.div;for(const[i,s]of c(this,fl)){const a=t.querySelector(`[data-annotation-id="${i}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:r}=a;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):a.append(s);const o=c(this,xr).get(i);o&&(o._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,a.id,s),o._hasNoCanvas=!1):o.canvas=s)}c(this,fl).clear()};let A1=kw;const Dp=/\r\n?|\n/g;var Bi,qn,ug,gl,Xn,ve,uR,hR,dR,fm,La,gm,pm,fR,x1,gR;const Ut=class Ut extends Qt{constructor(e){super({...e,name:"freeTextEditor"});_(this,ve);_(this,Bi);_(this,qn,"");_(this,ug,`${this.id}-editor`);_(this,gl,null);_(this,Xn);v(this,Bi,e.color||Ut._defaultColor||Qt._defaultLineColor),v(this,Xn,e.fontSize||Ut._defaultFontSize)}static get _keyboardManager(){const e=Ut.prototype,i=r=>r.isEmpty(),s=Wl.TRANSLATE_SMALL,a=Wl.TRANSLATE_BIG;return At(this,"_keyboardManager",new Qg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(e,i){Qt.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case wt.FREETEXT_SIZE:Ut._defaultFontSize=i;break;case wt.FREETEXT_COLOR:Ut._defaultColor=i;break}}updateParams(e,i){switch(e){case wt.FREETEXT_SIZE:x(this,ve,uR).call(this,i);break;case wt.FREETEXT_COLOR:x(this,ve,hR).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[wt.FREETEXT_SIZE,Ut._defaultFontSize],[wt.FREETEXT_COLOR,Ut._defaultColor||Qt._defaultLineColor]]}get propertiesToUpdate(){return[[wt.FREETEXT_SIZE,c(this,Xn)],[wt.FREETEXT_COLOR,c(this,Bi)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ut._internalPadding*e,-(Ut._internalPadding+c(this,Xn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ct.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,gl,new AbortController);const e=this._uiManager.combinedSignal(c(this,gl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,ug)),this._isDraggable=!0,(e=c(this,gl))==null||e.abort(),v(this,gl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,qn),i=v(this,qn,x(this,ve,dR).call(this).trimEnd());if(e===i)return;const s=a=>{if(v(this,qn,a),!a){this.remove();return}x(this,ve,pm).call(this),this._uiManager.rebuild(this),x(this,ve,fm).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),x(this,ve,fm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ut._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,ug)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,Xn)}px * var(--total-scale-factor))`,s.color=c(this,Bi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Sw(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[a,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,g]=this.pageTranslation;let b,m;switch(this.rotation){case 0:b=e+(o[0]-f)/h,m=i+this.height-(o[1]-g)/d;break;case 90:b=e+(o[0]-f)/h,m=i-(o[1]-g)/d,[l,u]=[u,-l];break;case 180:b=e-this.width+(o[0]-f)/h,m=i-(o[1]-g)/d,[l,u]=[-l,-u];break;case 270:b=e+(o[0]-f-this.height*d)/h,m=i+(o[1]-g-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(b*a,m*r,l,u)}else this._moveAfterPaste(e,i);x(this,ve,pm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,m,S;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const a=x(b=Ut,La,x1).call(b,i.getData("text")||"").replaceAll(Dp,`
`);if(!a)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:l,startOffset:u}=o,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const p=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(Dp,"")),p!==this.editorDiv){let y=h;for(const A of this.editorDiv.childNodes){if(A===p){y=d;continue}y.push(x(m=Ut,La,gm).call(m,A))}}h.push(l.nodeValue.slice(0,u).replaceAll(Dp,""))}else if(l===this.editorDiv){let p=h,y=0;for(const A of this.editorDiv.childNodes)y++===u&&(p=d),p.push(x(S=Ut,La,gm).call(S,A))}v(this,qn,`${h.join(`
`)}${a}${d.join(`
`)}`),x(this,ve,pm).call(this);const f=new Range;let g=Math.sumPrecise(h.map(p=>p.length));for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const y=p.nodeValue.length;if(g<=y){f.setStart(p,g),f.setEnd(p,g);break}g-=y}r.removeAllRanges(),r.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,s){var o;let a=null;if(e instanceof rR){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:g},textContent:b,textPosition:m,parent:{page:{pageNumber:S}}}=e;if(!b||b.length===0)return null;a=e={annotationType:ct.FREETEXT,color:Array.from(u),fontSize:l,value:b.join(`
`),position:m,pageIndex:S-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:g}}const r=await super.deserialize(e,i,s);return v(r,Xn,e.fontSize),v(r,Bi,et.makeHexColor(...e.color)),v(r,qn,x(o=Ut,La,x1).call(o,e.value)),r.annotationElementId=e.id||null,r._initialData=a,r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ut._internalPadding*this.parentScale,s=this.getRect(i,i),a=Qt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Bi)),r={annotationType:ct.FREETEXT,color:a,fontSize:c(this,Xn),value:x(this,ve,fR).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(r.isCopy=!0,r):this.annotationElementId&&!x(this,ve,gR).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${c(this,Xn)}px * var(--total-scale-factor))`,s.color=c(this,Bi),i.replaceChildren();for(const r of c(this,qn).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}const a=Ut._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:c(this,qn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Bi=new WeakMap,qn=new WeakMap,ug=new WeakMap,gl=new WeakMap,Xn=new WeakMap,ve=new WeakSet,uR=function(e){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-c(this,Xn))*this.parentScale),v(this,Xn,a),x(this,ve,fm).call(this)},s=c(this,Xn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},hR=function(e){const i=a=>{v(this,Bi,this.editorDiv.style.color=a)},s=c(this,Bi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},dR=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(x(s=Ut,La,gm).call(s,a)),i=a);return e.join(`
`)},fm=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:r}=this,o=r.style.display,l=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",a.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},La=new WeakSet,gm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Dp,"")},pm=function(){if(this.editorDiv.replaceChildren(),!!c(this,qn))for(const e of c(this,qn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},fR=function(){return c(this,qn).replaceAll(""," ")},x1=function(e){return e.replaceAll(" ","")},gR=function(e){const{value:i,fontSize:s,color:a,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((o,l)=>o!==a[l])||e.pageIndex!==r},_(Ut,La),J(Ut,"_freeTextDefaultContent",""),J(Ut,"_internalPadding",0),J(Ut,"_defaultColor",null),J(Ut,"_defaultFontSize",10),J(Ut,"_type","freetext"),J(Ut,"_editorType",ct.FREETEXT);let _1=Ut;class Z{toSVGPath(){It("Abstract method `toSVGPath` must be implemented.")}get box(){It("Abstract getter `box` must be implemented.")}serialize(t,e){It("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,a,r){r||(r=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o]*s,r[o+1]=i+t[o+1]*a;return r}static _rescaleAndSwap(t,e,i,s,a,r){r||(r=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o+1]*s,r[o+1]=i+t[o]*a;return r}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let a=0,r=t.length;a<r;a+=2)s[a]=e+t[a],s[a+1]=i+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,a){switch(a){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,a,r){return[(t+5*i)/6,(e+5*s)/6,(5*i+a)/6,(5*s+r)/6,(i+a)/2,(s+r)/2]}}J(Z,"PRECISION",1e-4);var Yn,Fi,Fu,Uu,As,yt,pl,ml,hg,dg,ju,Gu,Er,fg,P0,H0,Me,pd,pR,mR,yR,bR,vR,AR;const qs=class qs{constructor({x:t,y:e},i,s,a,r,o=0){_(this,Me);_(this,Yn);_(this,Fi,[]);_(this,Fu);_(this,Uu);_(this,As,[]);_(this,yt,new Float32Array(18));_(this,pl);_(this,ml);_(this,hg);_(this,dg);_(this,ju);_(this,Gu);_(this,Er,[]);v(this,Yn,i),v(this,Gu,a*s),v(this,Uu,r),c(this,yt).set([NaN,NaN,NaN,NaN,t,e],6),v(this,Fu,o),v(this,dg,c(qs,fg)*s),v(this,hg,c(qs,H0)*s),v(this,ju,s),c(this,Er).push(t,e)}isEmpty(){return isNaN(c(this,yt)[8])}add({x:t,y:e}){var k;v(this,pl,t),v(this,ml,e);const[i,s,a,r]=c(this,Yn);let[o,l,u,h]=c(this,yt).subarray(8,12);const d=t-u,f=e-h,g=Math.hypot(d,f);if(g<c(this,hg))return!1;const b=g-c(this,dg),m=b/g,S=m*d,p=m*f;let y=o,A=l;o=u,l=h,u+=S,h+=p,(k=c(this,Er))==null||k.push(t,e);const w=-p/b,T=S/b,C=w*c(this,Gu),M=T*c(this,Gu);return c(this,yt).set(c(this,yt).subarray(2,8),0),c(this,yt).set([u+C,h+M],4),c(this,yt).set(c(this,yt).subarray(14,18),12),c(this,yt).set([u-C,h-M],16),isNaN(c(this,yt)[6])?(c(this,As).length===0&&(c(this,yt).set([o+C,l+M],2),c(this,As).push(NaN,NaN,NaN,NaN,(o+C-i)/a,(l+M-s)/r),c(this,yt).set([o-C,l-M],14),c(this,Fi).push(NaN,NaN,NaN,NaN,(o-C-i)/a,(l-M-s)/r)),c(this,yt).set([y,A,o,l,u,h],6),!this.isEmpty()):(c(this,yt).set([y,A,o,l,u,h],6),Math.abs(Math.atan2(A-l,y-o)-Math.atan2(p,S))<Math.PI/2?([o,l,u,h]=c(this,yt).subarray(2,6),c(this,As).push(NaN,NaN,NaN,NaN,((o+u)/2-i)/a,((l+h)/2-s)/r),[o,l,y,A]=c(this,yt).subarray(14,18),c(this,Fi).push(NaN,NaN,NaN,NaN,((y+o)/2-i)/a,((A+l)/2-s)/r),!0):([y,A,o,l,u,h]=c(this,yt).subarray(0,6),c(this,As).push(((y+5*o)/6-i)/a,((A+5*l)/6-s)/r,((5*o+u)/6-i)/a,((5*l+h)/6-s)/r,((o+u)/2-i)/a,((l+h)/2-s)/r),[u,h,o,l,y,A]=c(this,yt).subarray(12,18),c(this,Fi).push(((y+5*o)/6-i)/a,((A+5*l)/6-s)/r,((5*o+u)/6-i)/a,((5*l+h)/6-s)/r,((o+u)/2-i)/a,((l+h)/2-s)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,As),e=c(this,Fi);if(isNaN(c(this,yt)[6])&&!this.isEmpty())return x(this,Me,pR).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);x(this,Me,yR).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return x(this,Me,mR).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,a,r){return new wR(t,e,i,s,a,r)}getOutlines(){var d;const t=c(this,As),e=c(this,Fi),i=c(this,yt),[s,a,r,o]=c(this,Yn),l=new Float32Array((((d=c(this,Er))==null?void 0:d.length)??0)+2);for(let f=0,g=l.length-2;f<g;f+=2)l[f]=(c(this,Er)[f]-s)/r,l[f+1]=(c(this,Er)[f+1]-a)/o;if(l[l.length-2]=(c(this,pl)-s)/r,l[l.length-1]=(c(this,ml)-a)/o,isNaN(i[6])&&!this.isEmpty())return x(this,Me,bR).call(this,l);const u=new Float32Array(c(this,As).length+24+c(this,Fi).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=x(this,Me,AR).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+g],u[h+1]=e[f+g+1],h+=2}return x(this,Me,vR).call(this,u,h),this.newFreeDrawOutline(u,l,c(this,Yn),c(this,ju),c(this,Fu),c(this,Uu))}};Yn=new WeakMap,Fi=new WeakMap,Fu=new WeakMap,Uu=new WeakMap,As=new WeakMap,yt=new WeakMap,pl=new WeakMap,ml=new WeakMap,hg=new WeakMap,dg=new WeakMap,ju=new WeakMap,Gu=new WeakMap,Er=new WeakMap,fg=new WeakMap,P0=new WeakMap,H0=new WeakMap,Me=new WeakSet,pd=function(){const t=c(this,yt).subarray(4,6),e=c(this,yt).subarray(16,18),[i,s,a,r]=c(this,Yn);return[(c(this,pl)+(t[0]-e[0])/2-i)/a,(c(this,ml)+(t[1]-e[1])/2-s)/r,(c(this,pl)+(e[0]-t[0])/2-i)/a,(c(this,ml)+(e[1]-t[1])/2-s)/r]},pR=function(){const[t,e,i,s]=c(this,Yn),[a,r,o,l]=x(this,Me,pd).call(this);return`M${(c(this,yt)[2]-t)/i} ${(c(this,yt)[3]-e)/s} L${(c(this,yt)[4]-t)/i} ${(c(this,yt)[5]-e)/s} L${a} ${r} L${o} ${l} L${(c(this,yt)[16]-t)/i} ${(c(this,yt)[17]-e)/s} L${(c(this,yt)[14]-t)/i} ${(c(this,yt)[15]-e)/s} Z`},mR=function(t){const e=c(this,Fi);t.push(`L${e[4]} ${e[5]} Z`)},yR=function(t){const[e,i,s,a]=c(this,Yn),r=c(this,yt).subarray(4,6),o=c(this,yt).subarray(16,18),[l,u,h,d]=x(this,Me,pd).call(this);t.push(`L${(r[0]-e)/s} ${(r[1]-i)/a} L${l} ${u} L${h} ${d} L${(o[0]-e)/s} ${(o[1]-i)/a}`)},bR=function(t){const e=c(this,yt),[i,s,a,r]=c(this,Yn),[o,l,u,h]=x(this,Me,pd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-s)/r,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-s)/r,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-s)/r,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-s)/r],0),this.newFreeDrawOutline(d,t,c(this,Yn),c(this,ju),c(this,Fu),c(this,Uu))},vR=function(t,e){const i=c(this,Fi);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},AR=function(t,e){const i=c(this,yt).subarray(4,6),s=c(this,yt).subarray(16,18),[a,r,o,l]=c(this,Yn),[u,h,d,f]=x(this,Me,pd).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-r)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-a)/o,(s[1]-r)/l],e),e+=24},_(qs,fg,8),_(qs,P0,2),_(qs,H0,c(qs,fg)+c(qs,P0));let b0=qs;var Vu,yl,da,gg,Kn,pg,ue,I0,SR;class wR extends Z{constructor(e,i,s,a,r,o){super();_(this,I0);_(this,Vu);_(this,yl,new Float32Array(4));_(this,da);_(this,gg);_(this,Kn);_(this,pg);_(this,ue);v(this,ue,e),v(this,Kn,i),v(this,Vu,s),v(this,pg,a),v(this,da,r),v(this,gg,o),this.lastPoint=[NaN,NaN],x(this,I0,SR).call(this,o);const[l,u,h,d]=c(this,yl);for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-l)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,g=i.length;f<g;f+=2)i[f]=(i[f]-l)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${c(this,ue)[4]} ${c(this,ue)[5]}`];for(let i=6,s=c(this,ue).length;i<s;i+=6){if(isNaN(c(this,ue)[i])){e.push(`L${c(this,ue)[i+4]} ${c(this,ue)[i+5]}`);continue}e.push(`C${c(this,ue)[i]} ${c(this,ue)[i+1]} ${c(this,ue)[i+2]} ${c(this,ue)[i+3]} ${c(this,ue)[i+4]} ${c(this,ue)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,a],r){const o=s-e,l=a-i;let u,h;switch(r){case 0:u=Z._rescale(c(this,ue),e,a,o,-l),h=Z._rescale(c(this,Kn),e,a,o,-l);break;case 90:u=Z._rescaleAndSwap(c(this,ue),e,i,o,l),h=Z._rescaleAndSwap(c(this,Kn),e,i,o,l);break;case 180:u=Z._rescale(c(this,ue),s,i,-o,l),h=Z._rescale(c(this,Kn),s,i,-o,l);break;case 270:u=Z._rescaleAndSwap(c(this,ue),s,a,-o,-l),h=Z._rescaleAndSwap(c(this,Kn),s,a,-o,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,yl)}newOutliner(e,i,s,a,r,o=0){return new b0(e,i,s,a,r,o)}getNewOutline(e,i){const[s,a,r,o]=c(this,yl),[l,u,h,d]=c(this,Vu),f=r*h,g=o*d,b=s*h+l,m=a*d+u,S=this.newOutliner({x:c(this,Kn)[0]*f+b,y:c(this,Kn)[1]*g+m},c(this,Vu),c(this,pg),e,c(this,gg),i??c(this,da));for(let p=2;p<c(this,Kn).length;p+=2)S.add({x:c(this,Kn)[p]*f+b,y:c(this,Kn)[p+1]*g+m});return S.getOutlines()}}Vu=new WeakMap,yl=new WeakMap,da=new WeakMap,gg=new WeakMap,Kn=new WeakMap,pg=new WeakMap,ue=new WeakMap,I0=new WeakSet,SR=function(e){const i=c(this,ue);let s=i[4],a=i[5];const r=[s,a,s,a];let o=s,l=a;const u=e?Math.max:Math.min;for(let d=6,f=i.length;d<f;d+=6){const g=i[d+4],b=i[d+5];if(isNaN(i[d]))et.pointBoundingBox(g,b,r),l<b?(o=g,l=b):l===b&&(o=u(o,g));else{const m=[1/0,1/0,-1/0,-1/0];et.bezierBoundingBox(s,a,...i.slice(d,d+6),m),et.rectBoundingBox(...m,r),l<m[3]?(o=m[2],l=m[3]):l===m[3]&&(o=u(o,m[2]))}s=g,a=b}const h=c(this,yl);h[0]=r[0]-c(this,da),h[1]=r[1]-c(this,da),h[2]=r[2]-r[0]+2*c(this,da),h[3]=r[3]-r[1]+2*c(this,da),this.lastPoint=[o,l]};var mg,yg,Tr,Ui,wn,_R,mm,xR,ER,T1;class E1{constructor(t,e=0,i=0,s=!0){_(this,wn);_(this,mg);_(this,yg);_(this,Tr,[]);_(this,Ui,[]);const a=[1/0,1/0,-1/0,-1/0],r=10**-4;for(const{x:g,y:b,width:m,height:S}of t){const p=Math.floor((g-e)/r)*r,y=Math.ceil((g+m+e)/r)*r,A=Math.floor((b-e)/r)*r,w=Math.ceil((b+S+e)/r)*r,T=[p,A,w,!0],C=[y,A,w,!1];c(this,Tr).push(T,C),et.rectBoundingBox(p,A,y,w,a)}const o=a[2]-a[0]+2*i,l=a[3]-a[1]+2*i,u=a[0]-i,h=a[1]-i,d=c(this,Tr).at(s?-1:-2),f=[d[0],d[2]];for(const g of c(this,Tr)){const[b,m,S]=g;g[0]=(b-u)/o,g[1]=(m-h)/l,g[2]=(S-h)/l}v(this,mg,new Float32Array([u,h,o,l])),v(this,yg,f)}getOutlines(){c(this,Tr).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of c(this,Tr))e[3]?(t.push(...x(this,wn,T1).call(this,e)),x(this,wn,xR).call(this,e)):(x(this,wn,ER).call(this,e),t.push(...x(this,wn,T1).call(this,e)));return x(this,wn,_R).call(this,t)}}mg=new WeakMap,yg=new WeakMap,Tr=new WeakMap,Ui=new WeakMap,wn=new WeakSet,_R=function(t){const e=[],i=new Set;for(const r of t){const[o,l,u]=r;e.push([o,l,r],[o,u,r])}e.sort((r,o)=>r[1]-o[1]||r[0]-o[0]);for(let r=0,o=e.length;r<o;r+=2){const l=e[r][2],u=e[r+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const s=[];let a;for(;i.size>0;){const r=i.values().next().value;let[o,l,u,h,d]=r;i.delete(r);let f=o,g=l;for(a=[o,u],s.push(a);;){let b;if(i.has(h))b=h;else if(i.has(d))b=d;else break;i.delete(b),[o,l,u,h,d]=b,f!==o&&(a.push(f,g,o,g===l?l:u),f=o),g=g===l?u:l}a.push(f,g)}return new uH(s,c(this,mg),c(this,yg))},mm=function(t){const e=c(this,Ui);let i=0,s=e.length-1;for(;i<=s;){const a=i+s>>1,r=e[a][0];if(r===t)return a;r<t?i=a+1:s=a-1}return s+1},xR=function([,t,e]){const i=x(this,wn,mm).call(this,t);c(this,Ui).splice(i,0,[t,e])},ER=function([,t,e]){const i=x(this,wn,mm).call(this,t);for(let s=i;s<c(this,Ui).length;s++){const[a,r]=c(this,Ui)[s];if(a!==t)break;if(a===t&&r===e){c(this,Ui).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[a,r]=c(this,Ui)[s];if(a!==t)break;if(a===t&&r===e){c(this,Ui).splice(s,1);return}}},T1=function(t){const[e,i,s]=t,a=[[e,i,s]],r=x(this,wn,mm).call(this,s);for(let o=0;o<r;o++){const[l,u]=c(this,Ui)[o];for(let h=0,d=a.length;h<d;h++){const[,f,g]=a[h];if(!(u<=f||g<=l)){if(f>=l){if(g>u)a[h][1]=u;else{if(d===1)return[];a.splice(h,1),h--,d--}continue}a[h][2]=l,g>u&&a.push([e,u,g])}}}return a};var bg,$u;class uH extends Z{constructor(e,i,s){super();_(this,bg);_(this,$u);v(this,$u,e),v(this,bg,i),this.lastPoint=s}toSVGPath(){const e=[];for(const i of c(this,$u)){let[s,a]=i;e.push(`M${s} ${a}`);for(let r=2;r<i.length;r+=2){const o=i[r],l=i[r+1];o===s?(e.push(`V${l}`),a=l):l===a&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,i,s,a],r){const o=[],l=s-e,u=a-i;for(const h of c(this,$u)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*l,d[f+1]=a-h[f+1]*u;o.push(d)}return o}get box(){return c(this,bg)}get classNamesForOutlining(){return["highlightOutline"]}}bg=new WeakMap,$u=new WeakMap;class C1 extends b0{newFreeDrawOutline(t,e,i,s,a,r){return new hH(t,e,i,s,a,r)}}class hH extends wR{newOutliner(t,e,i,s,a,r=0){return new C1(t,e,i,s,a,r)}}var ji,bl,qu,Ee,vg,Xu,Ag,wg,Cr,Gi,Yu,Sg,Ht,M1,R1,N1,_o,TR,qa;const Cn=class Cn{constructor({editor:t=null,uiManager:e=null}){_(this,Ht);_(this,ji,null);_(this,bl,null);_(this,qu);_(this,Ee,null);_(this,vg,!1);_(this,Xu,!1);_(this,Ag,null);_(this,wg);_(this,Cr,null);_(this,Gi,null);_(this,Yu);var i;t?(v(this,Xu,!1),v(this,Yu,wt.HIGHLIGHT_COLOR),v(this,Ag,t)):(v(this,Xu,!0),v(this,Yu,wt.HIGHLIGHT_DEFAULT_COLOR)),v(this,Gi,(t==null?void 0:t._uiManager)||e),v(this,wg,c(this,Gi)._eventBus),v(this,qu,(t==null?void 0:t.color)||((i=c(this,Gi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),c(Cn,Sg)||v(Cn,Sg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return At(this,"_keyboardManager",new Qg([[["Escape","mac+Escape"],Cn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Cn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Cn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Cn.prototype._moveToPrevious],[["Home","mac+Home"],Cn.prototype._moveToBeginning],[["End","mac+End"],Cn.prototype._moveToEnd]]))}renderButton(){const t=v(this,ji,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Gi)._signal;t.addEventListener("click",x(this,Ht,_o).bind(this),{signal:e}),t.addEventListener("keydown",x(this,Ht,N1).bind(this),{signal:e});const i=v(this,bl,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=c(this,qu),t.append(i),t}renderMainDropdown(){const t=v(this,Ee,x(this,Ht,M1).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,ji)){x(this,Ht,_o).call(this,t);return}const e=t.target.getAttribute("data-color");e&&x(this,Ht,R1).call(this,e,t)}_moveToNext(t){var e,i;if(!c(this,Ht,qa)){x(this,Ht,_o).call(this,t);return}if(t.target===c(this,ji)){(e=c(this,Ee).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=c(this,Ee))==null?void 0:e.firstChild)||t.target===c(this,ji)){c(this,Ht,qa)&&this._hideDropdownFromKeyboard();return}c(this,Ht,qa)||x(this,Ht,_o).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!c(this,Ht,qa)){x(this,Ht,_o).call(this,t);return}(e=c(this,Ee).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,Ht,qa)){x(this,Ht,_o).call(this,t);return}(e=c(this,Ee).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,Ee))==null||t.classList.add("hidden"),(e=c(this,Cr))==null||e.abort(),v(this,Cr,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Xu)){if(!c(this,Ht,qa)){(t=c(this,Ag))==null||t.unselect();return}this.hideDropdown(),c(this,ji).focus({preventScroll:!0,focusVisible:c(this,vg)})}}updateColor(t){if(c(this,bl)&&(c(this,bl).style.backgroundColor=t),!c(this,Ee))return;const e=c(this,Gi).highlightColors.values();for(const i of c(this,Ee).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,ji))==null||t.remove(),v(this,ji,null),v(this,bl,null),(e=c(this,Ee))==null||e.remove(),v(this,Ee,null)}};ji=new WeakMap,bl=new WeakMap,qu=new WeakMap,Ee=new WeakMap,vg=new WeakMap,Xu=new WeakMap,Ag=new WeakMap,wg=new WeakMap,Cr=new WeakMap,Gi=new WeakMap,Yu=new WeakMap,Sg=new WeakMap,Ht=new WeakSet,M1=function(){const t=document.createElement("div"),e=c(this,Gi)._signal;t.addEventListener("contextmenu",Ji,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of c(this,Gi).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=i,a.setAttribute("data-l10n-id",c(Cn,Sg)[i]);const r=document.createElement("span");a.append(r),r.className="swatch",r.style.backgroundColor=s,a.setAttribute("aria-selected",s===c(this,qu)),a.addEventListener("click",x(this,Ht,R1).bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",x(this,Ht,N1).bind(this),{signal:e}),t},R1=function(t,e){e.stopPropagation(),c(this,wg).dispatch("switchannotationeditorparams",{source:this,type:c(this,Yu),value:t})},N1=function(t){Cn._keyboardManager.exec(this,t)},_o=function(t){if(c(this,Ht,qa)){this.hideDropdown();return}if(v(this,vg,t.detail===0),c(this,Cr)||(v(this,Cr,new AbortController),window.addEventListener("pointerdown",x(this,Ht,TR).bind(this),{signal:c(this,Gi).combinedSignal(c(this,Cr))})),c(this,Ee)){c(this,Ee).classList.remove("hidden");return}const e=v(this,Ee,x(this,Ht,M1).call(this));c(this,ji).append(e)},TR=function(t){var e;(e=c(this,Ee))!=null&&e.contains(t.target)||this.hideDropdown()},qa=function(){return c(this,Ee)&&!c(this,Ee).classList.contains("hidden")},_(Cn,Sg,null);let v0=Cn;var Ku,_g,fa,vl,Wu,Nn,xg,Eg,Al,yi,Wn,Ve,Zu,ga,rn,Qu,bi,Tg,dt,D1,ym,CR,MR,RR,L1,xo,Ci,Ec,NR,bm,md,DR,LR,kR,OR,zR;const Tt=class Tt extends Qt{constructor(e){super({...e,name:"highlightEditor"});_(this,dt);_(this,Ku,null);_(this,_g,0);_(this,fa);_(this,vl,null);_(this,Wu,null);_(this,Nn,null);_(this,xg,null);_(this,Eg,0);_(this,Al,null);_(this,yi,null);_(this,Wn,null);_(this,Ve,!1);_(this,Zu,null);_(this,ga);_(this,rn,null);_(this,Qu,"");_(this,bi);_(this,Tg,"");this.color=e.color||Tt._defaultColor,v(this,bi,e.thickness||Tt._defaultThickness),v(this,ga,e.opacity||Tt._defaultOpacity),v(this,fa,e.boxes||null),v(this,Tg,e.methodOfCreation||""),v(this,Qu,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(v(this,Ve,!0),x(this,dt,ym).call(this,e),x(this,dt,xo).call(this)):c(this,fa)&&(v(this,Ku,e.anchorNode),v(this,_g,e.anchorOffset),v(this,xg,e.focusNode),v(this,Eg,e.focusOffset),x(this,dt,D1).call(this),x(this,dt,xo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Tt.prototype;return At(this,"_keyboardManager",new Qg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Ve)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,bi),methodOfCreation:c(this,Tg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;Qt.initialize(e,i),Tt._defaultColor||(Tt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case wt.HIGHLIGHT_DEFAULT_COLOR:Tt._defaultColor=i;break;case wt.HIGHLIGHT_THICKNESS:Tt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return c(this,Zu)}updateParams(e,i){switch(e){case wt.HIGHLIGHT_COLOR:x(this,dt,CR).call(this,i);break;case wt.HIGHLIGHT_THICKNESS:x(this,dt,MR).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[wt.HIGHLIGHT_DEFAULT_COLOR,Tt._defaultColor],[wt.HIGHLIGHT_THICKNESS,Tt._defaultThickness]]}get propertiesToUpdate(){return[[wt.HIGHLIGHT_COLOR,this.color||Tt._defaultColor],[wt.HIGHLIGHT_THICKNESS,c(this,bi)||Tt._defaultThickness],[wt.HIGHLIGHT_FREE,c(this,Ve)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(v(this,Wu,new v0({editor:this})),e.addColorPicker(c(this,Wu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,dt,md).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,x(this,dt,md).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){x(this,dt,L1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,dt,xo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?x(this,dt,L1).call(this):e&&(x(this,dt,xo).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var a,r,o;const{drawLayer:i}=this.parent;let s;c(this,Ve)?(e=(e-this.rotation+360)%360,s=x(a=Tt,Ci,Ec).call(a,c(this,yi).box,e)):s=x(r=Tt,Ci,Ec).call(r,[this.x,this.y,this.width,this.height],e),i.updateProperties(c(this,Wn),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(c(this,rn),{bbox:x(o=Tt,Ci,Ec).call(o,c(this,Nn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,Qu)&&(e.setAttribute("aria-label",c(this,Qu)),e.setAttribute("role","mark")),c(this,Ve)?e.classList.add("free"):this.div.addEventListener("keydown",x(this,dt,NR).bind(this),{signal:this._uiManager._signal});const i=v(this,Al,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,vl);const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),Sw(this,c(this,Al),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,rn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,rn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:x(this,dt,bm).call(this,!0);break;case 1:case 3:x(this,dt,bm).call(this,!1);break}}select(){var e;super.select(),c(this,rn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,rn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,rn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,rn),{rootClass:{selected:!1}}),c(this,Ve)||x(this,dt,bm).call(this,!1))}get _mustFixPosition(){return!c(this,Ve)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Wn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,rn),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:a,y:r}){const{x:o,y:l,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),g=b=>{d.abort(),x(this,Ci,OR).call(this,e,b)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",me,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ji,{signal:f}),s.addEventListener("pointermove",x(this,Ci,kR).bind(this,e),{signal:f}),this._freeHighlight=new C1({x:a,y:r},[o,l,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var m,S,p,y;let a=null;if(e instanceof lR){const{data:{quadPoints:A,rect:w,rotation:T,id:C,color:M,opacity:L,popupRef:k},parent:{page:{pageNumber:P}}}=e;a=e={annotationType:ct.HIGHLIGHT,color:Array.from(M),opacity:L,quadPoints:A,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:T,id:C,deleted:!1,popupRef:k}}else if(e instanceof Tw){const{data:{inkLists:A,rect:w,rotation:T,id:C,color:M,borderStyle:{rawWidth:L},popupRef:k},parent:{page:{pageNumber:P}}}=e;a=e={annotationType:ct.HIGHLIGHT,color:Array.from(M),thickness:L,inkLists:A,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:T,id:C,deleted:!1,popupRef:k}}const{color:r,quadPoints:o,inkLists:l,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=et.makeHexColor(...r),v(h,ga,u||1),l&&v(h,bi,e.thickness),h.annotationElementId=e.id||null,h._initialData=a;const[d,f]=h.pageDimensions,[g,b]=h.pageTranslation;if(o){const A=v(h,fa,[]);for(let w=0;w<o.length;w+=8)A.push({x:(o[w]-g)/d,y:1-(o[w+1]-b)/f,width:(o[w+2]-o[w])/d,height:(o[w+1]-o[w+5])/f});x(m=h,dt,D1).call(m),x(S=h,dt,xo).call(S),h.rotate(h.rotation)}else if(l){v(h,Ve,!0);const A=l[0],w={x:A[0]-g,y:f-(A[1]-b)},T=new C1(w,[0,0,d,f],1,c(h,bi)/2,!0,.001);for(let L=0,k=A.length;L<k;L+=2)w.x=A[L]-g,w.y=f-(A[L+1]-b),T.add(w);const{id:C,clipPathId:M}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);x(p=h,dt,ym).call(p,{highlightOutlines:T.getOutlines(),highlightId:C,clipPathId:M}),x(y=h,dt,xo).call(y),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=Qt._colorManager.convert(this.color),a={annotationType:ct.HIGHLIGHT,color:s,opacity:c(this,ga),thickness:c(this,bi),quadPoints:x(this,dt,DR).call(this),outlines:x(this,dt,LR).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:x(this,dt,md).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,dt,zR).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ku=new WeakMap,_g=new WeakMap,fa=new WeakMap,vl=new WeakMap,Wu=new WeakMap,Nn=new WeakMap,xg=new WeakMap,Eg=new WeakMap,Al=new WeakMap,yi=new WeakMap,Wn=new WeakMap,Ve=new WeakMap,Zu=new WeakMap,ga=new WeakMap,rn=new WeakMap,Qu=new WeakMap,bi=new WeakMap,Tg=new WeakMap,dt=new WeakSet,D1=function(){const e=new E1(c(this,fa),.001);v(this,yi,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,yi).box;const i=new E1(c(this,fa),.0025,.001,this._uiManager.direction==="ltr");v(this,Nn,i.getOutlines());const{lastPoint:s}=c(this,Nn);v(this,Zu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},ym=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var d,f;if(v(this,yi,e),v(this,Nn,e.getNewOutline(c(this,bi)/2+1.5,.0025)),i>=0)v(this,Wn,i),v(this,vl,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),v(this,rn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Nn).box,path:{d:c(this,Nn).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Wn),{bbox:x(d=Tt,Ci,Ec).call(d,c(this,yi).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,rn),{bbox:x(f=Tt,Ci,Ec).call(f,c(this,Nn).box,g),path:{d:c(this,Nn).toSVGPath()}})}const[r,o,l,u]=e.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=l,this.height=u;break;case 90:{const[g,b]=this.parentDimensions;this.x=o,this.y=1-r,this.width=l*b/g,this.height=u*g/b;break}case 180:this.x=1-r,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[g,b]=this.parentDimensions;this.x=1-o,this.y=r,this.width=l*b/g,this.height=u*g/b;break}}const{lastPoint:h}=c(this,Nn);v(this,Zu,[(h[0]-r)/l,(h[1]-o)/u])},CR=function(e){const i=(r,o)=>{var l,u;this.color=r,v(this,ga,o),(l=this.parent)==null||l.drawLayer.updateProperties(c(this,Wn),{root:{fill:r,"fill-opacity":o}}),(u=c(this,Wu))==null||u.updateColor(r)},s=this.color,a=c(this,ga);this.addCommands({cmd:i.bind(this,e,Tt._defaultOpacity),undo:i.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},MR=function(e){const i=c(this,bi),s=a=>{v(this,bi,a),x(this,dt,RR).call(this,a)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},RR=function(e){if(!c(this,Ve))return;x(this,dt,ym).call(this,{highlightOutlines:c(this,yi).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},L1=function(){c(this,Wn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Wn)),v(this,Wn,null),this.parent.drawLayer.remove(c(this,rn)),v(this,rn,null))},xo=function(e=this.parent){c(this,Wn)===null&&({id:dn(this,Wn)._,clipPathId:dn(this,vl)._}=e.drawLayer.draw({bbox:c(this,yi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,ga)},rootClass:{highlight:!0,free:c(this,Ve)},path:{d:c(this,yi).toSVGPath()}},!1,!0),v(this,rn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Ve)},bbox:c(this,Nn).box,path:{d:c(this,Nn).toSVGPath()}},c(this,Ve))),c(this,Al)&&(c(this,Al).style.clipPath=c(this,vl)))},Ci=new WeakSet,Ec=function([e,i,s,a],r){switch(r){case 90:return[1-i-a,e,a,s];case 180:return[1-e-s,1-i-a,s,a];case 270:return[i,1-e-s,a,s]}return[e,i,s,a]},NR=function(e){Tt._keyboardManager.exec(this,e)},bm=function(e){if(!c(this,Ku))return;const i=window.getSelection();e?i.setPosition(c(this,Ku),c(this,_g)):i.setPosition(c(this,xg),c(this,Eg))},md=function(){return c(this,Ve)?this.rotation:0},DR=function(){if(c(this,Ve))return null;const[e,i]=this.pageDimensions,[s,a]=this.pageTranslation,r=c(this,fa),o=new Float32Array(r.length*8);let l=0;for(const{x:u,y:h,width:d,height:f}of r){const g=u*e+s,b=(1-h)*i+a;o[l]=o[l+4]=g,o[l+1]=o[l+3]=b,o[l+2]=o[l+6]=g+d*e,o[l+5]=o[l+7]=b-f*i,l+=8}return o},LR=function(e){return c(this,yi).serialize(e,x(this,dt,md).call(this))},kR=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},OR=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},zR=function(e){const{color:i}=this._initialData;return e.color.some((s,a)=>s!==i[a])},_(Tt,Ci),J(Tt,"_defaultColor",null),J(Tt,"_defaultOpacity",1),J(Tt,"_defaultThickness",12),J(Tt,"_type","highlight"),J(Tt,"_editorType",ct.HIGHLIGHT),J(Tt,"_freeHighlightId",-1),J(Tt,"_freeHighlight",null),J(Tt,"_freeHighlightClipId","");let A0=Tt;var wl;class PR{constructor(){_(this,wl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){c(this,wl)[t]=e}toSVGProperties(){const t=c(this,wl);return v(this,wl,Object.create(null)),{root:t}}reset(){v(this,wl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){It("Not implemented")}}wl=new WeakMap;var Zn,Ju,ke,Sl,_l,Mr,Rr,Nr,xl,_t,k1,O1,z1,yd,HR,vm,bd,Tc;const Q=class Q extends Qt{constructor(e){super(e);_(this,_t);_(this,Zn,null);_(this,Ju);J(this,"_drawId",null);v(this,Ju,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(x(this,_t,k1).call(this,e),x(this,_t,yd).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[a,r]of Object.entries(i))s.has(a)?Object.assign(e[a],r):e[a]=r;return e}static getDefaultDrawingOptions(e){It("Not implemented")}static get typesMap(){It("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(c(Q,ke).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)e.push([s,i[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,a]of this.constructor.typesMap)e.push([s,i[a]]);return e}_updateProperty(e,i,s){const a=this._drawingOptions,r=a[i],o=l=>{var h;a.updateProperty(i,l);const u=c(this,Zn).updateProperty(i,l);u&&x(this,_t,bd).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(c(this,Zn).getPathResizingSVGProperties(x(this,_t,vm).call(this)),{bbox:x(this,_t,Tc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(c(this,Zn).getPathResizedSVGProperties(x(this,_t,vm).call(this)),{bbox:x(this,_t,Tc).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:x(this,_t,Tc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(c(this,Zn).getPathTranslatedSVGProperties(x(this,_t,vm).call(this),this.parentDimensions),{bbox:x(this,_t,Tc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Ju)&&(v(this,Ju,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){x(this,_t,z1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,_t,yd).call(this),x(this,_t,bd).call(this,c(this,Zn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),x(this,_t,z1).call(this)):e&&(this._uiManager.addShouldRescale(this),x(this,_t,yd).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties({bbox:x(this,_t,Tc).call(this)},c(this,Zn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,_t,bd).call(this,c(this,Zn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,a,r){It("Not implemented")}static startDrawing(e,i,s,a){var S;const{target:r,offsetX:o,offsetY:l,pointerId:u,pointerType:h}=a;if(c(Q,Rr)&&c(Q,Rr)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:g}=r.getBoundingClientRect(),b=v(Q,Sl,new AbortController),m=e.combinedSignal(b);if(c(Q,Mr)||v(Q,Mr,u),c(Q,Rr)??v(Q,Rr,h),window.addEventListener("pointerup",p=>{var y;c(Q,Mr)===p.pointerId?this._endDraw(p):(y=c(Q,Nr))==null||y.delete(p.pointerId)},{signal:m}),window.addEventListener("pointercancel",p=>{var y;c(Q,Mr)===p.pointerId?this._currentParent.endDrawingSession():(y=c(Q,Nr))==null||y.delete(p.pointerId)},{signal:m}),window.addEventListener("pointerdown",p=>{c(Q,Rr)===p.pointerType&&((c(Q,Nr)||v(Q,Nr,new Set)).add(p.pointerId),c(Q,ke).isCancellable()&&(c(Q,ke).removeLastElement(),c(Q,ke).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Ji,{signal:m}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),r.addEventListener("touchmove",p=>{p.timeStamp===c(Q,xl)&&me(p)},{signal:m}),e.toggleDrawing(),(S=i._editorUndoBar)==null||S.hide(),c(Q,ke)){e.drawLayer.updateProperties(this._currentDrawId,c(Q,ke).startNew(o,l,f,g,d));return}i.updateUIForDefaultProperties(this),v(Q,ke,this.createDrawerInstance(o,l,f,g,d)),v(Q,_l,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(Q,_l).toSVGProperties(),c(Q,ke).defaultSVGProperties),!0,!1)}static _drawMove(e){var r;if(v(Q,xl,-1),!c(Q,ke))return;const{offsetX:i,offsetY:s,pointerId:a}=e;if(c(Q,Mr)===a){if(((r=c(Q,Nr))==null?void 0:r.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(Q,ke).add(i,s)),v(Q,xl,e.timeStamp),me(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,v(Q,ke,null),v(Q,_l,null),v(Q,Rr,null),v(Q,xl,NaN)),c(Q,Sl)&&(c(Q,Sl).abort(),v(Q,Sl,null),v(Q,Mr,NaN),v(Q,Nr,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,c(Q,ke).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=c(Q,ke),a=this._currentDrawId,r=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(a,s.setLastElement(r))},undo:()=>{i.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:wt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(wt.DRAW_STEP),!c(Q,ke).isEmpty()){const{pageDimensions:[s,a],scale:r}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(Q,ke).getOutlines(s*r,a*r,r,this._INNER_MARGIN),drawingOptions:c(Q,_l),mustBeCommitted:!e});return this._cleanup(!0),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,a,r,o){It("Not implemented")}static async deserialize(e,i,s){var d,f;const{rawDims:{pageWidth:a,pageHeight:r,pageX:o,pageY:l}}=i.viewport,u=this.deserializeDraw(o,l,a,r,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),x(d=h,_t,k1).call(d,{drawOutlines:u}),x(f=h,_t,yd).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[a,r]=this.pageDimensions;return c(this,Zn).serialize([i,s,a,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Zn=new WeakMap,Ju=new WeakMap,ke=new WeakMap,Sl=new WeakMap,_l=new WeakMap,Mr=new WeakMap,Rr=new WeakMap,Nr=new WeakMap,xl=new WeakMap,_t=new WeakSet,k1=function({drawOutlines:e,drawId:i,drawingOptions:s}){v(this,Zn,e),this._drawingOptions||(this._drawingOptions=s),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=x(this,_t,O1).call(this,e,this.parent),x(this,_t,bd).call(this,e.box)},O1=function(e,i){const{id:s}=i.drawLayer.draw(Q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},z1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},yd=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,_t,O1).call(this,c(this,Zn),e)}},HR=function([e,i,s,a]){const{parentDimensions:[r,o],rotation:l}=this;switch(l){case 90:return[i,1-e,s*(o/r),a*(r/o)];case 180:return[1-e,1-i,s,a];case 270:return[1-i,e,s*(o/r),a*(r/o)];default:return[e,i,s,a]}},vm=function(){const{x:e,y:i,width:s,height:a,parentDimensions:[r,o],rotation:l}=this;switch(l){case 90:return[1-i,e,s*(r/o),a*(o/r)];case 180:return[1-e,1-i,s,a];case 270:return[i,1-e,s*(r/o),a*(o/r)];default:return[e,i,s,a]}},bd=function(e){if([this.x,this.y,this.width,this.height]=x(this,_t,HR).call(this,e),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},Tc=function(){const{x:e,y:i,width:s,height:a,rotation:r,parentRotation:o,parentDimensions:[l,u]}=this;switch((r*4+o)/90){case 1:return[1-i-a,e,a,s];case 2:return[1-e-s,1-i-a,s,a];case 3:return[i,1-e-s,a,s];case 4:return[e,i-s*(l/u),a*(u/l),s*(l/u)];case 5:return[1-i,e,s*(l/u),a*(u/l)];case 6:return[1-e-a*(u/l),1-i,a*(u/l),s*(l/u)];case 7:return[i-s*(l/u),1-e-a*(u/l),s*(l/u),a*(u/l)];case 8:return[e-s,i-a,s,a];case 9:return[1-i,e-s,a,s];case 10:return[1-e,1-i,s,a];case 11:return[i-a,1-e,a,s];case 12:return[e-a*(u/l),i,a*(u/l),s*(l/u)];case 13:return[1-i-s*(l/u),e-a*(u/l),s*(l/u),a*(u/l)];case 14:return[1-e,1-i-s*(l/u),a*(u/l),s*(l/u)];case 15:return[i,1-e,s*(l/u),a*(u/l)];default:return[e,i,s,a]}},J(Q,"_currentDrawId",-1),J(Q,"_currentParent",null),_(Q,ke,null),_(Q,Sl,null),_(Q,_l,null),_(Q,Mr,NaN),_(Q,Rr,null),_(Q,Nr,null),_(Q,xl,NaN),J(Q,"_INNER_MARGIN",3);let w0=Q;var ws,Oe,ze,El,th,pn,$e,vi,Tl,Cl,Ml,eh,Am;class dH{constructor(t,e,i,s,a,r){_(this,eh);_(this,ws,new Float64Array(6));_(this,Oe);_(this,ze);_(this,El);_(this,th);_(this,pn);_(this,$e,"");_(this,vi,0);_(this,Tl,new ep);_(this,Cl);_(this,Ml);v(this,Cl,i),v(this,Ml,s),v(this,El,a),v(this,th,r),[t,e]=x(this,eh,Am).call(this,t,e);const o=v(this,Oe,[NaN,NaN,NaN,NaN,t,e]);v(this,pn,[t,e]),v(this,ze,[{line:o,points:c(this,pn)}]),c(this,ws).set(o,0)}updateProperty(t,e){t==="stroke-width"&&v(this,th,e)}isEmpty(){return!c(this,ze)||c(this,ze).length===0}isCancellable(){return c(this,pn).length<=10}add(t,e){[t,e]=x(this,eh,Am).call(this,t,e);const[i,s,a,r]=c(this,ws).subarray(2,6),o=t-a,l=e-r;return Math.hypot(c(this,Cl)*o,c(this,Ml)*l)<=2?null:(c(this,pn).push(t,e),isNaN(i)?(c(this,ws).set([a,r,t,e],2),c(this,Oe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,ws)[0])&&c(this,Oe).splice(6,6),c(this,ws).set([i,s,a,r,t,e],0),c(this,Oe).push(...Z.createBezierPoints(i,s,a,r,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(c(this,pn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,a){v(this,Cl,i),v(this,Ml,s),v(this,El,a),[t,e]=x(this,eh,Am).call(this,t,e);const r=v(this,Oe,[NaN,NaN,NaN,NaN,t,e]);v(this,pn,[t,e]);const o=c(this,ze).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),c(this,ze).push({line:r,points:c(this,pn)}),c(this,ws).set(r,0),v(this,vi,0),this.toSVGPath(),null}getLastElement(){return c(this,ze).at(-1)}setLastElement(t){return c(this,ze)?(c(this,ze).push(t),v(this,Oe,t.line),v(this,pn,t.points),v(this,vi,0),{path:{d:this.toSVGPath()}}):c(this,Tl).setLastElement(t)}removeLastElement(){if(!c(this,ze))return c(this,Tl).removeLastElement();c(this,ze).pop(),v(this,$e,"");for(let t=0,e=c(this,ze).length;t<e;t++){const{line:i,points:s}=c(this,ze)[t];v(this,Oe,i),v(this,pn,s),v(this,vi,0),this.toSVGPath()}return{path:{d:c(this,$e)}}}toSVGPath(){const t=Z.svgRound(c(this,Oe)[4]),e=Z.svgRound(c(this,Oe)[5]);if(c(this,pn).length===2)return v(this,$e,`${c(this,$e)} M ${t} ${e} Z`),c(this,$e);if(c(this,pn).length<=6){const s=c(this,$e).lastIndexOf("M");v(this,$e,`${c(this,$e).slice(0,s)} M ${t} ${e}`),v(this,vi,6)}if(c(this,pn).length===4){const s=Z.svgRound(c(this,Oe)[10]),a=Z.svgRound(c(this,Oe)[11]);return v(this,$e,`${c(this,$e)} L ${s} ${a}`),v(this,vi,12),c(this,$e)}const i=[];c(this,vi)===0&&(i.push(`M ${t} ${e}`),v(this,vi,6));for(let s=c(this,vi),a=c(this,Oe).length;s<a;s+=6){const[r,o,l,u,h,d]=c(this,Oe).slice(s,s+6).map(Z.svgRound);i.push(`C${r} ${o} ${l} ${u} ${h} ${d}`)}return v(this,$e,c(this,$e)+i.join(" ")),v(this,vi,c(this,Oe).length),c(this,$e)}getOutlines(t,e,i,s){const a=c(this,ze).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),c(this,Tl).build(c(this,ze),t,e,i,c(this,El),c(this,th),s),v(this,ws,null),v(this,Oe,null),v(this,ze,null),v(this,$e,null),c(this,Tl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ws=new WeakMap,Oe=new WeakMap,ze=new WeakMap,El=new WeakMap,th=new WeakMap,pn=new WeakMap,$e=new WeakMap,vi=new WeakMap,Tl=new WeakMap,Cl=new WeakMap,Ml=new WeakMap,eh=new WeakSet,Am=function(t,e){return Z._normalizePoint(t,e,c(this,Cl),c(this,Ml),c(this,El))};var mn,Cg,Mg,Qn,Ss,_s,nh,ih,Rl,Ke,Vs,IR,BR,FR;class ep extends Z{constructor(){super(...arguments);_(this,Ke);_(this,mn);_(this,Cg,0);_(this,Mg);_(this,Qn);_(this,Ss);_(this,_s);_(this,nh);_(this,ih);_(this,Rl)}build(e,i,s,a,r,o,l){v(this,Ss,i),v(this,_s,s),v(this,nh,a),v(this,ih,r),v(this,Rl,o),v(this,Mg,l??0),v(this,Qn,e),x(this,Ke,BR).call(this)}get thickness(){return c(this,Rl)}setLastElement(e){return c(this,Qn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Qn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of c(this,Qn)){if(e.push(`M${Z.svgRound(i[4])} ${Z.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${Z.svgRound(i[10])} ${Z.svgRound(i[11])}`);continue}for(let s=6,a=i.length;s<a;s+=6){const[r,o,l,u,h,d]=i.subarray(s,s+6).map(Z.svgRound);e.push(`C${r} ${o} ${l} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,s,a],r){const o=[],l=[],[u,h,d,f]=x(this,Ke,IR).call(this);let g,b,m,S,p,y,A,w,T;switch(c(this,ih)){case 0:T=Z._rescale,g=e,b=i+a,m=s,S=-a,p=e+u*s,y=i+(1-h-f)*a,A=e+(u+d)*s,w=i+(1-h)*a;break;case 90:T=Z._rescaleAndSwap,g=e,b=i,m=s,S=a,p=e+h*s,y=i+u*a,A=e+(h+f)*s,w=i+(u+d)*a;break;case 180:T=Z._rescale,g=e+s,b=i,m=-s,S=a,p=e+(1-u-d)*s,y=i+h*a,A=e+(1-u)*s,w=i+(h+f)*a;break;case 270:T=Z._rescaleAndSwap,g=e+s,b=i+a,m=-s,S=-a,p=e+(1-h-f)*s,y=i+(1-u-d)*a,A=e+(1-h)*s,w=i+(1-u)*a;break}for(const{line:C,points:M}of c(this,Qn))o.push(T(C,g,b,m,S,r?new Array(C.length):null)),l.push(T(M,g,b,m,S,r?new Array(M.length):null));return{lines:o,points:l,rect:[p,y,A,w]}}static deserialize(e,i,s,a,r,{paths:{lines:o,points:l},rotation:u,thickness:h}){const d=[];let f,g,b,m,S;switch(u){case 0:S=Z._rescale,f=-e/s,g=i/a+1,b=1/s,m=-1/a;break;case 90:S=Z._rescaleAndSwap,f=-i/a,g=-e/s,b=1/a,m=1/s;break;case 180:S=Z._rescale,f=e/s+1,g=-i/a,b=-1/s,m=1/a;break;case 270:S=Z._rescaleAndSwap,f=i/a+1,g=e/s+1,b=-1/a,m=-1/s;break}if(!o){o=[];for(const y of l){const A=y.length;if(A===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(A===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const w=new Float32Array(3*(A-2));o.push(w);let[T,C,M,L]=y.subarray(0,4);w.set([NaN,NaN,NaN,NaN,T,C],0);for(let k=4;k<A;k+=2){const P=y[k],H=y[k+1];w.set(Z.createBezierPoints(T,C,M,L,P,H),(k-2)*3),[T,C,M,L]=[M,L,P,H]}}}for(let y=0,A=o.length;y<A;y++)d.push({line:S(o[y].map(w=>w??NaN),f,g,b,m),points:S(l[y].map(w=>w??NaN),f,g,b,m)});const p=new this.prototype.constructor;return p.build(d,s,a,1,u,h,r),p}get box(){return c(this,mn)}updateProperty(e,i){return e==="stroke-width"?x(this,Ke,FR).call(this,i):null}updateParentDimensions([e,i],s){const[a,r]=x(this,Ke,Vs).call(this);v(this,Ss,e),v(this,_s,i),v(this,nh,s);const[o,l]=x(this,Ke,Vs).call(this),u=o-a,h=l-r,d=c(this,mn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return v(this,Cg,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,mn).map(Z.svgRound).join(" ")}get defaultProperties(){const[e,i]=c(this,mn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(e)} ${Z.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=c(this,mn);let s=0,a=0,r=0,o=0,l=0,u=0;switch(c(this,Cg)){case 90:a=i/e,r=-e/i,l=e;break;case 180:s=-1,o=-1,l=e,u=i;break;case 270:a=-i/e,r=e/i,u=i;break;default:return""}return`matrix(${s} ${a} ${r} ${o} ${Z.svgRound(l)} ${Z.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,a]){const[r,o]=x(this,Ke,Vs).call(this),[l,u,h,d]=c(this,mn);if(Math.abs(h-r)<=Z.PRECISION||Math.abs(d-o)<=Z.PRECISION){const S=e+s/2-(l+h/2),p=i+a/2-(u+d/2);return{path:{"transform-origin":`${Z.svgRound(e)} ${Z.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${p})`}}}const f=(s-2*r)/(h-2*r),g=(a-2*o)/(d-2*o),b=h/s,m=d/a;return{path:{"transform-origin":`${Z.svgRound(l)} ${Z.svgRound(u)}`,transform:`${this.rotationTransform} scale(${b} ${m}) translate(${Z.svgRound(r)} ${Z.svgRound(o)}) scale(${f} ${g}) translate(${Z.svgRound(-r)} ${Z.svgRound(-o)})`}}}getPathResizedSVGProperties([e,i,s,a]){const[r,o]=x(this,Ke,Vs).call(this),l=c(this,mn),[u,h,d,f]=l;if(l[0]=e,l[1]=i,l[2]=s,l[3]=a,Math.abs(d-r)<=Z.PRECISION||Math.abs(f-o)<=Z.PRECISION){const p=e+s/2-(u+d/2),y=i+a/2-(h+f/2);for(const{line:A,points:w}of c(this,Qn))Z._translate(A,p,y,A),Z._translate(w,p,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(e)} ${Z.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(s-2*r)/(d-2*r),b=(a-2*o)/(f-2*o),m=-g*(u+r)+e+r,S=-b*(h+o)+i+o;if(g!==1||b!==1||m!==0||S!==0)for(const{line:p,points:y}of c(this,Qn))Z._rescale(p,m,S,g,b,p),Z._rescale(y,m,S,g,b,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(e)} ${Z.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[a,r]=s,o=c(this,mn),l=e-o[0],u=i-o[1];if(c(this,Ss)===a&&c(this,_s)===r)for(const{line:h,points:d}of c(this,Qn))Z._translate(h,l,u,h),Z._translate(d,l,u,d);else{const h=c(this,Ss)/a,d=c(this,_s)/r;v(this,Ss,a),v(this,_s,r);for(const{line:f,points:g}of c(this,Qn))Z._rescale(f,l,u,h,d,f),Z._rescale(g,l,u,h,d,g);o[2]*=h,o[3]*=d}return o[0]=e,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(e)} ${Z.svgRound(i)}`}}}get defaultSVGProperties(){const e=c(this,mn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(e[0])} ${Z.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}mn=new WeakMap,Cg=new WeakMap,Mg=new WeakMap,Qn=new WeakMap,Ss=new WeakMap,_s=new WeakMap,nh=new WeakMap,ih=new WeakMap,Rl=new WeakMap,Ke=new WeakSet,Vs=function(e=c(this,Rl)){const i=c(this,Mg)+e/2*c(this,nh);return c(this,ih)%180===0?[i/c(this,Ss),i/c(this,_s)]:[i/c(this,_s),i/c(this,Ss)]},IR=function(){const[e,i,s,a]=c(this,mn),[r,o]=x(this,Ke,Vs).call(this,0);return[e+r,i+o,s-2*r,a-2*o]},BR=function(){const e=v(this,mn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of c(this,Qn)){if(a.length<=12){for(let l=4,u=a.length;l<u;l+=6)et.pointBoundingBox(a[l],a[l+1],e);continue}let r=a[4],o=a[5];for(let l=6,u=a.length;l<u;l+=6){const[h,d,f,g,b,m]=a.subarray(l,l+6);et.bezierBoundingBox(r,o,h,d,f,g,b,m,e),r=b,o=m}}const[i,s]=x(this,Ke,Vs).call(this);e[0]=bn(e[0]-i,0,1),e[1]=bn(e[1]-s,0,1),e[2]=bn(e[2]+i,0,1),e[3]=bn(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},FR=function(e){const[i,s]=x(this,Ke,Vs).call(this);v(this,Rl,e);const[a,r]=x(this,Ke,Vs).call(this),[o,l]=[a-i,r-s],u=c(this,mn);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class yy extends PR{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Qt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new yy(this._viewParameters);return t.updateAll(this),t}}var B0,UR;const Uc=class Uc extends w0{constructor(e){super({...e,name:"inkEditor"});_(this,B0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){Qt.initialize(e,i),this._defaultDrawingOptions=new yy(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return At(this,"typesMap",new Map([[wt.INK_THICKNESS,"stroke-width"],[wt.INK_COLOR,"stroke"],[wt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,a,r){return new dH(e,i,s,a,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,a,r,o){return ep.deserialize(e,i,s,a,r,o)}static async deserialize(e,i,s){let a=null;if(e instanceof Tw){const{data:{inkLists:o,rect:l,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:b},parent:{page:{pageNumber:m}}}=e;a=e={annotationType:ct.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:o},boxes:null,pageIndex:m-1,rect:l.slice(0),rotation:u,id:h,deleted:!1,popupRef:b}}const r=await super.deserialize(e,i,s);return r.annotationElementId=e.id||null,r._initialData=a,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=Uc.getDefaultDrawingOptions({stroke:et.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:a}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u={annotationType:ct.INK,color:Qt._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.isCopy=!0,u):this.annotationElementId&&!x(this,B0,UR).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}};B0=new WeakSet,UR=function(e){const{color:i,thickness:s,opacity:a,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((o,l)=>o!==i[l])||e.thickness!==s||e.opacity!==a||e.pageIndex!==r},J(Uc,"_type","ink"),J(Uc,"_editorType",ct.INK),J(Uc,"_defaultDrawingOptions",null);let P1=Uc;class H1 extends ep{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Lp=8,Wh=3;var Nl,Rt,I1,Vi,jR,GR,B1,wm,VR,$R,qR,F1,U1,XR;class Sa{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},a,r,o,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:b,actualBoundingBoxAscent:m,actualBoundingBoxDescent:S,fontBoundingBoxAscent:p,fontBoundingBoxDescent:y,width:A}=h.measureText(t),w=1.5,T=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||0,A)*w),C=Math.ceil(Math.max(Math.abs(m)+Math.abs(S)||d,Math.abs(p)+Math.abs(y)||d)*w);u=new OffscreenCanvas(T,C),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,T,C),h.fillStyle="black",h.fillText(t,T*(w-1)/2,C*(3-w)/2);const M=x(this,Rt,F1).call(this,h.getImageData(0,0,T,C).data),L=x(this,Rt,qR).call(this,M),k=x(this,Rt,U1).call(this,L),P=x(this,Rt,B1).call(this,M,T,C,k);return this.processDrawnLines({lines:{curves:P,width:T,height:C},pageWidth:a,pageHeight:r,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,a){const[r,o,l]=x(this,Rt,XR).call(this,t),[u,h]=x(this,Rt,$R).call(this,r,o,l,Math.hypot(o,l)*c(this,Nl).sigmaSFactor,c(this,Nl).sigmaR,c(this,Nl).kernelSize),d=x(this,Rt,U1).call(this,h),f=x(this,Rt,B1).call(this,u,o,l,d);return this.processDrawnLines({lines:{curves:f,width:o,height:l},pageWidth:e,pageHeight:i,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:a,mustSmooth:r,areContours:o}){s%180!==0&&([e,i]=[i,e]);const{curves:l,width:u,height:h}=t,d=t.thickness??0,f=[],g=Math.min(e/u,i/h),b=g/e,m=g/i,S=[];for(const{points:y}of l){const A=r?x(this,Rt,VR).call(this,y):y;if(!A)continue;S.push(A);const w=A.length,T=new Float32Array(w),C=new Float32Array(3*(w===2?2:w-2));if(f.push({line:C,points:T}),w===2){T[0]=A[0]*b,T[1]=A[1]*m,C.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[M,L,k,P]=A;M*=b,L*=m,k*=b,P*=m,T.set([M,L,k,P],0),C.set([NaN,NaN,NaN,NaN,M,L],0);for(let H=4;H<w;H+=2){const $=T[H]=A[H]*b,G=T[H+1]=A[H+1]*m;C.set(Z.createBezierPoints(M,L,k,P,$,G),(H-2)*3),[M,L,k,P]=[k,P,$,G]}}if(f.length===0)return null;const p=o?new H1:new ep;return p.build(f,e,i,1,s,o?0:d,a),{outline:p,newCurves:S,areContours:o,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:a}){let r=1/0,o=-1/0,l=0;for(const A of t){l+=A.length;for(let w=2,T=A.length;w<T;w++){const C=A[w]-A[w-2];r=Math.min(r,C),o=Math.max(o,C)}}let u;r>=-128&&o<=127?u=Int8Array:r>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=Lp+Wh*h,f=new Uint32Array(d);let g=0;f[g++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=s,f[g++]=a,f[g++]=e?0:1,f[g++]=Math.max(0,Math.floor(i??0)),f[g++]=h,f[g++]=u.BYTES_PER_ELEMENT;for(const A of t)f[g++]=A.length-2,f[g++]=A[0],f[g++]=A[1];const b=new CompressionStream("deflate-raw"),m=b.writable.getWriter();await m.ready,m.write(f);const S=u.prototype.constructor;for(const A of t){const w=new S(A.length-2);for(let T=2,C=A.length;T<C;T++)w[T-2]=A[T]-A[T-2];m.write(w)}m.close();const p=await new Response(b.readable).arrayBuffer(),y=new Uint8Array(p);return WC(y)}static async decompressSignature(t){try{const e=zP(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let r=null,o=0;for await(const A of i)r||(r=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),r.set(A,o),o+=A.length;const l=new Uint32Array(r.buffer,0,r.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],d=l[3],f=l[4]===0,g=l[5],b=l[6],m=l[7],S=[],p=(Lp+Wh*b)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(m){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(r.buffer,p);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(r.buffer,p);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(r.buffer,p);break}o=0;for(let A=0;A<b;A++){const w=l[Wh*A+Lp],T=new Float32Array(w+2);S.push(T);for(let C=0;C<Wh-1;C++)T[C]=l[Wh*A+Lp+C+1];for(let C=0;C<w;C++)T[C+2]=T[C]+y[o++]}return{areContours:f,thickness:g,outlines:S,width:h,height:d}}catch(e){return ht(`decompressSignature: ${e}`),null}}}Nl=new WeakMap,Rt=new WeakSet,I1=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},Vi=new WeakMap,jR=function(t,e,i,s,a,r,o){const l=x(this,Rt,I1).call(this,i,s,a,r);for(let u=0;u<8;u++){const h=(-u+l-o+16)%8,d=c(this,Vi)[2*h],f=c(this,Vi)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},GR=function(t,e,i,s,a,r,o){const l=x(this,Rt,I1).call(this,i,s,a,r);for(let u=0;u<8;u++){const h=(u+l+o+16)%8,d=c(this,Vi)[2*h],f=c(this,Vi)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},B1=function(t,e,i,s){const a=t.length,r=new Int32Array(a);for(let h=0;h<a;h++)r[h]=t[h]<=s?1:0;for(let h=1;h<i-1;h++)r[h*e]=r[h*e+e-1]=0;for(let h=0;h<e;h++)r[h]=r[e*i-1-h]=0;let o=1,l;const u=[];for(let h=1;h<i-1;h++){l=1;for(let d=1;d<e-1;d++){const f=h*e+d,g=r[f];if(g===0)continue;let b=h,m=d;if(g===1&&r[f-1]===0)o+=1,m-=1;else if(g>=1&&r[f+1]===0)o+=1,m+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}const S=[d,h],p=m===d+1,y={isHole:p,points:S,id:o,parent:0};u.push(y);let A;for(const H of u)if(H.id===l){A=H;break}A?A.isHole?y.parent=p?A.parent:l:y.parent=p?l:A.parent:y.parent=p?l:0;const w=x(this,Rt,jR).call(this,r,e,h,d,b,m,0);if(w===-1){r[f]=-o,r[f]!==1&&(l=Math.abs(r[f]));continue}let T=c(this,Vi)[2*w],C=c(this,Vi)[2*w+1];const M=h+T,L=d+C;b=M,m=L;let k=h,P=d;for(;;){const H=x(this,Rt,GR).call(this,r,e,k,P,b,m,1);T=c(this,Vi)[2*H],C=c(this,Vi)[2*H+1];const $=k+T,G=P+C;S.push(G,$);const R=k*e+P;if(r[R+1]===0?r[R]=-o:r[R]===1&&(r[R]=o),$===h&&G===d&&k===M&&P===L){r[f]!==1&&(l=Math.abs(r[f]));break}else b=k,m=P,k=$,P=G}}}return u},wm=function(t,e,i,s){if(i-e<=4){for(let M=e;M<i-2;M+=2)s.push(t[M],t[M+1]);return}const a=t[e],r=t[e+1],o=t[i-4]-a,l=t[i-3]-r,u=Math.hypot(o,l),h=o/u,d=l/u,f=h*r-d*a,g=l/o,b=1/u,m=Math.atan(g),S=Math.cos(m),p=Math.sin(m),y=b*(Math.abs(S)+Math.abs(p)),A=b*(1-y+y**2),w=Math.max(Math.atan(Math.abs(p+S)*A),Math.atan(Math.abs(p-S)*A));let T=0,C=e;for(let M=e+2;M<i-2;M+=2){const L=Math.abs(f-h*t[M+1]+d*t[M]);L>T&&(C=M,T=L)}T>(u*w)**2?(x(this,Rt,wm).call(this,t,e,C+2,s),x(this,Rt,wm).call(this,t,C,i,s)):s.push(a,r)},VR=function(t){const e=[],i=t.length;return x(this,Rt,wm).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},$R=function(t,e,i,s,a,r){const o=new Float32Array(r**2),l=-2*s**2,u=r>>1;for(let m=0;m<r;m++){const S=(m-u)**2;for(let p=0;p<r;p++)o[m*r+p]=Math.exp((S+(p-u)**2)/l)}const h=new Float32Array(256),d=-2*a**2;for(let m=0;m<256;m++)h[m]=Math.exp(m**2/d);const f=t.length,g=new Uint8Array(f),b=new Uint32Array(256);for(let m=0;m<i;m++)for(let S=0;S<e;S++){const p=m*e+S,y=t[p];let A=0,w=0;for(let C=0;C<r;C++){const M=m+C-u;if(!(M<0||M>=i))for(let L=0;L<r;L++){const k=S+L-u;if(k<0||k>=e)continue;const P=t[M*e+k],H=o[C*r+L]*h[Math.abs(P-y)];A+=P*H,w+=H}}const T=g[p]=Math.round(A/w);b[T]++}return[g,b]},qR=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},F1=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,a=1/0;for(let o=0,l=i.length;o<l;o++){if(t[(o<<2)+3]===0){s=i[o]=255;continue}const h=i[o]=t[o<<2];h>s&&(s=h),h<a&&(a=h)}const r=255/(s-a);for(let o=0;o<e;o++)i[o]=(i[o]-a)*r;return i},U1=function(t){let e,i=-1/0,s=-1/0;const a=t.findIndex(l=>l!==0);let r=a,o=a;for(e=a;e<256;e++){const l=t[e];l>i&&(e-r>s&&(s=e-r,o=e-1),i=l,r=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e},XR=function(t){const e=t,{width:i,height:s}=t,{maxDim:a}=c(this,Nl);let r=i,o=s;if(i>a||s>a){let f=i,g=s,b=Math.log2(Math.max(i,s)/a);const m=Math.floor(b);b=b===m?m-1:m;for(let p=0;p<b;p++){r=f,o=g,r>a&&(r=Math.ceil(r/2)),o>a&&(o=Math.ceil(o/2));const y=new OffscreenCanvas(r,o);y.getContext("2d").drawImage(t,0,0,f,g,0,0,r,o),f=r,g=o,t!==e&&t.close(),t=y.transferToImageBitmap()}const S=Math.min(a/r,a/o);r=Math.round(r*S),o=Math.round(o*S)}const u=new OffscreenCanvas(r,o).getContext("2d",{willReadFrequently:!0});u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,r,o);const h=u.getImageData(0,0,r,o).data;return[x(this,Rt,F1).call(this,h),r,o]},_(Sa,Rt),_(Sa,Nl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),_(Sa,Vi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Cw extends PR{constructor(){super(),super.updateProperties({fill:"CanvasText","stroke-width":0})}clone(){const t=new Cw;return t.updateAll(this),t}}class Mw extends yy{constructor(t){super(t),super.updateProperties({stroke:"CanvasText","stroke-width":1})}clone(){const t=new Mw(this._viewParameters);return t.updateAll(this),t}}var Dr,Jn,Lr,kr;const Un=class Un extends w0{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});_(this,Dr,!1);_(this,Jn,null);_(this,Lr,null);_(this,kr,null);this._willKeepAspectRatio=!0,v(this,Lr,e.signatureData||null),v(this,Jn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){Qt.initialize(e,i),this._defaultDrawingOptions=new Cw,this._defaultDrawnSignatureOptions=new Mw(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return At(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Jn)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(c(this,Lr)){const{lines:a,mustSmooth:r,areContours:o,description:l,uuid:u,heightInPage:h}=c(this,Lr),{rawDims:{pageWidth:d,pageHeight:f},rotation:g}=this.parent.viewport,b=Sa.processDrawnLines({lines:a,pageWidth:d,pageHeight:f,rotation:g,innerMargin:Un._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(b,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){v(this,kr,e),this.addEditToolbar()}getUuid(){return c(this,kr)}get description(){return c(this,Jn)}set description(e){v(this,Jn,e),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:a,height:r}=c(this,Lr),o=Math.max(a,r),l=Sa.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:a,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:l.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&c(this,Jn)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,c(this,kr),c(this,Jn)),e.show()),e):null}addSignature(e,i,s,a){const{x:r,y:o}=this,{outline:l}=v(this,Lr,e);v(this,Dr,l instanceof H1),v(this,Jn,s),this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let u;c(this,Dr)?u=Un.getDefaultDrawingOptions():(u=Un._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[h,d]=this.parentDimensions,[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(h*this.width,d*this.height),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Sa.process(e,i,s,a,Un._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:a},rotation:r}=this.parent.viewport;return Sa.extractContoursFromText(e,i,s,a,r,Un._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Sa.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:a,innerMargin:Un._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=Un.getDefaultDrawingOptions():(this._drawingOptions=Un._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s,rect:a}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o={annotationType:ct.SIGNATURE,isSignature:!0,areContours:c(this,Dr),color:[0,0,0],thickness:c(this,Dr)?0:r,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.paths={lines:i,points:s},o.uuid=c(this,kr),o.isCopy=!0):o.lines=i,c(this,Jn)&&(o.accessibilityData={type:"Figure",alt:c(this,Jn)}),o}static deserializeDraw(e,i,s,a,r,o){return o.areContours?H1.deserialize(e,i,s,a,r,o):ep.deserialize(e,i,s,a,r,o)}static async deserialize(e,i,s){var r;const a=await super.deserialize(e,i,s);return v(a,Dr,e.areContours),v(a,Jn,((r=e.accessibilityData)==null?void 0:r.alt)||""),v(a,kr,e.uuid),a}};Dr=new WeakMap,Jn=new WeakMap,Lr=new WeakMap,kr=new WeakMap,J(Un,"_type","signature"),J(Un,"_editorType",ct.SIGNATURE),J(Un,"_defaultDrawingOptions",null);let j1=Un;var Yt,Pe,Or,pa,zr,sh,ma,Dl,xs,ti,ah,xt,vd,Ad,Sm,_m,xm,V1,Em,YR;class G1 extends Qt{constructor(e){super({...e,name:"stampEditor"});_(this,xt);_(this,Yt,null);_(this,Pe,null);_(this,Or,null);_(this,pa,null);_(this,zr,null);_(this,sh,"");_(this,ma,null);_(this,Dl,!1);_(this,xs,null);_(this,ti,!1);_(this,ah,!1);v(this,pa,e.bitmapUrl),v(this,zr,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){Qt.initialize(e,i)}static isHandlingMimeForPasting(e){return Pv.includes(e)}static paste(e,i){i.pasteEditor(ct.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:r,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:a,width:r,height:o,channels:a.length/(r*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;c(this,Pe)&&(v(this,Yt,null),this._uiManager.imageManager.deleteId(c(this,Pe)),(e=c(this,ma))==null||e.remove(),v(this,ma,null),c(this,xs)&&(clearTimeout(c(this,xs)),v(this,xs,null))),super.remove()}rebuild(){if(!this.parent){c(this,Pe)&&x(this,xt,Sm).call(this);return}super.rebuild(),this.div!==null&&(c(this,Pe)&&c(this,ma)===null&&x(this,xt,Sm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,Or)||c(this,Yt)||c(this,pa)||c(this,zr)||c(this,Pe)||c(this,Dl))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(this,Dl)||(c(this,Yt)?x(this,xt,_m).call(this):x(this,xt,Sm).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(v(this,Pe,s),a&&v(this,Yt,a),v(this,Dl,!1),x(this,xt,_m).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,xs)!==null&&clearTimeout(c(this,xs)),v(this,xs,setTimeout(()=>{v(this,xs,null),x(this,xt,V1).call(this)},200))}copyCanvas(e,i,s=!1){var g;e||(e=224);const{width:a,height:r}=c(this,Yt),o=new Ba;let l=c(this,Yt),u=a,h=r,d=null;if(i){if(a>i||r>i){const L=Math.min(i/a,i/r);u=Math.floor(a*L),h=Math.floor(r*L)}d=document.createElement("canvas");const b=d.width=Math.ceil(u*o.sx),m=d.height=Math.ceil(h*o.sy);c(this,ti)||(l=x(this,xt,xm).call(this,b,m));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let p="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",y="#42414d");const A=15,w=A*o.sx,T=A*o.sy,C=new OffscreenCanvas(w*2,T*2),M=C.getContext("2d");M.fillStyle=p,M.fillRect(0,0,w*2,T*2),M.fillStyle=y,M.fillRect(0,0,w,T),M.fillRect(w,T,w,T),S.fillStyle=S.createPattern(C,"repeat"),S.fillRect(0,0,b,m),S.drawImage(l,0,0,l.width,l.height,0,0,b,m)}let f=null;if(s){let b,m;if(o.symmetric&&l.width<e&&l.height<e)b=l.width,m=l.height;else if(l=c(this,Yt),a>e||r>e){const y=Math.min(e/a,e/r);b=Math.floor(a*y),m=Math.floor(r*y),c(this,ti)||(l=x(this,xt,xm).call(this,b,m))}const p=new OffscreenCanvas(b,m).getContext("2d",{willReadFrequently:!0});p.drawImage(l,0,0,l.width,l.height,0,0,b,m),f={width:b,height:m,data:p.getImageData(0,0,b,m).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,i,s){var S;let a=null,r=!1;if(e instanceof cR){const{data:{rect:p,rotation:y,id:A,structParent:w,popupRef:T},container:C,parent:{page:{pageNumber:M}},canvas:L}=e;let k,P;L?(delete e.canvas,{id:k,bitmap:P}=s.imageManager.getFromCanvas(C.id,L),L.remove()):(r=!0,e._hasNoCanvas=!0);const H=((S=await i._structTree.getAriaAttributes(`${yw}${A}`))==null?void 0:S.get("aria-label"))||"";a=e={annotationType:ct.STAMP,bitmapId:k,bitmap:P,pageIndex:M-1,rect:p.slice(0),rotation:y,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:H},isSvg:!1,structParent:w,popupRef:T}}const o=await super.deserialize(e,i,s),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:g}=e;r?(s.addMissingCanvas(e.id,o),v(o,Dl,!0)):d&&s.imageManager.isValidId(d)?(v(o,Pe,d),u&&v(o,Yt,u)):v(o,pa,h),v(o,ti,f);const[b,m]=o.pageDimensions;return o.width=(l[2]-l[0])/b,o.height=(l[3]-l[1])/m,o.annotationElementId=e.id||null,g&&(o.altTextData=g),o._initialData=a,v(o,ah,!!a),o}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:ct.STAMP,bitmapId:c(this,Pe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,ti),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=x(this,xt,Em).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:r}=this.serializeAltText(!1);if(!a&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const l=x(this,xt,YR).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const o=c(this,ti)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(c(this,Pe)))i.stamps.set(c(this,Pe),{area:o,serialized:s}),s.bitmap=x(this,xt,Em).call(this,!1);else if(c(this,ti)){const l=i.stamps.get(c(this,Pe));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=x(this,xt,Em).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Yt=new WeakMap,Pe=new WeakMap,Or=new WeakMap,pa=new WeakMap,zr=new WeakMap,sh=new WeakMap,ma=new WeakMap,Dl=new WeakMap,xs=new WeakMap,ti=new WeakMap,ah=new WeakMap,xt=new WeakSet,vd=function(e,i=!1){if(!e){this.remove();return}v(this,Yt,e.bitmap),i||(v(this,Pe,e.id),v(this,ti,e.isSvg)),e.file&&v(this,sh,e.file.name),x(this,xt,_m).call(this)},Ad=function(){if(v(this,Or,null),this._uiManager.enableWaiting(!1),!!c(this,ma)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Yt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Yt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Sm=function(){if(c(this,Pe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Pe)).then(s=>x(this,xt,vd).call(this,s,!0)).finally(()=>x(this,xt,Ad).call(this));return}if(c(this,pa)){const s=c(this,pa);v(this,pa,null),this._uiManager.enableWaiting(!0),v(this,Or,this._uiManager.imageManager.getFromUrl(s).then(a=>x(this,xt,vd).call(this,a)).finally(()=>x(this,xt,Ad).call(this)));return}if(c(this,zr)){const s=c(this,zr);v(this,zr,null),this._uiManager.enableWaiting(!0),v(this,Or,this._uiManager.imageManager.getFromFile(s).then(a=>x(this,xt,vd).call(this,a)).finally(()=>x(this,xt,Ad).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Pv.join(",");const i=this._uiManager._signal;v(this,Or,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,xt,vd).call(this,a)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>x(this,xt,Ad).call(this))),e.click()},_m=function(){var d;const{div:e}=this;let{width:i,height:s}=c(this,Yt);const[a,r]=this.pageDimensions,o=.75;if(this.width)i=this.width*a,s=this.height*r;else if(i>o*a||s>o*r){const f=Math.min(o*a/i,o*r/s);i*=f,s*=f}const[l,u]=this.parentDimensions;this.setDims(i*l/a,s*u/r),this._uiManager.enableWaiting(!1);const h=v(this,ma,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/a,this.height=s/r,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),x(this,xt,V1).call(this),c(this,ah)||(this.parent.addUndoableEditor(this),v(this,ah,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,sh)&&this.div.setAttribute("aria-description",c(this,sh))},xm=function(e,i){const{width:s,height:a}=c(this,Yt);let r=s,o=a,l=c(this,Yt);for(;r>2*e||o>2*i;){const u=r,h=o;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(r,o);d.getContext("2d").drawImage(l,0,0,u,h,0,0,r,o),l=d.transferToImageBitmap()}return l},V1=function(){const[e,i]=this.parentDimensions,{width:s,height:a}=this,r=new Ba,o=Math.ceil(s*e*r.sx),l=Math.ceil(a*i*r.sy),u=c(this,ma);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const h=c(this,ti)?c(this,Yt):x(this,xt,xm).call(this,o,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,l)},Em=function(e){if(e){if(c(this,ti)){const a=this._uiManager.imageManager.getSvgUrl(c(this,Pe));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,Yt),i.getContext("2d").drawImage(c(this,Yt),0,0),i.toDataURL()}if(c(this,ti)){const[i,s]=this.pageDimensions,a=Math.round(this.width*i*io.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*io.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,r);return o.getContext("2d").drawImage(c(this,Yt),0,0,c(this,Yt).width,c(this,Yt).height,0,0,a,r),o.transferToImageBitmap()}return structuredClone(c(this,Yt))},YR=function(e){var o;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,a=e.pageIndex===i,r=(((o=e.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&r,isSameAltText:r}},J(G1,"_type","stamp"),J(G1,"_editorType",ct.STAMP);var Ll,rh,Es,Pr,ya,Ai,Hr,oh,kl,$i,ba,on,va,nt,Ir,Zt,KR,ls,q1,X1,Tm;const Oi=class Oi{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:a,annotationLayer:r,drawLayer:o,textLayer:l,viewport:u,l10n:h}){_(this,Zt);_(this,Ll);_(this,rh,!1);_(this,Es,null);_(this,Pr,null);_(this,ya,null);_(this,Ai,new Map);_(this,Hr,!1);_(this,oh,!1);_(this,kl,!1);_(this,$i,null);_(this,ba,null);_(this,on,null);_(this,va,null);_(this,nt);const d=[...c(Oi,Ir).values()];if(!Oi._initialized){Oi._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),v(this,nt,t),this.pageIndex=e,this.div=i,v(this,Ll,a),v(this,Es,r),this.viewport=u,v(this,on,l),this.drawLayer=o,this._structTree=s,c(this,nt).addLayer(this)}get isEmpty(){return c(this,Ai).size===0}get isInvisible(){return this.isEmpty&&c(this,nt).getMode()===ct.NONE}updateToolbar(t){c(this,nt).updateToolbar(t)}updateMode(t=c(this,nt).getMode()){switch(x(this,Zt,Tm).call(this),t){case ct.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ct.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ct.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of c(Oi,Ir).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,on))==null?void 0:e.div)}setEditingState(t){c(this,nt).setEditingState(t)}addCommands(t){c(this,nt).addCommands(t)}cleanUndoStack(t){c(this,nt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,Es))==null||e.div.classList.toggle("disabled",!t)}async enable(){v(this,kl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of c(this,Ai).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,nt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!c(this,Es)){v(this,kl,!1);return}const e=c(this,Es).getEditableAnnotations();for(const i of e){if(i.hide(),c(this,nt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}v(this,kl,!1)}disable(){var s;v(this,oh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of c(this,Ai).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}if(c(this,Es)){const a=c(this,Es).getEditableAnnotations();for(const r of a){const{id:o}=r.data;if(c(this,nt).isDeletedAnnotationElement(o))continue;let l=e.get(o);if(l){l.resetAnnotationElement(r),l.show(!1),r.show();continue}l=t.get(o),l&&(c(this,nt).addChangedExistingAnnotation(l),l.renderAnnotationElement(r)&&l.show(!1)),r.show()}}x(this,Zt,Tm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of c(Oi,Ir).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,oh,!1)}getEditableAnnotation(t){var e;return((e=c(this,Es))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,nt).getActive()!==t&&c(this,nt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,on))!=null&&t.div&&!c(this,va)){v(this,va,new AbortController);const e=c(this,nt).combinedSignal(c(this,va));c(this,on).div.addEventListener("pointerdown",x(this,Zt,KR).bind(this),{signal:e}),c(this,on).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,on))!=null&&t.div&&c(this,va)&&(c(this,va).abort(),v(this,va,null),c(this,on).div.classList.remove("highlighting"))}enableClick(){if(c(this,Pr))return;v(this,Pr,new AbortController);const t=c(this,nt).combinedSignal(c(this,Pr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,Pr))==null||t.abort(),v(this,Pr,null)}attach(t){c(this,Ai).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,nt).isDeletedAnnotationElement(e)&&c(this,nt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Ai).delete(t.id),(e=c(this,Ll))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,oh)&&t.annotationElementId&&c(this,nt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,nt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,nt).addDeletedAnnotationElement(t.annotationElementId),Qt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,nt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,kl)),c(this,nt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,ya)&&(t._focusEventsAllowed=!1,v(this,ya,setTimeout(()=>{v(this,ya,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,nt)._signal}),e.focus())},0))),t._structTreeParentId=(i=c(this,Ll))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return c(this,nt).getId()}combinedSignal(t){return c(this,nt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Zt,ls))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){c(this,nt).updateToolbar(t),await c(this,nt).updateMode(t);const{offsetX:i,offsetY:s}=x(this,Zt,X1).call(this),a=this.getNextId(),r=x(this,Zt,q1).call(this,{parent:this,id:a,x:i,y:s,uiManager:c(this,nt),isCentered:!0,...e});r&&this.add(r)}async deserialize(t){var e;return await((e=c(Oi,Ir).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,nt)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),a=x(this,Zt,q1).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:c(this,nt),isCentered:e,...i});return a&&this.add(a),a}addNewEditor(t={}){this.createAndAddNewEditor(x(this,Zt,X1).call(this),!0,t)}setSelected(t){c(this,nt).setSelected(t)}toggleSelected(t){c(this,nt).toggleSelected(t)}unselect(t){c(this,nt).unselect(t)}pointerup(t){var s;const{isMac:e}=Je.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,Hr)||(v(this,Hr,!1),(s=c(this,Zt,ls))!=null&&s.isDrawer&&c(this,Zt,ls).supportMultipleDrawings))return;if(!c(this,rh)){v(this,rh,!0);return}const i=c(this,nt).getMode();if(i===ct.STAMP||i===ct.SIGNATURE){c(this,nt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(c(this,nt).getMode()===ct.HIGHLIGHT&&this.enableTextSelection(),c(this,Hr)){v(this,Hr,!1);return}const{isMac:e}=Je.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(v(this,Hr,!0),(s=c(this,Zt,ls))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=c(this,nt).getActive();v(this,rh,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,$i)){c(this,Zt,ls).startDrawing(this,c(this,nt),!1,t);return}c(this,nt).setCurrentDrawingSession(this),v(this,$i,new AbortController);const e=c(this,nt).combinedSignal(c(this,$i));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(v(this,ba,null),this.commitOrRemove())},{signal:e}),c(this,Zt,ls).startDrawing(this,c(this,nt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&v(this,ba,e);return}c(this,ba)&&setTimeout(()=>{var e;(e=c(this,ba))==null||e.focus(),v(this,ba,null)},0)}endDrawingSession(t=!1){return c(this,$i)?(c(this,nt).setCurrentDrawingSession(null),c(this,$i).abort(),v(this,$i,null),v(this,ba,null),c(this,Zt,ls).endDrawing(t)):null}findNewParent(t,e,i){const s=c(this,nt).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return c(this,$i)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,$i)&&c(this,Zt,ls).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,nt).getActive())==null?void 0:t.parent)===this&&(c(this,nt).commitOrRemove(),c(this,nt).setActiveEditor(null)),c(this,ya)&&(clearTimeout(c(this,ya)),v(this,ya,null));for(const i of c(this,Ai).values())(e=c(this,Ll))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,Ai).clear(),c(this,nt).removeLayer(this)}render({viewport:t}){this.viewport=t,Kl(this.div,t);for(const e of c(this,nt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,nt).commitOrRemove(),x(this,Zt,Tm).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Kl(this.div,{rotation:i}),e!==i)for(const s of c(this,Ai).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,nt).viewParameters.realScale}};Ll=new WeakMap,rh=new WeakMap,Es=new WeakMap,Pr=new WeakMap,ya=new WeakMap,Ai=new WeakMap,Hr=new WeakMap,oh=new WeakMap,kl=new WeakMap,$i=new WeakMap,ba=new WeakMap,on=new WeakMap,va=new WeakMap,nt=new WeakMap,Ir=new WeakMap,Zt=new WeakSet,KR=function(t){c(this,nt).unselectAll();const{target:e}=t;if(e===c(this,on).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,on).div.contains(e)){const{isMac:i}=Je.platform;if(t.button!==0||t.ctrlKey&&i)return;c(this,nt).showAllEditors("highlight",!0,!0),c(this,on).div.classList.add("free"),this.toggleDrawing(),A0.startHighlighting(this,c(this,nt).direction==="ltr",{target:c(this,on).div,x:t.x,y:t.y}),c(this,on).div.addEventListener("pointerup",()=>{c(this,on).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,nt)._signal}),t.preventDefault()}},ls=function(){return c(Oi,Ir).get(c(this,nt).getMode())},q1=function(t){const e=c(this,Zt,ls);return e?new e.prototype.constructor(t):null},X1=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),r=Math.max(0,e),o=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+s),u=(a+o)/2-t,h=(r+l)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Tm=function(){for(const t of c(this,Ai).values())t.isEmpty()&&t.remove()},J(Oi,"_initialized",!1),_(Oi,Ir,new Map([_1,P1,G1,A0,j1].map(t=>[t._editorType,t])));let $1=Oi;var qi,yn,Ol,Rg,F0,WR,Ls,K1,ZR,W1;const _e=class _e{constructor({pageIndex:t}){_(this,Ls);_(this,qi,null);_(this,yn,new Map);_(this,Ol,new Map);this.pageIndex=t}setParent(t){if(!c(this,qi)){v(this,qi,t);return}if(c(this,qi)!==t){if(c(this,yn).size>0)for(const e of c(this,yn).values())e.remove(),t.append(e);v(this,qi,t)}}static get _svgFactory(){return At(this,"_svgFactory",new y0)}draw(t,e=!1,i=!1){const s=dn(_e,Rg)._++,a=x(this,Ls,K1).call(this),r=_e._svgFactory.createElement("defs");a.append(r);const o=_e._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,Ol).set(s,o);const u=i?x(this,Ls,ZR).call(this,r,l):null,h=_e._svgFactory.createElement("use");return a.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(a,t),c(this,yn).set(s,a),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=dn(_e,Rg)._++,s=x(this,Ls,K1).call(this),a=_e._svgFactory.createElement("defs");s.append(a);const r=_e._svgFactory.createElement("path");a.append(r);const o=`path_p${this.pageIndex}_${i}`;r.setAttribute("id",o),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=_e._svgFactory.createElement("mask");a.append(d),l=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=_e._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=_e._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${o}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=_e._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),c(this,yn).set(i,s),i}finalizeDraw(t,e){c(this,Ol).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:i,bbox:s,rootClass:a,path:r}=e,o=typeof t=="number"?c(this,yn).get(t):t;if(o){if(i&&x(this,Ls,W1).call(this,o,i),s&&x(l=_e,F0,WR).call(l,o,s),a){const{classList:u}=o;for(const[h,d]of Object.entries(a))u.toggle(h,d)}if(r){const h=o.firstChild.firstChild;x(this,Ls,W1).call(this,h,r)}}}updateParent(t,e){if(e===this)return;const i=c(this,yn).get(t);i&&(c(e,qi).append(i),c(this,yn).delete(t),c(e,yn).set(t,i))}remove(t){c(this,Ol).delete(t),c(this,qi)!==null&&(c(this,yn).get(t).remove(),c(this,yn).delete(t))}destroy(){v(this,qi,null);for(const t of c(this,yn).values())t.remove();c(this,yn).clear(),c(this,Ol).clear()}};qi=new WeakMap,yn=new WeakMap,Ol=new WeakMap,Rg=new WeakMap,F0=new WeakSet,WR=function(t,[e,i,s,a]){const{style:r}=t;r.top=`${100*i}%`,r.left=`${100*e}%`,r.width=`${100*s}%`,r.height=`${100*a}%`},Ls=new WeakSet,K1=function(){const t=_e._svgFactory.create(1,1,!0);return c(this,qi).append(t),t.setAttribute("aria-hidden",!0),t},ZR=function(t,e){const i=_e._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const a=_e._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s},W1=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},_(_e,F0),_(_e,Rg,0);let Y1=_e;globalThis.pdfjsTestingUtils={HighlightOutliner:E1};ot.AbortException;ot.AnnotationEditorLayer;ot.AnnotationEditorParamsType;ot.AnnotationEditorType;ot.AnnotationEditorUIManager;ot.AnnotationLayer;ot.AnnotationMode;ot.AnnotationType;ot.ColorPicker;ot.DOMSVGFactory;ot.DrawLayer;ot.FeatureTest;var fH=ot.GlobalWorkerOptions;ot.ImageKind;ot.InvalidPDFException;ot.MathClamp;ot.OPS;ot.OutputScale;ot.PDFDataRangeTransport;ot.PDFDateString;ot.PDFWorker;ot.PasswordResponses;ot.PermissionFlag;ot.PixelsPerInch;ot.RenderingCancelledException;ot.ResponseException;ot.SignatureExtractor;ot.SupportedImageMimeTypes;ot.TextLayer;ot.TouchManager;ot.Util;ot.VerbosityLevel;ot.XfaLayer;ot.build;ot.createValidAbsoluteUrl;ot.fetchData;var gH=ot.getDocument;ot.getFilenameFromUrl;ot.getPdfFilenameFromUrl;ot.getUuid;ot.getXfaPageViewport;ot.isDataScheme;ot.isPdfFile;ot.isValidExplicitDest;ot.noContextMenu;ot.normalizeUnicode;ot.setLayerDimensions;ot.shadow;ot.stopEvent;ot.version;const pH="/aws-contract-analyzer/assets/pdf.worker.min-B9SsWq0g.mjs";fH.workerSrc=pH;const QR=window.location.hostname==="localhost"||window.location.hostname.startsWith("127."),mH="http://localhost:5000";QR||console.warn("Ests accediendo desde produccin, pero el backend es local. Asegrate de tener Flask corriendo en tu mquina.");async function Ex(n){const t=new FormData;t.append("file",n);try{const e=await fetch(`${mH}/analyze`,{method:"POST",body:t,credentials:"include"}),i=e.headers.get("Content-Type");if(i&&i.includes("application/json")){const a=await e.json();if(a!=null&&a.pending){console.warn("[API] Modo offline: archivo guardado en espera");const r=await JR(n);console.log(`[CLIENTE] Texto extrado del PDF offline:
`,r)}return a}const s=await e.text();throw new Error(`Error al analizar contrato: ${s}`)}catch(e){throw console.error("[CLIENTE] Error al extraer texto del PDF offline:",e),e}}async function JR(n){try{const t=await n.arrayBuffer(),e=await gH({data:t}).promise;let i="";for(let s=1;s<=e.numPages;s++){const o=(await(await e.getPage(s)).getTextContent()).items.map(l=>l.str).join(" ");i+=`
[Pgina ${s}]: ${o}`}return i.trim()}catch(t){return console.error("[extractTextFromPDFBlob]  Error extrayendo texto:",t),null}}function yH(n){D.useEffect(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n])}const bH=()=>U.jsxs("svg",{className:"w-5 h-5 mr-3 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[U.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),U.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),vH=[{id:"s3",name:"S3 (Upload)",icon:Zz,description:"El contrato seleccionado se carga de forma segura en un bucket de Amazon S3, listo para el procesamiento."},{id:"apigw",name:"API Gateway",icon:lP,description:"Acta como puerta de entrada, recibiendo la solicitud de anlisis y activando la funcin Lambda correspondiente."},{id:"lambda",name:"Lambda (Anlisis)",icon:hP,description:"Una funcin serverless procesa el contrato, extrayendo informacin clave y aplicando lgica de negocio o IA para el anlisis."},{id:"dynamodb",name:"DynamoDB (Resultados)",icon:Xz,description:"Los resultados del anlisis (tipo, riesgo, duracin, etc.) se almacenan de forma persistente en una tabla NoSQL para consulta rpida."}],AH=3e3,wH=({status:n})=>{const t=n==="online"?"bg-green-500":"bg-red-500";return U.jsx("div",{className:`w-3 h-3 rounded-full shadow-md ${t}`,title:`Servidor Flask ${n}`})};function SH(){const[n,t]=D.useState("unknown"),[e,i]=D.useState(null),[s,a]=D.useState([]),[r,o]=D.useState(null),[l,u]=D.useState(!1),[h,d]=D.useState(null),[f,g]=D.useState(!1),[b,m]=D.useState(null),[S,p]=D.useState(!1),[y,A]=D.useState(!1),[w,T]=D.useState(null);yH(S);const C=(E,N="info")=>{a(z=>[...z,{msg:E,type:N,time:new Date().toLocaleTimeString()}])};D.useEffect(()=>{const E=async()=>{try{(await fetch("http://localhost:5000/healthcheck")).ok?t("online"):t("offline")}catch{t("offline")}};E();const N=setInterval(E,AH);return()=>clearInterval(N)},[]),D.useEffect(()=>{if("serviceWorker"in navigator&&navigator.serviceWorker.controller){const E=new MessageChannel;E.port1.onmessage=async N=>{const z=N.data;if(z!=null&&z.fileData&&(z!=null&&z.meta)){const O=new Blob([z.fileData],{type:z.meta.type||"application/pdf"});try{const I=await JR(O);console.log(`[APP][OFFLINE PDF TEXT]:
`,I)}catch(I){console.error("[APP][OFFLINE PDF ERROR]",I)}}},navigator.serviceWorker.controller.postMessage("GET_PENDING_PDF",[E.port2])}},[]),D.useEffect(()=>{(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(N=>{if(!navigator.serviceWorker.controller){console.warn(" SW controller no est disponible todava.");return}const z=new MessageChannel;z.port1.onmessage=O=>{var V;const I=O.data;console.log("[App] Respuesta del SW (inicio):",I),(V=I==null?void 0:I.meta)!=null&&V.name?(T(I.meta.name),C(` Archivo pendiente detectado al iniciar: ${I.meta.name}`,"warning")):console.log(" No hay archivo pendiente al iniciar.")},navigator.serviceWorker.controller.postMessage("GET_PENDING_PDF",[z.port2])})})()},[]);const M=E=>{const N=E.target.files[0];if(N&&(o(N),i(null),a([]),d(null),C(`Archivo seleccionado: ${N.name}`)),N.size>5*1024*1024){alert("El archivo supera los 5MB.");return}},L=async()=>{if(!r)return;u(!0),d(null),i(null);const E=`Archivo seleccionado: ${r.name}`;a([{msg:E,type:"info",time:new Date().toLocaleTimeString()}]);try{m("1"),setTimeout(()=>m("2"),700),setTimeout(()=>m("3"),1300),setTimeout(()=>m("4"),1900),setTimeout(()=>m(null),3e3),C(" Enviando a API Gateway...","info"),new FormData().append("file",r),C(" Procesando en Lambda...","info");const z=await Ex(r);if(z!=null&&z.pending){T(r.name),C(" El backend Flask no est disponible. El archivo se guard para reenviarse luego.","warning");return}i(z),C(" Anlisis completado","success")}catch(N){if(console.error("Error:",N),N.message.includes("almacenado localmente"))C(" El backend est offline. El PDF se ha guardado para procesarse ms tarde.","warning");else{const z=` Error en el anlisis: ${N.message}`;C(z,"error")}d(N.message)}finally{u(!1)}},k=async()=>{C(" Recuperando archivo pendiente desde IndexedDB..."),u(!0),i(null),d(null),a([]);try{const E=await P();if(!E){C(" No se encontr archivo pendiente","error"),u(!1);return}C(` Reintentando anlisis de: ${E.name}`);const N=await Ex(E);if(N!=null&&N.pending){C(" El backend sigue offline. El PDF se mantiene en espera.","warning");return}C(" Anlisis completado tras reintento","success"),i(N),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage("CLEAR_PENDING_PDF"),T(null)}catch(E){C(` Error al reintentar: ${E.message}`,"error"),d(E.message)}finally{u(!1)}};async function P(){return new Promise((E,N)=>{const z=indexedDB.open("offline-pdf-db",1);z.onerror=()=>N("No se pudo abrir IndexedDB"),z.onsuccess=()=>{const F=z.result.transaction("pendingUploads","readonly").objectStore("pendingUploads").get("pending");F.onsuccess=()=>{const X=F.result;if(!X||!X.file)return E(null);const Y=X.file;E(new File([Y],Y.name,{type:Y.type,lastModified:Y.lastModified}))},F.onerror=()=>N("Error al obtener el archivo")}})}const H=({isOpen:E,onClose:N})=>E?(D.useEffect(()=>{const z=O=>{O.keyCode===27&&N()};return window.addEventListener("keydown",z),()=>{window.removeEventListener("keydown",z)}},[N]),D.useEffect(()=>{if("serviceWorker"in navigator&&navigator.serviceWorker.controller){const z=new MessageChannel;z.port1.onmessage=O=>{var I,V;(V=(I=O.data)==null?void 0:I.file)!=null&&V.name&&(T(O.data.file.name),C(` Archivo en espera: ${O.data.file.name}`,"warning"))},navigator.serviceWorker.controller.postMessage("GET_PENDING_PDF",[z.port2])}},[]),U.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm",onClick:N,children:U.jsxs("div",{className:"relative w-full max-w-2xl p-6 mx-auto bg-white rounded-lg shadow-xl",onClick:z=>z.stopPropagation(),children:[U.jsx("button",{onClick:N,className:"absolute transition-colors top-3 right-3 text-slate-400 hover:text-slate-600","aria-label":"Cerrar modal",children:U.jsx(bP,{className:"w-6 h-6"})}),U.jsx("h3",{className:"mb-4 text-xl font-semibold text-slate-800 dark:text-white",children:"Acerca de esta Simulacin"}),U.jsxs("div",{className:"space-y-3 text-sm text-slate-600 dark:text-slate-300",children:[U.jsx("p",{children:"Esta aplicacin es una **simulacin educativa** diseada para demostrar un flujo de procesamiento de documentos en la nube utilizando tecnologas comunes."}),U.jsxs("p",{children:["**Tecnologas Simuladas:**",U.jsxs("ul",{className:"pl-5 mt-1 space-y-1 list-disc",children:[U.jsx("li",{children:"**Frontend:** React, Vite, Tailwind CSS, React Flow, Heroicons"}),U.jsx("li",{children:"**Backend (Simulado):** Python, Flask"}),U.jsx("li",{children:"**Funcionamiento:** Recuerda ejecutar el servidor Flask (api.py) en el puerto 5000 para simular la API en la misma maquina donde abras la url https://3mmanu3lmois3s.github.io/aws-contract-analyzer/"}),U.jsx("li",{children:"**Flujo AWS (Simulado):** S3 (para carga), API Gateway (como disparador), Lambda (para procesamiento), DynamoDB (para resultados)."})]})]}),U.jsx("p",{className:"pt-2 font-semibold text-red-600",children:" **Importante:** Esta demo NO se conecta a servicios reales de AWS. Todo el procesamiento ocurre localmente o es simulado con fines demostrativos y educativos (el contrato no se analiza con NLP ni AI, de momento da una respuesta mockeada)."}),U.jsx("p",{className:"pt-3 mt-4 text-xs text-right border-t text-slate-500 border-slate-200",children:"Autor: Ing. Emmanuel Mellado"})]})]})})):null,$=({result:E})=>{var I,V;if(!E)return null;const N=F=>{const X=F==null?void 0:F.toLowerCase();return X==="bajo"?"bg-green-100 text-green-700 ring-1 ring-inset ring-green-600/20":X==="moderado"?"bg-yellow-100 text-yellow-800 ring-1 ring-inset ring-yellow-600/20":X==="alto"?"bg-red-100 text-red-700 ring-1 ring-inset ring-red-600/10":"bg-slate-100 text-slate-600 ring-1 ring-inset ring-slate-500/10"},z=(F,X,Y)=>U.jsxs("div",{className:"flex items-start py-2.5 space-x-3 border-b border-slate-100 last:border-b-0",children:[U.jsx(F,{className:"flex-shrink-0 w-5 h-5 text-slate-400 mt-0.5","aria-hidden":"true"}),U.jsxs("div",{className:"flex-1",children:[U.jsx("p",{className:"text-sm font-medium text-slate-600",children:X}),U.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200",children:Y||"N/A"})]})]}),O=(F,X,Y,tt)=>U.jsxs("div",{className:"flex items-start py-2.5 space-x-3 border-b border-slate-100 last:border-b-0",children:[U.jsx(F,{className:"flex-shrink-0 w-5 h-5 text-slate-400 mt-0.5","aria-hidden":"true"}),U.jsxs("div",{className:"flex-1",children:[U.jsx("p",{className:"text-sm font-medium text-slate-600",children:X}),U.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-0.5 text-xs font-semibold ${tt}`,children:Y||"N/A"})]})]});return U.jsxs("div",{className:"mt-6 overflow-hidden bg-white border rounded-lg shadow-md dark:bg-slate-800 border-slate-200 dark:border-slate-600",children:[U.jsx("h3",{className:"px-5 py-3 text-lg font-semibold border-b bg-slate-50 dark:bg-slate-700 text-slate-700 dark:text-white border-slate-200 dark:border-slate-600",children:"Resultado del Anlisis"}),U.jsxs("div",{className:"px-5 py-4 space-y-1",children:[E.filename&&z(rP,"Archivo",E.filename),E.type&&z(fb,"Tipo Contrato",E.type),E.duration&&E.duration!=="N/A"&&z(J_,"Duracin",E.duration),E.compliance&&E.compliance!=="N/A"&&z((I=E.compliance)!=null&&I.includes("Cumple")?fP:ex,"Cumplimiento",E.compliance),E.recommendation&&z((V=E.recommendation)!=null&&V.includes("Apto")?Gz:sP,"Recomendacin",E.recommendation),E.amount&&E.amount!=="N/A"&&E.amount!=="No aplica"&&z(tx,"Monto",E.amount),E.monthly_payment&&E.monthly_payment!=="N/A"&&z(J_,"Pago mensual",E.monthly_payment),E.deposit&&E.deposit!=="N/A"&&E.deposit!=="No aplica"&&z(ex,"Depsito o garanta",E.deposit),E.sale_item&&E.sale_item!=="N/A"&&E.sale_item!=="No aplica"&&z(fb,"Objeto vendido",E.sale_item),E.objeto_venta&&E.objeto_venta!=="N/A"&&E.objeto_venta!=="No especificado"&&z(fb,"Objeto de la venta",E.objeto_venta),E.risk&&E.risk!=="N/A"&&O(tx,"Nivel de Riesgo",E.risk,N(E.risk))]})]})},G=({onFileChange:E,onAnalyze:N,selectedFile:z,isLoading:O,pendingPDFName:I})=>U.jsxs("div",{className:"p-6 mb-6 bg-white border rounded-lg shadow-md dark:bg-slate-800 border-slate-200 dark:border-slate-600",children:[U.jsx("h3",{className:"mb-4 text-lg font-semibold text-slate-800 dark:text-white",children:"1. Cargar Contrato (PDF)"}),I&&U.jsxs("div",{className:"p-4 mb-4 text-yellow-800 border border-yellow-300 rounded bg-yellow-50 dark:bg-yellow-900 dark:text-yellow-200 dark:border-yellow-700",children:[U.jsx("strong",{children:"Hay una solicitud pendiente:"})," el archivo ",U.jsx("em",{children:I})," est en espera porque el servidor Flask estaba apagado.",U.jsx("br",{}),"Por favor, comuncate con el administrador y vuelve a intentar ms tarde."]}),U.jsxs("div",{className:"flex flex-col space-y-3 sm:flex-row sm:items-center sm:space-x-4 sm:space-y-0",children:[U.jsxs("label",{className:`relative cursor-pointer inline-flex items-center justify-center px-5 py-2 border rounded-md shadow-sm text-sm font-medium focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500 transition duration-150 ease-in-out ${O?"bg-slate-100 text-slate-400 cursor-not-allowed":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:[U.jsx(Fz,{className:`-ml-1 mr-2 h-5 w-5 ${O?"text-slate-400":"text-slate-500"}`,"aria-hidden":"true"}),U.jsx("span",{children:z?"Cambiar archivo":"Seleccionar archivo"}),U.jsx("input",{type:"file",className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer",accept:".pdf",onChange:E,disabled:O})]}),z&&U.jsx("span",{className:"flex-1 min-w-0 text-sm truncate text-slate-600",title:z.name,children:z.name})]}),z&&U.jsx("button",{type:"button",onClick:N,disabled:O||!!I,className:`mt-4 w-full inline-flex justify-center items-center px-6 py-2.5 border border-transparent text-base font-semibold rounded-md shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition duration-150 ease-in-out ${O?"bg-slate-400 cursor-not-allowed":"bg-slate-300 hover:bg-slate-400"}`,children:O?U.jsxs(U.Fragment,{children:[U.jsx(bH,{})," Analizando..."]}):"Analizar Contrato"}),I&&U.jsxs("button",{type:"button",onClick:k,className:"mt-2 w-full inline-flex justify-center items-center px-6 py-2.5 border border-indigo-600 text-indigo-700 bg-white hover:bg-indigo-50 font-semibold rounded-md shadow-sm transition duration-150 ease-in-out",children:[" Reintentar anlisis de: ",I]})]}),R=({logMessages:E})=>E.length===0?null:U.jsx("div",{className:"flex flex-col items-start mt-6 space-y-2",children:E.map((N,z)=>U.jsx(AP,{message:N.msg,type:N.type,time:N.time},z))}),B=({steps:E})=>U.jsxs("div",{className:"mb-8 space-y-4",children:[U.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cmo funciona?"}),E.map(N=>U.jsxs("div",{className:"flex items-start p-4 space-x-4 transition duration-150 ease-in-out bg-white border rounded-lg shadow-sm border-slate-200 hover:shadow-lg hover:border-primary-300",children:[U.jsx(N.icon,{className:"flex-shrink-0 w-8 h-8 mt-1 text-primary-600","aria-hidden":"true"})," ",U.jsxs("div",{children:[U.jsx("h4",{className:"text-base font-semibold text-slate-700",children:N.name}),U.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:N.description})]})]},N.id))]});return U.jsxs("div",{className:"relative flex w-screen h-screen overflow-hidden font-sans bg-gradient-to-br from-slate-50 to-slate-200 dark:from-slate-900 dark:to-slate-800",children:[U.jsxs("div",{className:"absolute z-10 flex items-center space-x-3 top-4 right-4",children:[U.jsx(wH,{status:n}),U.jsx("a",{href:"https://github.com/3mmanu3lmois3s/aws-contract-analyzer/releases/download/v3.0.0/contract-api.exe",download:!0,title:"Descargar ejecutable para Windows",className:"p-2 text-white transition-all bg-green-600 rounded-full shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400",children:""}),U.jsx("button",{onClick:()=>A(!y),className:"p-2 text-white transition-all bg-indigo-600 rounded-full shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-400","aria-label":"DevTools",children:""}),U.jsx("button",{onClick:()=>p(!S),className:"p-2 transition-all bg-white rounded-full shadow-md text-slate-500 dark:bg-gray-700 hover:bg-slate-100 hover:dark:bg-gray-600 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500","aria-label":"Alternar modo oscuro",children:S?U.jsx(mP,{className:"w-6 h-6"}):U.jsx(nP,{className:"w-6 h-6"})}),U.jsx("button",{onClick:()=>g(!0),className:"p-2 transition-all bg-white rounded-full shadow-md text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500","aria-label":"Mostrar informacin",children:U.jsx(qC,{className:"w-6 h-6"})})]}),U.jsxs("div",{className:"flex flex-col w-1/2 h-full p-6 pr-3 overflow-y-auto",children:[U.jsx("h1",{className:"flex-shrink-0 mb-6 text-2xl font-bold text-slate-900 dark:text-white",children:"AWS Contract Analyzer "}),U.jsx("div",{className:"flex-shrink-0",children:U.jsx(G,{onFileChange:M,onAnalyze:L,onRetryPending:k,selectedFile:r,isLoading:l,pendingPDFName:w})}),U.jsxs("div",{className:"flex flex-col flex-grow mt-6 overflow-hidden bg-white border rounded-lg shadow-md dark:bg-slate-800 border-slate-200 dark:border-slate-600",children:[U.jsx("h3",{className:"flex-shrink-0 px-5 py-3 text-lg font-semibold border-b bg-slate-50 dark:bg-slate-700 text-slate-700 dark:text-white border-slate-200 dark:border-slate-600",children:"Arquitectura del Proceso"}),U.jsxs("div",{className:"flex-grow min-h-0 p-1 bg-slate-50",children:[U.jsx(Iz,{activeNodeId:b}),";"]})]})]}),U.jsxs("div",{className:"w-1/2 h-full p-6 pl-3 overflow-y-auto border-l border-slate-300 dark:border-slate-700 bg-slate-100 dark:bg-slate-900",children:[U.jsx("h2",{className:"pt-8 mb-6 text-xl font-semibold text-slate-900 dark:text-white lg:pt-0",children:" Detalles y Seguimiento"}),U.jsx(B,{steps:vH}),U.jsx(R,{logMessages:s}),!l&&e&&U.jsx($,{result:e}),h&&!l&&U.jsx("div",{className:"p-4 mt-6 text-sm border border-red-200 rounded-md bg-red-50 dark:bg-red-900 dark:border-red-500",children:U.jsxs("div",{className:"flex items-center",children:[U.jsx($C,{className:"flex-shrink-0 w-5 h-5 mr-2 text-red-500"}),U.jsxs("p",{className:"font-medium text-red-700 dark:text-red-200",children:["Error en el anlisis:"," ",U.jsx("span",{className:"font-normal",children:h})]})]})}),s.length===0&&!e&&!l&&!h&&U.jsx("div",{className:"p-6 mt-6 text-sm text-center border border-dashed rounded-md bg-slate-50 dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-500 dark:text-slate-300",children:"Sube un contrato PDF para iniciar el anlisis y ver el seguimiento aqu."})]}),U.jsx(H,{isOpen:f,onClose:()=>g(!1)}),y&&U.jsx("div",{className:"absolute inset-0 z-40 p-6 space-y-4 overflow-y-auto text-sm text-white bg-black bg-opacity-60 backdrop-blur-sm",children:U.jsxs("div",{className:"max-w-xl p-4 mx-auto bg-gray-800 rounded shadow-lg",children:[U.jsx("h2",{className:"mb-2 text-lg font-bold",children:" DevTools Overlay"}),U.jsxs("ul",{className:"pl-5 space-y-2 list-disc",children:[U.jsxs("li",{children:[U.jsx("strong",{children:"Frontend:"})," React + Vite + Tailwind CSS"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Icons:"})," Heroicons"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"API (Mock):"})," Python Flask (en local)"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Comunicacin:"})," React  fetch  Flask API (Puerto 5000)"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Simulacin:"})," AWS: S3, API Gateway, Lambda, DynamoDB"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Visualizacin:"})," React Flow para mostrar el flujo de arquitectura"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Modo Oscuro:"})," Tailwind + toggle manual con `useDarkMode`"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Nota:"})," Todo corre localmente, sin conexin real a AWS"]})]}),U.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 mt-4 text-white bg-indigo-600 rounded hover:bg-indigo-700",children:"Cerrar"})]})})]})}DL.createRoot(document.getElementById("root")).render(U.jsx(j.StrictMode,{children:U.jsx(SH,{})}));"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/aws-contract-analyzer/sw.js",{scope:"/aws-contract-analyzer/"}).then(t=>console.log("[App] SW registrado:",t)).catch(t=>console.error("[App] Error al registrar SW:",t))}):console.warn("[App] Service Workers no son soportados en este navegador.");
